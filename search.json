[{"title":"RESTful API","url":"/2020/06/07/RESTful-API/","content":"<blockquote>\n<p>RESTä¸ºä¸€ç§è®¾è®¡è§„èŒƒ<br>é€šè¿‡HTTPæ¥æè¿°æ“ä½œ,URLæ¥å®šä½èµ„æº</p>\n</blockquote>\n<a id=\"more\"></a>\n\n        <h2 id=\"1-HTTPçŠ¶æ€ç \"   >\n          <a href=\"#1-HTTPçŠ¶æ€ç \" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. HTTPçŠ¶æ€ç </h2>\n      <div class=\"table-container\"><table>\n<thead>\n<tr>\n<th></th>\n<th>å…·ä½“</th>\n<th>ç±»åˆ«</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1XX</td>\n<td>â€”</td>\n<td>ä¿¡æ¯æ€§</td>\n<td>æ¥å—åˆ°è¯·æ±‚ä¸”æ­£åœ¨å¤„ç†</td>\n</tr>\n<tr>\n<td>2XX</td>\n<td>â€”</td>\n<td>æˆåŠŸæ€§</td>\n<td>è¯·æ±‚å¤„ç†å®Œæ¯•</td>\n</tr>\n<tr>\n<td></td>\n<td>200</td>\n<td></td>\n<td><strong>OK</strong> è¯·æ±‚æˆåŠŸ</td>\n</tr>\n<tr>\n<td></td>\n<td>201</td>\n<td></td>\n<td><strong>Created</strong> åˆ›å»ºæˆåŠŸ</td>\n</tr>\n<tr>\n<td></td>\n<td>204</td>\n<td></td>\n<td><strong>No Content</strong> å¤„ç†æˆåŠŸï¼Œä½†æ²¡è¿”å›å®ä½“å†…å®¹ï¼Œæ— æ¶ˆæ¯ä½“</td>\n</tr>\n<tr>\n<td>3XX</td>\n<td>â€”</td>\n<td>é‡å®šå‘æ€§</td>\n<td>éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œæ¥å®Œæˆæ“ä½œ</td>\n</tr>\n<tr>\n<td></td>\n<td>300</td>\n<td></td>\n<td><strong>Multiple Choice</strong> æä¾›å¤šä¸ªå†…å®¹å¯é€‰æ‹©</td>\n</tr>\n<tr>\n<td>4XX</td>\n<td>4XX</td>\n<td>å®¢æˆ·ç«¯é”™è¯¯</td>\n<td>æœåŠ¡ç«¯æ— æ³•å¤„ç†è¯·æ±‚</td>\n</tr>\n<tr>\n<td></td>\n<td>400</td>\n<td></td>\n<td><strong>Bad Requset</strong> è¯­ä¹‰æœ‰è¯¯ï¼Œå‚æ•°æœ‰è¯¯</td>\n</tr>\n<tr>\n<td></td>\n<td>404</td>\n<td></td>\n<td><strong>Not Found</strong> æœªåœ¨æœåŠ¡å™¨ä¸Šæ‰¾åˆ°ç›¸åº”çš„èµ„æº</td>\n</tr>\n<tr>\n<td></td>\n<td>405</td>\n<td></td>\n<td><strong>Method Not Allowed</strong> è¯¥è¯·æ±‚æ–¹æ³•ä¸è¢«å…è®¸ï¼Œä¾‹å¦‚å‘é€PUTè¯·æ±‚åˆ°ä¸æ”¯æŒPUTæ–¹æ³•çš„æœåŠ¡å™¨</td>\n</tr>\n<tr>\n<td></td>\n<td>409</td>\n<td></td>\n<td><strong>Conflict</strong> è¯·æ±‚çš„èµ„æºå‘ç”Ÿå†²çªï¼Œè¿”å›è¯·æ±‚æ—¶ï¼Œéœ€æä¾›ä¿®æ”¹å»ºè®®ï¼ˆeg : å·®å¼‚æ¯”è¾ƒï¼‰</td>\n</tr>\n<tr>\n<td>5XX</td>\n<td>â€”</td>\n<td>æœåŠ¡ç«¯é”™è¯¯</td>\n<td>æœåŠ¡ç«¯å¤„ç†è¯·æ±‚å‡ºé”™</td>\n</tr>\n<tr>\n<td></td>\n<td>500</td>\n<td></td>\n<td><strong>Internal Server Error</strong> æœåŠ¡å™¨ä¸çŸ¥å¦‚ä½•å¤„ç†è¯¥è¯·æ±‚</td>\n</tr>\n<tr>\n<td></td>\n<td>504</td>\n<td></td>\n<td><strong>Gateway Timeout</strong> è·å–æ•°æ®è¶…æ—¶</td>\n</tr>\n</tbody></table></div>\n<blockquote>\n<p>PUT ä¸ POSTï¼š<br>PUTè¢«å®šä¹‰ä¸ºidempotentï¼ˆå¹‚ç­‰ï¼‰æ–¹æ³•ï¼Œè€ŒPOSTåˆ™ä¸æ˜¯<br>å³é‡å¤å¤šä¸ªè¯·æ±‚ï¼ŒPUTçš„ç›¸åº”ç»“æœæ˜¯ä¸€è‡´çš„ï¼ŒPOSTåˆ™ä¸æ˜¯ã€‚</p>\n<ul>\n<li>header(â€œHTTP/1.0 409 Conflictâ€, true);<br>trueï¼šå·²å‘é€ç›¸åŒçš„headeræ—¶ï¼Œåç»­å°†ä¸å‰é¢çš„ç»“æœä¸€è‡´ã€‚<br>falseï¼šç»“æœå¯ä¸ä¸€è‡´ï¼Œå³ç›¸åŒè¯·æ±‚å¯å¹¶å­˜ã€‚</li>\n</ul>\n</blockquote>\n\n        <h2 id=\"2-RESTfulè®¾è®¡è§„åˆ™\"   >\n          <a href=\"#2-RESTfulè®¾è®¡è§„åˆ™\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. RESTfulè®¾è®¡è§„åˆ™</h2>\n      <div class=\"table-container\"><table>\n<thead>\n<tr>\n<th>Method</th>\n<th>æ“ä½œ</th>\n<th>çŠ¶æ€ç </th>\n</tr>\n</thead>\n<tbody><tr>\n<td>OPTIONS</td>\n<td>è¯¢é—®è¯¥æ¥å£/ç«¯ç‚¹æ”¯æŒå“ªäº›æ–¹æ³•</td>\n<td>200 OK</td>\n</tr>\n<tr>\n<td>POST</td>\n<td>Createåˆ›å»º</td>\n<td>æ­£å¸¸ï¼š201ï¼›å¼‚å¸¸ï¼š404ã€409</td>\n</tr>\n<tr>\n<td>GET</td>\n<td>Readè¯»å–</td>\n<td>æ­£å¸¸ï¼š200ï¼›å¼‚å¸¸ï¼š404</td>\n</tr>\n<tr>\n<td>HEAD</td>\n<td>Readï¼ˆbodyä¸ºç©ºï¼‰</td>\n<td>æ­£å¸¸ï¼š200ï¼›å¼‚å¸¸ï¼š404</td>\n</tr>\n<tr>\n<td>PUT</td>\n<td>Replaceæ›¿æ¢</td>\n<td>æ­£å¸¸ï¼š200ï¼›å¼‚å¸¸ï¼š204ã€404ã€405</td>\n</tr>\n<tr>\n<td>PATCH</td>\n<td>Updateæ›´æ–°</td>\n<td>æ­£å¸¸ï¼š200ï¼›å¼‚å¸¸ï¼š204ã€404ã€405</td>\n</tr>\n<tr>\n<td>DELETE</td>\n<td>delete</td>\n<td>æ­£å¸¸ï¼š200ã€202ã€204ï¼›å¼‚å¸¸ï¼š404ã€405</td>\n</tr>\n</tbody></table></div>\n\n        <h3 id=\"2-1-PATCH-ä¸-PUT\"   >\n          <a href=\"#2-1-PATCH-ä¸-PUT\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. PATCH ä¸ PUT</h3>\n      <p>ğŸ”¹ PATCHä¸ºæ›´æ–°æŸèµ„æºçš„éƒ¨åˆ†æ•°æ®ï¼ˆéƒ¨åˆ†ï¼‰ï¼ŒPUTåˆ™æ˜¯æ›´æ–°æŸèµ„æºçš„å…¨éƒ¨æ•°æ®ï¼ˆæ•´ä½“ï¼‰<br>ğŸ”¹ ä½†åªéœ€ä¿®æ”¹éƒ¨åˆ†æ•°æ®æ—¶ï¼Œä¹Ÿå¯ç”¨PUTå‘é€éœ€ä¿®æ”¹çš„æ•°æ®ï¼Œæ¥æ›¿æ¢PATCHã€‚</p>\n\n        <h3 id=\"2-2-POSTçš„æˆåŠŸå“åº”\"   >\n          <a href=\"#2-2-POSTçš„æˆåŠŸå“åº”\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2. POSTçš„æˆåŠŸå“åº”</h3>\n      <p>ğŸ”¹ ä»¥HTTPæ ‡å‡†è€Œè¨€ï¼ŒPOSTåº”è¿”å›çš„æˆåŠŸçŠ¶æ€ç ä¸º201ã€‚<br>ğŸ”¹ ä¹Ÿå¯ç›´æ¥å“åº”æ–°å»ºèµ„æºçš„æ‰€æœ‰æ•°æ®ã€‚</p>\n\n        <h3 id=\"2-3-DELETEçš„å“åº”å†…å®¹\"   >\n          <a href=\"#2-3-DELETEçš„å“åº”å†…å®¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.3. DELETEçš„å“åº”å†…å®¹</h3>\n      <p>ğŸ”¹ çŠ¶æ€ç <br>200 ï¼šåˆ é™¤æˆåŠŸï¼Œè¿”å›åˆ é™¤çš„å…·ä½“ä¿¡æ¯ï¼ˆå«bodyï¼šcode+message+dataï¼‰<br>204 ï¼šåˆ é™¤æˆåŠŸï¼Œæ— è¿”å›å†…å®¹ï¼ˆæ— bodyï¼‰<br>202 ï¼šæ¥å—åˆ é™¤è¯·æ±‚ï¼Œæœªæ‰§è¡Œ</p>\n\n        <h2 id=\"3-é£æ ¼è®¾è®¡\"   >\n          <a href=\"#3-é£æ ¼è®¾è®¡\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. é£æ ¼è®¾è®¡</h2>\n      \n        <h3 id=\"3-1-æ¥å£\"   >\n          <a href=\"#3-1-æ¥å£\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1. æ¥å£</h3>\n      <p>ğŸ”¹ ä¸ä½¿ç”¨åŠ¨è¯,ä½¿ç”¨åè¯,ä»¥è¯·æ±‚æ–¹æ³•æ¥ä½œä¸ºåŠ¨è¯<br>ğŸ”¹ ä¸ºäº†ç»Ÿä¸€,åè¯å°½é‡ä¸ºå¤æ•°<br>ğŸ”¹ é¿å…å¤šçº§URLã€‚<br>&emsp;é™¤äº†ç¬¬ä¸€çº§ï¼Œå…¶ä»–çº§åˆ«éƒ½ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²è¡¨è¾¾ã€‚<br>&emsp;eg: GET /authors/12?categories=2<br>&emsp;&emsp;GET /articles?published=true</p>\n\n        <h3 id=\"3-2-å“åº”ä¿¡æ¯\"   >\n          <a href=\"#3-2-å“åº”ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2. å“åº”ä¿¡æ¯</h3>\n      <figure class=\"highlight json\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"code\"</span>: xxx,</span><br><span class=\"line\">    <span class=\"attr\">\"message\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"data\"</span>:&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// åˆ†é¡µå“åº”ç»“æœçš„å‚æ•°ï¼ˆå¯é€‰ï¼‰</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¯æ”¾åœ¨dataä¸­æˆ–å¤–éƒ¨</span></span><br><span class=\"line\">    <span class=\"attr\">\"page|currentPage\"</span>: xxx,            <span class=\"comment\">// å½“å‰é¡µç </span></span><br><span class=\"line\">    <span class=\"attr\">\"numPerPage\"</span>: xxx,                  <span class=\"comment\">// æ¯é¡µä¸ªæ•°</span></span><br><span class=\"line\">    <span class=\"attr\">\"pages|totalPageNum\"</span>: xxx,          <span class=\"comment\">// æ€»é¡µæ•°</span></span><br><span class=\"line\">    <span class=\"attr\">\"total\"</span>: xxx,                       <span class=\"comment\">// æ€»ä¸ªæ•°</span></span><br><span class=\"line\">    <span class=\"attr\">\"hasPrev\"</span>: boolean,                 <span class=\"comment\">// æ˜¯å¦æœ‰ä¸Šä¸€é¡µ</span></span><br><span class=\"line\">    <span class=\"attr\">\"hasNext\"</span>: boolean,                 <span class=\"comment\">// æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</span></span><br><span class=\"line\">    <span class=\"attr\">\"items\"</span> : &#123;&#125;                        <span class=\"comment\">// åˆ—è¡¨æ•°æ®å†…å®¹</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<hr>\n<p>ğŸ“˜å‚è€ƒã€æ‘˜å–æ–‡ç« ï¼š<br><span class=\"exturl\"><a class=\"exturl__link\"   href=\"http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html\"  target=\"_blank\" rel=\"noopener\">RESTful API æœ€ä½³å®è·µâ€“é˜®ä¸€å³°</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span><br><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://crifan.github.io/http_restful_api/website/\"  target=\"_blank\" rel=\"noopener\">HTTPåå°ç«¯ï¼šRESTful APIæ¥å£è®¾è®¡</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n","categories":["ä¸ªäººç¬”è®°","RESTful"],"tags":["RESTful"]},{"title":"SpEL","url":"/2020/06/12/SpEL/","content":"\n        <h2 id=\"1-ç®€ä»‹\"   >\n          <a href=\"#1-ç®€ä»‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ç®€ä»‹</h2>\n      <p>SpELï¼ˆSpring Expression Languageï¼‰ä¸ºSpringä¸­çš„è¡¨è¾¾å¼è¯­è¨€ã€‚å¯ç”¨äºå±æ€§çš„æŸ¥è¯¢ä¸æ“ä½œï¼Œç±»ä¼¼ELè¡¨è¾¾å¼ã€‚é€šè¿‡@Valueä¸SPELç»“åˆä½¿ç”¨ï¼Œå¯æ›´çµæ´»åœ°ä¸ºå‚æ•°èµ‹å€¼ã€‚</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"2-è¯­æ³•\"   >\n          <a href=\"#2-è¯­æ³•\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. è¯­æ³•</h2>\n      \n        <h3 id=\"2-1-æ–‡å­—è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦\"   >\n          <a href=\"#2-1-æ–‡å­—è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. æ–‡å­—è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦</h3>\n      <p>æ”¯æŒæ•°å€¼ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ç±»å‹ã€‚<br>è¿ç®—ç¬¦æ”¯æŒç®—æœ¯ã€é€»è¾‘ã€å…³ç³»è¿ç®—ç¬¦ã€‚<br>è¿ç®—ç¬¦ä¹Ÿæ”¯æŒå­—ç¬¦ç¬¦å·ï¼š<br> lt (&lt;), gt (&gt;), le (&lt;=), ge (&gt;=), eq (==), ne (!=), div (/), mod (%), not (!)ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"str1\"</span>) <span class=\"comment\">// str1</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> String str;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;str2&#125;\"</span>) <span class=\"comment\">// str2</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> String str;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;1+3&#125;\"</span>)  <span class=\"comment\">// 4</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Integer num;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//å…¶å®ƒæ¡ˆä¾‹ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// 1000.00 - 1e4</span></span><br><span class=\"line\"><span class=\"comment\">// \"true and false\"</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-2-å†…è”åˆ—è¡¨ã€å†…è”map\"   >\n          <a href=\"#2-2-å†…è”åˆ—è¡¨ã€å†…è”map\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2. å†…è”åˆ—è¡¨ã€å†…è”map</h3>\n      <p>ç”¨äºå¯¹å®¹å™¨ç›¸å…³å‚æ•°ç›´æ¥èµ‹å€¼ã€‚éƒ½æ˜¯ç”¨{}æ¥è¡¨ç¤ºã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;&#123;'list_str1','list_str2'&#125;&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;String&gt; list;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;&#123;'name':'name01','password':'password01'&#125;&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> Map map;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-3-ä¸‰å…ƒè¿ç®—ç¬¦ä¸Elvisæ“ä½œç¬¦\"   >\n          <a href=\"#2-3-ä¸‰å…ƒè¿ç®—ç¬¦ä¸Elvisæ“ä½œç¬¦\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.3. ä¸‰å…ƒè¿ç®—ç¬¦ä¸Elvisæ“ä½œç¬¦</h3>\n      <p>Elvis æ“ä½œç¬¦æ˜¯ç”¨äºç®€å†™åˆ¤æ–­nullå€¼çš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œ<br>egï¼šname!=null ? name : â€˜isNULLâ€™  ==&gt; name?:â€™isNULLâ€™</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.age&gt;=18?'æˆå¹´':'æœªæˆå¹´'&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String str5;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.age==null?xi.age:'isNULL'&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String str6;</span><br><span class=\"line\"><span class=\"comment\">// ç­‰ä»·äº</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.age?:'isNULL'&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String str7;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-4-æ–¹æ³•è°ƒç”¨\"   >\n          <a href=\"#2-4-æ–¹æ³•è°ƒç”¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.4. æ–¹æ³•è°ƒç”¨</h3>\n      <p>åœ¨æ–¹æ³•è°ƒç”¨ä¸Šï¼Œå¯¹äºæ™®é€šæ–¹æ³•å¯ç›´æ¥è°ƒç”¨ï¼Œå¯¹äºé™æ€æ–¹æ³•åˆ™é€šè¿‡T()æ¥è·å–é™æ€æ–¹æ³•ã€‚T(é™æ€ç±»å).function</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è°ƒç”¨Stringä¸­çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;'abc'.substring(2, 3)&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String str3;</span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨iocå®¹å™¨ä¸­ç±»çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;demoClass.myFun('abcde')&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String str4;</span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨é™æ€æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;T(java.lang.Math).PI&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">double</span> pi;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-5-å¼•ç”¨bean\"   >\n          <a href=\"#2-5-å¼•ç”¨bean\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.5. å¼•ç”¨bean</h3>\n      <p>å¯¹äºbeançš„è·å–å¯ä»¥ä½¿ç”¨@ç¬¦å·æ¥è·å–iocå®¹å™¨ä¸­å†…å®¹ï¼Œä¹Ÿå¯çœç•¥ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è°ƒç”¨iocå®¹å™¨ä¸­ç±»çš„å±æ€§</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;@xi.age&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String ageStr;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨iocå®¹å™¨ä¸­ç±»çš„å±æ€§</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.age&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> String ageStr;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">// è°ƒç”¨iocå®¹å™¨ä¸­ç±»çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;demoClass.myFun('abcde')&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> Strubg str4;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-6-å®¹å™¨è¿‡æ»¤ä¸æ˜ å°„\"   >\n          <a href=\"#2-6-å®¹å™¨è¿‡æ»¤ä¸æ˜ å°„\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.6. å®¹å™¨è¿‡æ»¤ä¸æ˜ å°„</h3>\n      <p>SPELå¯é€šè¿‡<b>.?[æ¡ä»¶]</b>æ¥å¯¹å®¹å™¨è¿›è¡Œç®€å•çš„è¿‡æ»¤ï¼Œ?[]å°†è·å–ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰ç»“æœã€‚<br>è‹¥åªéœ€è·å–ç¬¬ä¸€ä¸ªç»“æœæˆ–æœ€åä¸€ä¸ªç»“æœï¼Œåˆ™å¯ä½¿ç”¨<b>^[]å’Œ$[]</b>,å…¶ä¸­^[]è·å–ç¬¬ä¸€ä¸ªç»“æœï¼Œ$[]è·å–æœ€åä¸€ä¸ªç»“æœ</p>\n<p>å¯¹äºå®¹å™¨çš„æ˜ å°„ï¼Œåˆ™é€šè¿‡<b>![]</b>æ¥å®ç°</p>\n<figure class=\"highlight plain\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">@startmindmap</span><br><span class=\"line\"></span><br><span class=\"line\">* å®¹å™¨</span><br><span class=\"line\">** è¿‡æ»¤</span><br><span class=\"line\">*** &lt;b&gt;?[æ¡ä»¶]&lt;&#x2F;b&gt;</span><br><span class=\"line\">*** &lt;b&gt;^[æ¡ä»¶]&lt;&#x2F;b&gt;</span><br><span class=\"line\">*** &lt;b&gt;$[æ¡ä»¶]&lt;&#x2F;b&gt;</span><br><span class=\"line\">** æ˜ å°„</span><br><span class=\"line\">*** &lt;b&gt;![æ¡ä»¶]&lt;&#x2F;b&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">@endmindmap</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.friends.?[age&lt;10]&#125;\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;MyUser&gt; friends_;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.friends.![name]&#125;\"</span>) <span class=\"comment\">//è¿”å›[name...]</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;String&gt; names;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-7-æ­£åˆ™è¡¨è¾¾å¼\"   >\n          <a href=\"#2-7-æ­£åˆ™è¡¨è¾¾å¼\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.7. æ­£åˆ™è¡¨è¾¾å¼</h3>\n      <p>é€šè¿‡mathceså…³é”®å­—æ¥å®ç°ã€‚ value mathces â€˜æ¨¡æ¿â€™ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Value</span>(<span class=\"string\">\"#&#123;xi.email matches '[a-zA-Z0-9._%+-]+@[a-zA-Z0-9._%+-]+.com'&#125;\"</span>)</span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> isEmail;</span><br></pre></td></tr></table></div></figure>\n\n<hr>\n<p>ğŸ“˜å‚è€ƒï¼š<br><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/expressions.html\"  target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span><br><span class=\"exturl\"><a class=\"exturl__link\"   href=\"http://itmyhome.com/spring/expressions.html\"  target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£-ä¸­æ–‡ç‰ˆ</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n","categories":["ä¸ªäººç¬”è®°","Java","Spring","SpEL"],"tags":["Java","Spring","SpEL"]},{"title":"SpringBootæ•´åˆSpringSecurity","url":"/2020/06/07/SpringBoot%E6%95%B4%E5%90%88SpringSecurity/","content":"\n        <h2 id=\"1-jaråŒ…å¯¼å…¥\"   >\n          <a href=\"#1-jaråŒ…å¯¼å…¥\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. jaråŒ…å¯¼å…¥</h2>\n      <figure class=\"highlight xml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-security<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n<a id=\"more\"></a>\n\n        <h2 id=\"2-é»˜è®¤å‚æ•°\"   >\n          <a href=\"#2-é»˜è®¤å‚æ•°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. é»˜è®¤å‚æ•°</h2>\n      <p>å¯¼å…¥SpringSecurityçš„jaråŒ…åï¼Œåˆ™ç”Ÿæ•ˆã€‚<br>SpringSecurityé»˜è®¤æ‹¦æˆªäº†æ‰€æœ‰è¯·æ±‚ï¼Œæä¾›äº†è¡¨å•ç™»å½•ï¼Œé»˜è®¤æä¾›äº†ä¸€ä¸ªUserå¯¹è±¡è®°å½•äº†é»˜è®¤çš„ç”¨æˆ·åã€å¯†ç ã€è§’è‰²ç­‰ã€‚</p>\n<p>ä»SecuriryProperiesç±»ä¸­å¯å¾—å‡ºï¼Œç”¨æˆ·åé»˜è®¤ä¸ºuserç­‰ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//SecuriryProperiesç±»ä¸­çš„å†…éƒ¨ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * Default user name.</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name = <span class=\"string\">\"user\"</span>;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * Password for the default user name.</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password = UUID.randomUUID().toString();</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * Granted roles for the default user name.</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;String&gt; roles = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></div></figure>\n\n<p>å¯ä¿®æ”¹çš„è‡ªåŠ¨é…ç½®å‚æ•°ï¼š</p>\n<figure class=\"highlight yml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ----------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># SECURITY PROPERTIES</span></span><br><span class=\"line\"><span class=\"comment\"># ----------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># SECURITY (SecurityProperties)</span></span><br><span class=\"line\"><span class=\"string\">spring.security.filter.order=0</span> <span class=\"comment\"># Security filter chain order.</span></span><br><span class=\"line\"><span class=\"string\">spring.security.filter.dispatcher-types=ASYNC,ERROR,REQUEST</span> <span class=\"comment\"># Security filter chain dispatcher types.</span></span><br><span class=\"line\"><span class=\"string\">spring.security.user.name=user</span> <span class=\"comment\"># Default user name.</span></span><br><span class=\"line\"><span class=\"string\">spring.security.user.password=</span> <span class=\"comment\"># Password for the default user name.</span></span><br><span class=\"line\"><span class=\"string\">spring.security.user.roles=</span> <span class=\"comment\"># Granted roles for the default user name.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SECURITY OAUTH2 CLIENT (OAuth2ClientProperties)</span></span><br><span class=\"line\"><span class=\"string\">spring.security.oauth2.client.provider.*=</span> <span class=\"comment\"># OAuth provider details.</span></span><br><span class=\"line\"><span class=\"string\">spring.security.oauth2.client.registration.*=</span> <span class=\"comment\"># OAuth client registrations.</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"3-é…ç½®è®¤è¯ä¿¡æ¯\"   >\n          <a href=\"#3-é…ç½®è®¤è¯ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. é…ç½®è®¤è¯ä¿¡æ¯</h2>\n      <p>SpringSecurityä¸­è®¤è¯ä¿¡æ¯çš„é…ç½®é€šè¿‡WebSecurityConfigurerAdapteræ¥å£å†…çš„configure(AuthenticationManagerBuilder auth)æ–¹æ³•æ¥é…ç½®ã€‚</p>\n\n        <h3 id=\"3-1-ä½¿ç”¨å›ºå®šçš„è®¤è¯ä¿¡æ¯\"   >\n          <a href=\"#3-1-ä½¿ç”¨å›ºå®šçš„è®¤è¯ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1. ä½¿ç”¨å›ºå®šçš„è®¤è¯ä¿¡æ¯</h3>\n      <figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(AuthenticationManagerBuilder auth)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    auth.inMemoryAuthentication()</span><br><span class=\"line\">            .withUser(<span class=\"string\">\"xi\"</span>).password(<span class=\"string\">\"xi\"</span>).roles(<span class=\"string\">\"admin\"</span>)</span><br><span class=\"line\">            .and()</span><br><span class=\"line\">            .withUser(<span class=\"string\">\"ming\"</span>).password(<span class=\"string\">\"ming\"</span>).roles(<span class=\"string\">\"user\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"3-2-ä½¿ç”¨æ•°æ®åº“ä¸­çš„ä¿¡æ¯\"   >\n          <a href=\"#3-2-ä½¿ç”¨æ•°æ®åº“ä¸­çš„ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2. ä½¿ç”¨æ•°æ®åº“ä¸­çš„ä¿¡æ¯</h3>\n      <p>åœ¨é…ç½®ç±»ä¸­è®¤è¯ä¿¡æ¯æ–¹æ³•ä¸Šï¼Œæ·»åŠ UserServiceç±»å®ä¾‹ï¼Œè¯¥ç±»éœ€å®ç°<b>UserDetailsServiceæ¥å£</b>,é‡å†™ä»¥ä¸‹è¯¥æ–¹æ³•ï¼š<br><b>UserDetails loadUserByUsername(String var1) </b><br>è¯¥æ–¹æ³•å°†è¿”å›çš„å†…å®¹æ˜¯ä¸æ•°æ®åº“ç›¸äº’æ˜ å°„çš„userå®ä½“ç±»ï¼Œå…¶éœ€å®ç°<b>UserDetailsæ¥å£</b></p>\n<p>ğŸ”¹ é…ç½®ç±»</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\">UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(AuthenticationManagerBuilder auth)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    auth.userDetailsService(userService);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ service</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserService</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDetailsService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> User <span class=\"title\">loadUserByUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">        User user = userMapper.loadUserByUsername(username);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (user == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UsernameNotFoundException(<span class=\"string\">\"ç”¨æˆ·ä¸å­˜åœ¨\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        user.setRoles(userMapper.getRolesByUserId(user.getId()));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ userå®ä½“ç±»</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDetails</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> enabled;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> locked;  <span class=\"comment\">//æ˜¯å¦è¢«é”å®š</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Role&gt; roles;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"3-3-å¯†ç åŠ å¯†\"   >\n          <a href=\"#3-3-å¯†ç åŠ å¯†\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3. å¯†ç åŠ å¯†</h3>\n      <p>ğŸ”¹ è®¾ç½®å¯†ç åŠ å¯†æ–¹å¼</p>\n<p>å¯åœ¨é…ç½®ç±»ä¸­æ³¨å…¥PasswordEncoderç±»ã€‚<br>æ³¨å…¥å…¶å­ç±»åï¼Œæ•°æ®åº“åˆ™éœ€å­˜å‚¨å…¶ç›¸åº”çš„åŠ å¯†åçš„å¯†ç ï¼ˆå¯ä½¿ç”¨è¯¥åŠ å¯†ç±»ä¸­åŠ å¯†æ–¹æ³•æ¥æ‰‹åŠ¨è·å–åŠ å¯†åçš„å¯†ç ï¼‰</p>\n<p>ç›´æ¥ä½¿ç”¨Encoder,æ•°æ®åº“åˆ™æ— éœ€å­˜å‚¨ç›å€¼ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"function\">PasswordEncoder <span class=\"title\">passwordEncoder</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> BCryptPasswordEncoder();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ’¬ BCryptä¸ºå•å‘HashåŠ å¯†,ç ´è§£æˆæœ¬å¾ˆé«˜ï¼Œ</p>\n<blockquote>\n<p>BCrypt = BCryptç‰ˆæœ¬å· + saltç› + Hashç»“æœå€¼<br>å…¶ä¸­Hashç»“æœå€¼ = Hash(æ˜æ–‡å¯†ç ,salt)</p>\n</blockquote>\n<p>ğŸ”¹ å–æ¶ˆå¯†ç åŠ å¯†ï¼ˆå·²è¿‡æ—¶ï¼‰<br>åœ¨é…ç½®ç±»ä¸­æ³¨å…¥NoOpPasswordEncoder.getInstance()</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"function\">PasswordEncoder <span class=\"title\">passwordEncoder</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> NoOpPasswordEncoder.getInstance();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"3-4-è®¾ç½®è§’è‰²ç»§æ‰¿å…³ç³»\"   >\n          <a href=\"#3-4-è®¾ç½®è§’è‰²ç»§æ‰¿å…³ç³»\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.4.è®¾ç½®è§’è‰²ç»§æ‰¿å…³ç³»</h3>\n      <figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"function\">RoleHierarchy <span class=\"title\">roleHierarchy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    RoleHierarchyImpl roleHierarchy = <span class=\"keyword\">new</span> RoleHierarchyImpl();</span><br><span class=\"line\">    String hierarchy = <span class=\"string\">\"ROLE_dba &gt; ROLE_admin \\n ROLE_admin &gt; ROLE_user\"</span>;</span><br><span class=\"line\">    roleHierarchy.setHierarchy(hierarchy);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> roleHierarchy;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"4-HttpSecurity\"   >\n          <a href=\"#4-HttpSecurity\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. HttpSecurity</h2>\n      <p>httpSecurityç›¸å…³é…ç½®é€šè¿‡WebSecurityConfigurerAdapterçš„configure(HttpSecurity http)æ–¹æ³•æ¥é…ç½®ã€‚</p>\n\n        <h3 id=\"4-1-æ§åˆ¶è¯·æ±‚è·¯å¾„æƒé™ï¼ˆèµ‹äºˆè§’è‰²ï¼‰\"   >\n          <a href=\"#4-1-æ§åˆ¶è¯·æ±‚è·¯å¾„æƒé™ï¼ˆèµ‹äºˆè§’è‰²ï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.1 æ§åˆ¶è¯·æ±‚è·¯å¾„æƒé™ï¼ˆèµ‹äºˆè§’è‰²ï¼‰</h3>\n      \n        <h4 id=\"4-1-1-ä½¿ç”¨å›ºå®šçš„èµ„æºè·¯å¾„æƒé™ä¿¡æ¯\"   >\n          <a href=\"#4-1-1-ä½¿ç”¨å›ºå®šçš„èµ„æºè·¯å¾„æƒé™ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.1.1. ä½¿ç”¨å›ºå®šçš„èµ„æºè·¯å¾„æƒé™ä¿¡æ¯</h4>\n      <figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.authorizeRequests()</span><br><span class=\"line\">            .antMatchers(<span class=\"string\">\"/admin/**\"</span>).hasRole(<span class=\"string\">\"admin\"</span>)</span><br><span class=\"line\"><span class=\"comment\">//          .antMatchers(\"user/**\").hasAnyRole(\"admin\",\"user\")</span></span><br><span class=\"line\">            .antMatchers(<span class=\"string\">\"user/**\"</span>).access(<span class=\"string\">\"hasAnyRole('admin','user')\"</span>)</span><br><span class=\"line\">            .anyRequest().authenticated()</span><br><span class=\"line\">            .and();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"4-1-2-åŠ¨æ€æ›´æ”¹\"   >\n          <a href=\"#4-1-2-åŠ¨æ€æ›´æ”¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.1.2. åŠ¨æ€æ›´æ”¹</h4>\n      <p>éœ€è¦å‘å®¹å™¨æ³¨å…¥ä¸¤ä¸ªç±»ï¼š</p>\n<ol>\n<li>å®ç°FilterInvocationSecurityMetadataSourceæ¥å£çš„ç±»</li>\n<li>å®ç°AccessDecisionManageræ¥å£çš„ç±»</li>\n</ol>\n<p>ä¹‹åå†å°†è¿™ä¸¤ä¸ªç±»æ·»åŠ åˆ°HttpSecurityä¸­ã€‚</p>\n<p>FilterInvocationSecurityMetadataSourceä¸»è¦è¿”å›è¯·æ±‚æ‰€éœ€è®¤è¯ä¿¡æ¯ï¼ˆè§’è‰²ï¼‰ã€‚<br>AccessDecisionManagerä¸»è¦ç”¨æ¥å†³å®šè¯·æ±‚æ˜¯å¦é€šè¿‡ï¼Œé€šè¿‡è¿”å›ï¼Œä¸é€šè¿‡åˆ™æŠ›AccessDeniedExceptionå¼‚å¸¸ã€‚</p>\n<p>ğŸ”¹ æ³¨å…¥FilterInvocationSecurityMetadataSource</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyFilter</span> <span class=\"keyword\">implements</span> <span class=\"title\">FilterInvocationSecurityMetadataSource</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//ç”¨äºåŒ¹é…url</span></span><br><span class=\"line\">    AntPathMatcher pathMatcher = <span class=\"keyword\">new</span> AntPathMatcher();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    MenuService menuService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ ¹æ®è¯·æ±‚åœ°å€è®¾ç½®æ‰€éœ€è¦çš„è§’è‰²</span></span><br><span class=\"line\"><span class=\"comment\">     * è¯·æ±‚åœ°å€ä¸æ•°æ®åº“ä¸­æ— åŒ¹é…é¡¹ï¼Œåˆ™æ·»åŠ ä¸ºéœ€è¦ç™»å½•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> o  req + resp + chain</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IllegalArgumentException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;ConfigAttribute&gt; <span class=\"title\">getAttributes</span><span class=\"params\">(Object o)</span> <span class=\"keyword\">throws</span> IllegalArgumentException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//è·å–è¯·æ±‚åœ°å€</span></span><br><span class=\"line\">        String requestUrl = ((FilterInvocation) o).getRequestUrl();</span><br><span class=\"line\">        <span class=\"comment\">//è·å–æ•°æ®åº“ä¸­æ‰€æœ‰èµ„æºè¯·æ±‚åœ°å€(å«è§’è‰²)</span></span><br><span class=\"line\">        List&lt;Menu&gt; allMenus = menuService.getAllMenus();</span><br><span class=\"line\">        <span class=\"comment\">//æŸ¥æ‰¾å½“å‰è¯·æ±‚è·¯å¾„ä¸æ•°æ®åº“ä¸­å“ªä¸ªèµ„æºè¯·æ±‚åŒ¹é…</span></span><br><span class=\"line\">        <span class=\"comment\">// åŒ¹é…åˆ™è¿”å›å…¶æ‰€éœ€çš„è®¤è¯ä¿¡æ¯ï¼ˆè§’è‰²ï¼‰</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Menu menu : allMenus) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pathMatcher.match(menu.getPattern(), requestUrl)) &#123;</span><br><span class=\"line\">                List&lt;Role&gt; roles = menu.getRoles();</span><br><span class=\"line\">                String[] rolesStr = <span class=\"keyword\">new</span> String[roles.size()];</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; roles.size(); i++) &#123;</span><br><span class=\"line\">                    rolesStr[i] = roles.get(i).getName();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> SecurityConfig.createList(rolesStr);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// æ— åŒ¹é…é¡¹ï¼Œé»˜è®¤è¿”å› ROLE_login</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> SecurityConfig.createList(<span class=\"string\">\"ROLE_login\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æ³¨å…¥AccessDecisionManager</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAccessDecisionManager</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccessDecisionManager</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ ¹æ®å½“å‰è§’è‰²ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆå½“å‰è¯·æ±‚æ‰€éœ€è§’è‰²çš„è¦æ±‚</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> authentication å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> o å½“å‰è¯·æ±‚å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> collection    å½“å‰è¯·æ±‚å¯¹è±¡æ‰€éœ€çš„è§’è‰² å¯¹åº”ç€FilterInvocationSecurityMetadataSource</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> AccessDeniedException</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> InsufficientAuthenticationException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">decide</span><span class=\"params\">(Authentication authentication, Object o, Collection&lt;ConfigAttribute&gt; collection)</span> <span class=\"keyword\">throws</span> AccessDeniedException, InsufficientAuthenticationException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// éå†æ‰€éœ€è§’è‰²ä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"comment\">// è‹¥å½“å‰è§’è‰²åœ¨æ‰€éœ€è§’è‰²å†…ï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™åˆ™æŠ›å¼‚å¸¸</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (ConfigAttribute attribute : collection) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"string\">\"ROLE_login\"</span>.equals(attribute.getAttribute())) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (authentication <span class=\"keyword\">instanceof</span> AnonymousAuthenticationToken) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> AccessDeniedException(<span class=\"string\">\"éæ³•è¯·æ±‚!\"</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (GrantedAuthority authority : authorities) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (authority.getAuthority().equals(attribute.getAttribute())) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> AccessDeniedException(<span class=\"string\">\"éæ³•è¯·æ±‚!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">supports</span><span class=\"params\">(ConfigAttribute configAttribute)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">supports</span><span class=\"params\">(Class&lt;?&gt; aClass)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ å°†è‡ªå®šä¹‰çš„ä¸¤ä¸ªç±»æ·»åŠ åˆ°HttpSecurityä¸­</p>\n<ol>\n<li>è®¾ç½®è¯·æ±‚èµ„æºè·¯å¾„è®¤è¯ä¿¡æ¯</li>\n<li>åˆ¤æ–­è¯·æ±‚å†…å®¹æ˜¯å¦ç¬¦åˆè®¤è¯ä¿¡æ¯</li>\n</ol>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    http.authorizeRequests()</span><br><span class=\"line\">            .withObjectPostProcessor(<span class=\"keyword\">new</span> ObjectPostProcessor&lt;FilterSecurityInterceptor&gt;() &#123;</span><br><span class=\"line\">                <span class=\"meta\">@Override</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span> &lt;O extends FilterSecurityInterceptor&gt; <span class=\"function\">O <span class=\"title\">postProcess</span><span class=\"params\">(O o)</span> </span>&#123;</span><br><span class=\"line\">                    o.setAccessDecisionManager(myAccessDecisionManager);</span><br><span class=\"line\">                    o.setSecurityMetadataSource(myFilter);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            .and()</span><br><span class=\"line\">            .formLogin()</span><br><span class=\"line\">            .permitAll()</span><br><span class=\"line\">            .and()</span><br><span class=\"line\">            .csrf().disable();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"4-2-é…ç½®ç™»å½•è¡¨å•\"   >\n          <a href=\"#4-2-é…ç½®ç™»å½•è¡¨å•\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.2. é…ç½®ç™»å½•è¡¨å•</h3>\n      <figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.authorizeRequests()</span><br><span class=\"line\">        .formLogin()</span><br><span class=\"line\">        .loginProcessingUrl(<span class=\"string\">\"/doLogin\"</span>)</span><br><span class=\"line\">        <span class=\"comment\">// .loginPage(\"/login\") //è‡ªå®šä¹‰ç™»å½•é¡µé¢</span></span><br><span class=\"line\">        <span class=\"comment\">// .usernameParameter(\"uname\") //è‡ªå®šä¹‰å‚æ•°åç§°</span></span><br><span class=\"line\">        <span class=\"comment\">// .passwordParameter(\"password\") //</span></span><br><span class=\"line\">        <span class=\"comment\">// .successForwardUrl(\"/\") //ç™»å½•æˆåŠŸåè·³è½¬åˆ°url</span></span><br><span class=\"line\">        .permitAll()</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"4-3-ç™»å½•æˆåŠŸ-å¤±è´¥åçš„æ“ä½œ\"   >\n          <a href=\"#4-3-ç™»å½•æˆåŠŸ-å¤±è´¥åçš„æ“ä½œ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.3. ç™»å½•æˆåŠŸ\\å¤±è´¥åçš„æ“ä½œ</h3>\n      <figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.authorizeRequests()</span><br><span class=\"line\">        <span class=\"comment\">//ç™»å½•æˆåŠŸåçš„æ“ä½œ</span></span><br><span class=\"line\">        .successHandler((req, resp, authentication) -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">//authentication :ç™»å½•æˆåŠŸçš„ä¿¡æ¯</span></span><br><span class=\"line\">            PrintWriter writer = resp.getWriter();</span><br><span class=\"line\">            resp.setContentType(<span class=\"string\">\"application/json;charset=utf-8\"</span>);</span><br><span class=\"line\">            HashMap&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            map.put(<span class=\"string\">\"status\"</span>,<span class=\"number\">200</span>);</span><br><span class=\"line\">            map.put(<span class=\"string\">\"message\"</span>,authentication.getPrincipal());</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//å‘ç›¸åº”è¯·æ±‚ä¸­å†™å…¥ä¿¡æ¯</span></span><br><span class=\"line\">            writer.write(<span class=\"keyword\">new</span> ObjectMapper().writeValueAsString(map));</span><br><span class=\"line\"></span><br><span class=\"line\">            writer.flush();</span><br><span class=\"line\">            writer.close();</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// ç™»å½•å¤±è´¥åçš„æ“ä½œ</span></span><br><span class=\"line\">        .failureHandler((req, resp, e) -&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            PrintWriter writer = resp.getWriter();</span><br><span class=\"line\">            resp.setContentType(<span class=\"string\">\"application/json;charset=utf-8\"</span>);</span><br><span class=\"line\">            HashMap&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;(<span class=\"number\">10</span>);</span><br><span class=\"line\">            map.put(<span class=\"string\">\"status\"</span>,<span class=\"number\">401</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//åˆ¤æ–­å¤±è´¥çš„å¼‚å¸¸ç±»å‹</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> LockedException)&#123;</span><br><span class=\"line\">                map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"è´¦å·è¢«é”å®šï¼Œç™»é™†å¤±è´¥\"</span>);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> BadCredentialsException)&#123;</span><br><span class=\"line\">                map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"è´¦å·æˆ–å¯†ç é”™è¯¯ï¼Œç™»é™†å¤±è´¥\"</span>);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> DisabledException)&#123;</span><br><span class=\"line\">                map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"è´¦å·è¢«ç¦ç”¨ï¼Œç™»é™†å¤±è´¥\"</span>);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> AccountExpiredException)&#123;</span><br><span class=\"line\">                map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"è´¦å·è¿‡æœŸï¼Œç™»é™†å¤±è´¥\"</span>);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> CredentialsExpiredException)&#123;</span><br><span class=\"line\">                map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"å¯†ç è¿‡æœŸï¼Œç™»é™†å¤±è´¥\"</span>);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"ç™»å½•å¤±è´¥\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//å‘ç›¸åº”è¯·æ±‚ä¸­å†™å…¥ä¿¡æ¯</span></span><br><span class=\"line\">            writer.write(<span class=\"keyword\">new</span> ObjectMapper().writeValueAsString(map));</span><br><span class=\"line\"></span><br><span class=\"line\">            writer.flush();</span><br><span class=\"line\">            writer.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"4-4-é€€å‡ºç™»å½•\"   >\n          <a href=\"#4-4-é€€å‡ºç™»å½•\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.4. é€€å‡ºç™»å½•</h3>\n      <figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.authorizeRequests()</span><br><span class=\"line\">    ...</span><br><span class=\"line\">        .logout()</span><br><span class=\"line\">        .logoutUrl(<span class=\"string\">\"/logout\"</span>) <span class=\"comment\">//é€€å‡ºç™»å½•çš„è¯·æ±‚url</span></span><br><span class=\"line\">        <span class=\"comment\">//é€€å‡ºæˆåŠŸåçš„æ“ä½œ</span></span><br><span class=\"line\">        .logoutSuccessHandler((req, resp, authentication) -&gt; &#123;</span><br><span class=\"line\">            PrintWriter writer = resp.getWriter();</span><br><span class=\"line\">            HashMap&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            resp.setContentType(<span class=\"string\">\"application/json;charset=utf-8\"</span>);</span><br><span class=\"line\">            map.put(<span class=\"string\">\"status\"</span>,<span class=\"number\">200</span>);</span><br><span class=\"line\">            map.put(<span class=\"string\">\"message\"</span>,<span class=\"string\">\"æ³¨é”€æˆåŠŸ\"</span>);</span><br><span class=\"line\">            writer.write(<span class=\"keyword\">new</span> ObjectMapper().writeValueAsString(map));</span><br><span class=\"line\"></span><br><span class=\"line\">            writer.flush();</span><br><span class=\"line\">            writer.close();</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"4-5-å…³é—­csrf\"   >\n          <a href=\"#4-5-å…³é—­csrf\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.5. å…³é—­csrf</h3>\n      <p>æµ‹è¯•æ—¶ä½¿ç”¨ã€‚å…³é—­csrfæ”»å‡»çš„é¢„é˜²æ“ä½œã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.authorizeRequests()</span><br><span class=\"line\">    ...</span><br><span class=\"line\">        csrf().disable();</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"5-å¤šä¸ªHttpSecurity\"   >\n          <a href=\"#5-å¤šä¸ªHttpSecurity\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5. å¤šä¸ªHttpSecurity</h2>\n      <p>å½“å¤šä¸ªHttpSecurityæ—¶ï¼Œéœ€åœ¨ç±»ä¸Šæ·»åŠ @order(value)æ³¨è§£æ¥æ ‡æ˜ä¼˜å…ˆçº§ã€‚valueå€¼è¶Šä½ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MuitlHttpSecurityConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Configuration</span></span><br><span class=\"line\">    <span class=\"meta\">@Order</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AdminSecurity</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebSecurityConfigurerAdapter</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//            http.authorizeRequests() æ— æ•ˆï¼Ÿ</span></span><br><span class=\"line\"><span class=\"comment\">//                    .antMatchers(\"/admin/**\").hasRole(\"admin\");</span></span><br><span class=\"line\"><span class=\"comment\">//                    .antMatchers(\"user/**\").hasAnyRole(\"admin\",\"user\");</span></span><br><span class=\"line\">            http.antMatcher(<span class=\"string\">\"/admin/**\"</span>).authorizeRequests()</span><br><span class=\"line\">                    .anyRequest().hasRole(<span class=\"string\">\"admin\"</span>);</span><br><span class=\"line\"><span class=\"comment\">//                    .and()</span></span><br><span class=\"line\"><span class=\"comment\">//                    .antMatcher(\"user/**\").authorizeRequests()</span></span><br><span class=\"line\"><span class=\"comment\">//                    .anyRequest().hasAnyRole(\"admin\",\"user\");</span></span><br><span class=\"line\">            <span class=\"comment\">// æŠ¥é”™ã€‚whyï¼Ÿï¼Ÿnested exception is java.lang.IllegalStateException: Can't configure anyRequest after itself</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Configuration</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OtherSecurity</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebSecurityConfigurerAdapter</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">configure</span><span class=\"params\">(HttpSecurity http)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">            http.authorizeRequests()</span><br><span class=\"line\">                    .anyRequest().authenticated()</span><br><span class=\"line\">                    .and()</span><br><span class=\"line\">                    .formLogin().loginProcessingUrl(<span class=\"string\">\"/doLogin\"</span>)</span><br><span class=\"line\">                    .and()</span><br><span class=\"line\">                    .csrf().disable();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n","categories":["ä¸ªäººç¬”è®°","Java","SpringSecurity"],"tags":["Java","SpringBoot","SpringSecurity"]},{"title":"SpringCacheçš„ç®€å•ä½¿ç”¨","url":"/2020/06/07/SpringCache%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/","content":"\n        <h2 id=\"1-ç®€è¿°\"   >\n          <a href=\"#1-ç®€è¿°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ç®€è¿°</h2>\n      <p>&emsp;&emsp;ä¸ºå„ä¸ªç¼“å­˜æŠ€æœ¯æä¾›ä¸€ä¸ªæ¥å£è§„èŒƒã€‚<br>&emsp;&emsp;å…¶ä¸­CacheManageræ˜¯Springæä¾›çš„å„ç§ç¼“å­˜æŠ€æœ¯æŠ½è±¡æ¥å£ï¼ŒCacheæ¥å£åˆ™æä¾›ç¼“å­˜çš„ç›¸å…³æ“ä½œã€‚</p>\n<p>ğŸ”¹SpringBootä¸­çš„æ•´åˆï¼š<br>&emsp;&emsp;åœ¨Springbootä¸­åˆ™é»˜è®¤é…ç½®äº†å¤šä¸ªCacheManagerçš„å®ç°ï¼Œé»˜è®¤ä½¿ç”¨ConcurrenMapCacheManagerã€‚<br>&emsp;&emsp;è‹¥ä½¿ç”¨å¤šä¸ªCacheManagerï¼Œåˆ™å¯é€šè¿‡æ³¨å…¥å®ç°CachingConfigurerSupportæ¥å£çš„é…ç½®ç±»æ¥è®¾ç½®ã€‚</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"2-ç»“åˆRedis\"   >\n          <a href=\"#2-ç»“åˆRedis\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. ç»“åˆRedis</h2>\n      \n        <h3 id=\"2-1-é¡¹ç›®çš„åˆ›å»º\"   >\n          <a href=\"#2-1-é¡¹ç›®çš„åˆ›å»º\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. é¡¹ç›®çš„åˆ›å»º</h3>\n      <p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/cahce/20200604200643.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"cahce/20200604200643\"></p>\n\n        <h3 id=\"2-1-ä½¿ç”¨redis\"   >\n          <a href=\"#2-1-ä½¿ç”¨redis\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. ä½¿ç”¨redis</h3>\n      \n        <h4 id=\"2-1-1-åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®åŸºæœ¬ä¿¡æ¯\"   >\n          <a href=\"#2-1-1-åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®åŸºæœ¬ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.1. åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®åŸºæœ¬ä¿¡æ¯</h4>\n      <figure class=\"highlight properties\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">//redisçš„ç›¸å…³é…ç½®</span></span><br><span class=\"line\"><span class=\"meta\">spring.redis.host</span>=<span class=\"string\">106.15.72.132</span></span><br><span class=\"line\"><span class=\"meta\">spring.redis.port</span>=<span class=\"string\">6379</span></span><br><span class=\"line\"><span class=\"meta\">spring.redis.database</span>=<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"meta\">spring.redis.password</span>=<span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">//è®¾ç½®cahceåç§°</span></span><br><span class=\"line\"><span class=\"meta\">spring.cache.cache-names</span>=<span class=\"string\">c1</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"2-1-2-ä½¿ç”¨ç¼“å­˜\"   >\n          <a href=\"#2-1-2-ä½¿ç”¨ç¼“å­˜\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.2. ä½¿ç”¨ç¼“å­˜</h4>\n      <p>åœ¨å°†è¿ç”¨ç¼“å­˜çš„æ–¹æ³•æˆ–ç±»ä¸Šæ·»åŠ ç›¸åº”çš„æ³¨è§£</p>\n\n        <h4 id=\"EnableCaching\"   >\n          <a href=\"#EnableCaching\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>@EnableCaching</h4>\n      <p>åœ¨å¯åŠ¨ç±»æ³¨è§£@EnableCachingå¼€å¯ç¼“å­˜</p>\n\n        <h4 id=\"Cacheable\"   >\n          <a href=\"#Cacheable\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>@Cacheable</h4>\n      <p>æ ‡è®°å“ªä¸ªæ–¹æ³•å°†ä½¿ç”¨ç¼“å­˜ã€‚<br>é»˜è®¤æ–¹æ³•æ‰€æœ‰æ–¹æ³•ä¸ºkey,è¿”å›å€¼ä¸ºvalueã€‚</p>\n<p>ä¸»è¦å‚æ•°å¦‚ä¸‹ï¼š</p>\n<p>ğŸ”¹ cacheName<br>æŒ‡å®šç¼“å­˜åç§°</p>\n<p>ğŸ”¹ key<br>æŒ‡å®šå“ªäº›å†…å®¹ä½œä¸ºç¼“å­˜çš„keyï¼ˆé»˜è®¤ä¸ºæ–¹æ³•çš„æ‰€æœ‰å‚æ•°ï¼‰</p>\n<div class=\"table-container\"><table>\n<thead>\n<tr>\n<th>å–å€¼</th>\n<th>å«ä¹‰</th>\n<th>æ¡ˆä¾‹</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å‚æ•°å</td>\n<td>è¡¨ç¤ºæŸä¸ªå‚æ•°</td>\n<td></td>\n</tr>\n<tr>\n<td>method</td>\n<td>è¯¥æ–¹æ³•</td>\n<td>#methodã€#method.name</td>\n</tr>\n<tr>\n<td>methodName</td>\n<td>æ–¹æ³•åç§°</td>\n<td>#methodName</td>\n</tr>\n<tr>\n<td>args</td>\n<td>æ–¹æ³•å‚æ•°</td>\n<td>#argsã€#args[0]</td>\n</tr>\n<tr>\n<td>target</td>\n<td>å½“å‰è¢«è°ƒç”¨çš„class</td>\n<td>#target</td>\n</tr>\n<tr>\n<td>caches</td>\n<td>è¢«è°ƒç”¨çš„æ–¹æ³•ä½¿ç”¨çš„ç¼“å­˜</td>\n<td>#caches</td>\n</tr>\n<tr>\n<td>result</td>\n<td>æ–¹æ³•è¿”å›å€¼ï¼ˆéœ€å…ˆæ‰§è¡Œæ–¹æ³•ï¼‰</td>\n<td>#result</td>\n</tr>\n<tr>\n<td>condition</td>\n<td>ç¼“å­˜æ·»åŠ ï¼Œtrueæ—¶æ‰è¿›è¡Œç¼“å­˜,ä½¿ç”¨SpEL</td>\n<td>#userName.length()&gt;2</td>\n</tr>\n</tbody></table></div>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¡ˆä¾‹ï¼šæŒ‡å®šå‚æ•°åä¸ºidçš„å€¼ä½œä¸ºkey</span></span><br><span class=\"line\"><span class=\"meta\">@Cacheable</span>(cacheNames = <span class=\"string\">\"c1\"</span>,key = <span class=\"string\">\"#id\"</span>)</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ keyGernerator<br>è‡ªå®šä¹‰key<br>å…ˆå®šä¹‰ç±»ï¼Œå®ç°KeyGerneratoræ¥å£ï¼Œæ³¨å…¥iocå®¹å™¨ã€‚å†é€šè¿‡è¯¥æ³¨è§£æ¥æŒ‡å®šã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è‡ªå®šä¹‰å®šä¹‰key</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyKeyGernerator</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyGenerator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è®¾ç½® æ–¹æ³•å-å‚æ•°å ä¸ºkey</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> o å½“å‰è¢«è°ƒç”¨çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> method æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> objects   æ–¹æ³•å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> æ–¹æ³•å+å‚æ•°å</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">generate</span><span class=\"params\">(Object o, Method method, Object... objects)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> method.getName()+<span class=\"string\">\"-\"</span>+ Arrays.toString(objects);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æŒ‡å®šè‡ªå®šä¹‰çš„key</span></span><br><span class=\"line\"><span class=\"meta\">@Cacheable</span>(cacheNames = <span class=\"string\">\"c1\"</span>,keyGenerator = <span class=\"string\">\"myKeyGernerator\"</span>)</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"CacheEvict\"   >\n          <a href=\"#CacheEvict\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>@CacheEvict</h4>\n      <p>ç”¨äºåˆ é™¤ç¼“å­˜ã€‚</p>\n<p>ç‰¹æœ‰çš„å‚æ•°ï¼š</p>\n<div class=\"table-container\"><table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>å«ä¹‰</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>allEntries</td>\n<td>æ˜¯å¦åˆ é™¤æ‰€æœ‰ç¼“å­˜</td>\n</tr>\n<tr>\n<td>beforeInvocation</td>\n<td>æ˜¯å¦å…ˆè°ƒç”¨ï¼Œå³æ˜¯å¦å…ˆåˆ é™¤ç¼“å­˜</td>\n</tr>\n</tbody></table></div>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//æ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"meta\">@CacheEvict</span>(cacheNames = <span class=\"string\">\"c1\"</span>,allEntries = <span class=\"keyword\">false</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteUserById</span><span class=\"params\">(Integer id)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"&gt;&gt;&gt;deleteUserById()\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"CachePut\"   >\n          <a href=\"#CachePut\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>@CachePut</h4>\n      <p>ç”¨äºæ›´æ–°ç¼“å­˜ï¼Œæ›´æ–°keyå€¼ç›¸åŒçš„ç¼“å­˜</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@CachePut</span>(cacheNames = <span class=\"string\">\"c1\"</span>,key = <span class=\"string\">\"#user.id\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> User <span class=\"title\">updateUser</span><span class=\"params\">(User user)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"&gt;&gt;&gt;updateUser()\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"CacheConfig\"   >\n          <a href=\"#CacheConfig\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>@CacheConfig</h4>\n      <p>ç”¨äºç±»ä¸Šçš„æ³¨è§£ï¼Œæ·»åŠ Cacheçš„ç›¸å…³é…ç½®</p>\n<p>ç‰¹æœ‰çš„å‚æ•°ï¼š</p>\n<div class=\"table-container\"><table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>å«ä¹‰</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>cacheNames</td>\n<td>æŒ‡å®šè¯¥ç±»ä¸Šçš„ç¼“å­˜ä½¿ç”¨çš„ç¼“å­˜åç§°</td>\n</tr>\n</tbody></table></div>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@CacheConfig</span>(cacheNames = <span class=\"string\">\"c1\"</span>)</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"Caching\"   >\n          <a href=\"#Caching\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>@Caching</h4>\n      <p>å¯ç”¨äºä½¿ç”¨å¤šä¸ªæ³¨è§£,ä¸å…¶å®ƒCacheæ³¨è§£ç»“åˆä½¿ç”¨ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Caching</span>(put = &#123;</span><br><span class=\"line\">    <span class=\"meta\">@CachePut</span>(value = <span class=\"string\">\"user\"</span>, key = <span class=\"string\">\"#user.id\"</span>),</span><br><span class=\"line\">    <span class=\"meta\">@CachePut</span>(value = <span class=\"string\">\"user\"</span>, key = <span class=\"string\">\"#user.username\"</span>),</span><br><span class=\"line\">    <span class=\"meta\">@CachePut</span>(value = <span class=\"string\">\"user\"</span>, key = <span class=\"string\">\"#user.email\"</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> User <span class=\"title\">save</span><span class=\"params\">(User user)</span> </span>&#123;</span><br><span class=\"line\">    .....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n","categories":["ä¸ªäººç¬”è®°","Java","SpringCache"],"tags":["Java","SpringBoot","SpringCache","Redis"]},{"title":"axiosçš„åŸºæœ¬ä½¿ç”¨","url":"/2020/05/27/axios%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","content":"\n        <h2 id=\"1-ç®€ä»‹\"   >\n          <a href=\"#1-ç®€ä»‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ç®€ä»‹</h2>\n      <p>åŸºäºpromiseçš„å¯¹ajaxçš„ä¸€ä¸ªå°è£…<br>ajaxé€‚åˆäºmvc<br>promiseåˆ™é€‚ç”¨äºmvvm</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"2-ä½¿ç”¨\"   >\n          <a href=\"#2-ä½¿ç”¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.ä½¿ç”¨</h2>\n      \n        <h3 id=\"2-1-åŸºæœ¬å†™æ³•\"   >\n          <a href=\"#2-1-åŸºæœ¬å†™æ³•\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1 åŸºæœ¬å†™æ³•</h3>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    axios(&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        url:<span class=\"string\">\"url\"</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">        method:<span class=\"string\">'get'</span>|<span class=\"string\">'post'</span>, <span class=\"comment\">//getä¸ºé»˜è®¤æ–¹å¼</span></span></span><br><span class=\"line\"><span class=\"actionscript\">        param:&#123;--&#125;  <span class=\"comment\">// param:&#123;name:å°æ˜&#125;</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"comment\">//ç”¨è¿‡äºgetæ–¹æ³•ä¼ å‚ åŒæ·»åŠ åˆ°urlä¸­</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"comment\">//postä½¿ç”¨è¯¥å‚æ•°ï¼ŒåŒæ ·ä¹Ÿæ˜¯å°†å‚æ•°æ·»åŠ åˆ°urlä¸­</span></span></span><br><span class=\"line\"><span class=\"actionscript\">        data:&#123;--&#125;  <span class=\"comment\">//ç”¨äºpostæ–¹æ³•ä¼ å‚æ•°</span></span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(res)</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(err)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<blockquote>\n<p>postä¼ å‚æ³¨æ„ç‚¹:<br>å¸¦å‚è¯·æ±‚é»˜è®¤ä¸ºä½¿ç”¨ application/jsonã€‚<br>1.param å¯å®ç°ä¼ å‚ï¼Œä½†å‚æ•°æ·»åŠ åˆ°urlä¸­<br>2.ä½¿ç”¨axios.post(â€˜urlâ€™,â€™dataâ€™)<br>3.ä½¿ç”¨dataå‚æ•°ï¼Œåç«¯å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚å¦‚Springbootä¸­ä½¿ç”¨@requestBody,å°†jsonè½¬ä¸ºjavaå¯¹è±¡ã€‚</p>\n</blockquote>\n\n        <h3 id=\"2-2-ç®€å†™\"   >\n          <a href=\"#2-2-ç®€å†™\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2 ç®€å†™</h3>\n      \n        <h4 id=\"2-2-1-get\"   >\n          <a href=\"#2-2-1-get\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2.1 get</h4>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    axios.get(&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"string\">\"url\"</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">        &#123;params:&#123;--&#125;&#125; <span class=\"comment\">// &#123;params:&#123;name:å°æ˜&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(res)</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(err)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"2-2-2-post\"   >\n          <a href=\"#2-2-2-post\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2.2 post</h4>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    axios.post(&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"string\">\"url\"</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"string\">\"data\"</span>, <span class=\"comment\">// \"name=å°æ˜&amp;age=20\"</span></span></span><br><span class=\"line\"><span class=\"actionscript\">        &#123;data&#125;  <span class=\"comment\">// &#123;data:&#123;name:'å°æ˜'&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(res)</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(err)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"3-å‘é€å¤šä¸ªè¯·æ±‚\"   >\n          <a href=\"#3-å‘é€å¤šä¸ªè¯·æ±‚\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.å‘é€å¤šä¸ªè¯·æ±‚</h2>\n      \n        <h3 id=\"3-1-ä½¿ç”¨resæ•°ç»„è·å–å¤šä¸ªè¯·æ±‚ç»“æœ\"   >\n          <a href=\"#3-1-ä½¿ç”¨resæ•°ç»„è·å–å¤šä¸ªè¯·æ±‚ç»“æœ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1 ä½¿ç”¨resæ•°ç»„è·å–å¤šä¸ªè¯·æ±‚ç»“æœ</h3>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    axios.all(&#123;</span><br><span class=\"line\">        axios.get(--),</span><br><span class=\"line\">        axios.get(--)</span><br><span class=\"line\"><span class=\"javascript\">    &#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(res[<span class=\"number\">0</span>]+res[<span class=\"number\">1</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(err)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"3-2-ä½¿ç”¨axios-spread-è·å–å¤šä¸ªè¯·æ±‚ç»“æœ\"   >\n          <a href=\"#3-2-ä½¿ç”¨axios-spread-è·å–å¤šä¸ªè¯·æ±‚ç»“æœ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2 ä½¿ç”¨axios.spread()è·å–å¤šä¸ªè¯·æ±‚ç»“æœ</h3>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    axios.all(&#123;</span><br><span class=\"line\">        axios.get(--),</span><br><span class=\"line\">        axios.get(--)</span><br><span class=\"line\">    &#125;).then(</span><br><span class=\"line\"><span class=\"javascript\">        axios.spread(<span class=\"function\">(<span class=\"params\">res1,res2</span>)=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(res1+res2)</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"><span class=\"javascript\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(err)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"4-å…¨å±€é…ç½®\"   >\n          <a href=\"#4-å…¨å±€é…ç½®\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. å…¨å±€é…ç½®</h2>\n      <p>å¯å°†å…¬å…±æ•°æ®æå–å‡ºæ¥ï¼Œgetã€postè¯·æ±‚å†…å®¹ä¸­åˆ™æ— éœ€å†å†™è¿™äº›å…¬å…±å†…å®¹ã€‚æ¯”å¦‚æå–urlçš„å…¬å…±éƒ¨åˆ†ã€æå–è¶…æ—¶å‚æ•°ã€‚</p>\n<figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"actionscript\">    axios.defaults.baseurl=<span class=\"string\">\"http://-:8080/person\"</span>,</span></span><br><span class=\"line\">    axios.defaults.timeout=3000,</span><br><span class=\"line\"><span class=\"javascript\">    axios.get(<span class=\"string\">'getall'</span>).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123; <span class=\"comment\">// == http://-:8080/person/getall</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(res)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"javascript\">    axios.post(<span class=\"string\">'update'</span>).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123; <span class=\"comment\">// == http://-:8080/person/update</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(res)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"5-axioså®ä¾‹\"   >\n          <a href=\"#5-axioså®ä¾‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5. axioså®ä¾‹</h2>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"comment\">// å®šä¹‰</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> newVar = axios.create(&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        baseURL:<span class=\"string\">'url'</span>,</span></span><br><span class=\"line\">        timeout:5000</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"comment\">// ä½¿ç”¨</span></span></span><br><span class=\"line\">    newVar(&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        url:<span class=\"string\">'getAll'</span></span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"6-æ‹¦æˆªå™¨\"   >\n          <a href=\"#6-æ‹¦æˆªå™¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>6. æ‹¦æˆªå™¨</h2>\n      <figure class=\"highlight html\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https:unpkg.com.axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">   axios.interceptors.request.use(<span class=\"function\"><span class=\"params\">config</span>=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">       <span class=\"comment\">// è¿›å…¥å‰</span></span></span><br><span class=\"line\">   &#125;,err=&gt;&#123;</span><br><span class=\"line\"><span class=\"actionscript\">       <span class=\"comment\">// å‘ç”Ÿé”™è¯¯</span></span></span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"7-åœ¨vueä¸­è¿›è¡Œæ¨¡å—å°è£…\"   >\n          <a href=\"#7-åœ¨vueä¸­è¿›è¡Œæ¨¡å—å°è£…\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7. åœ¨vueä¸­è¿›è¡Œæ¨¡å—å°è£…</h2>\n      <p>åŸºäº import-export æ¥è¿›è¡Œå°è£…ï¼Œç±»ä¼¼å‡½æ•°å°è£…</p>\n<blockquote>\n<p>vueä¸­å®‰è£…axios:<br> npm install axios â€“save</p>\n</blockquote>\n\n        <h3 id=\"7-1-æ— è¿”å›å€¼\"   >\n          <a href=\"#7-1-æ— è¿”å›å€¼\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7.1 æ— è¿”å›å€¼</h3>\n      <p>ğŸ”¹ å°è£…å†…å®¹ (ä½ç½® : /network/request/request.js):</p>\n<figure class=\"highlight js\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios form <span class=\"string\">'axios'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">url,success,fail</span>)</span>&#123;</span><br><span class=\"line\">    axios(&#123;</span><br><span class=\"line\">        url:url</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">        success(res)</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span><br><span class=\"line\">        fail(err)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ è°ƒç”¨:</p>\n<figure class=\"highlight js\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;request&#125; form <span class=\"string\">'./network/request/request.js'</span></span><br><span class=\"line\">request(url,res=&gt;&#123;&#125;,err=&gt;&#123;&#125;)</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"7-2-è¿”å›Promiseå¯¹è±¡\"   >\n          <a href=\"#7-2-è¿”å›Promiseå¯¹è±¡\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7.2 è¿”å›Promiseå¯¹è±¡</h3>\n      <p>Promiseä¸­éœ€å£°æ˜ã€åˆ›å»ºå®ä¾‹.<br>Promiseä¸ºES6ä¸­çš„è¯­æ³•ç‚¹ï¼Œå…¶å†…å®¹ä»£æŒ‡å³å°†å‘ç”Ÿçš„äº‹ä»¶</p>\n<p>ğŸ”¹ å°è£…å†…å®¹ï¼š</p>\n<figure class=\"highlight js\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios form <span class=\"string\">'axios'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//å£°æ˜å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> newVar = axios.create(&#123;</span><br><span class=\"line\">            baseURL:<span class=\"string\">\"url\"</span>,</span><br><span class=\"line\">            timeout:<span class=\"number\">5000</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">//åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">        newVar(config).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">            resolve(res)  <span class=\"comment\">//reså°†ä½œä¸ºå‚æ•°ä¼ ç»™å›è°ƒå‡½æ•°</span></span><br><span class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span><br><span class=\"line\">            reject(err)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ è°ƒç”¨</p>\n<figure class=\"highlight js\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;request&#125; form <span class=\"string\">'./network/request/request.js'</span></span><br><span class=\"line\">request(&#123;<span class=\"attr\">url</span>:<span class=\"string\">'url'</span>&#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;&#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"7-3-è¿”å›å®ä¾‹\"   >\n          <a href=\"#7-3-è¿”å›å®ä¾‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7.3 è¿”å›å®ä¾‹</h3>\n      <p>æ–¹æ³•å†…å£°æ˜å®ä¾‹ã€‚æœ¬è´¨åŒè¿”å›Promiseå¯¹è±¡</p>\n<p>ğŸ”¹ å°è£…å†…å®¹ï¼š</p>\n<figure class=\"highlight js\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios form <span class=\"string\">'axios'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//å£°æ˜å®ä¾‹</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> newVar = axios.create(&#123;</span><br><span class=\"line\">        baseURL:<span class=\"string\">\"url\"</span>,</span><br><span class=\"line\">        timeout:<span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºå®ä¾‹å¹¶è¿”å›</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> newVar(config);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ è°ƒç”¨</p>\n<figure class=\"highlight js\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;request&#125; form <span class=\"string\">'./network/request/request.js'</span></span><br><span class=\"line\">request(&#123;<span class=\"attr\">url</span>:<span class=\"string\">'url'</span>&#125;).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;&#125;).catch(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></div></figure>","categories":["ä¸ªäººç¬”è®°","å‰ç«¯","axios"],"tags":["å‰ç«¯","axios"]},{"title":"dockerâ€”â€”Dockerfile","url":"/2020/06/18/docker%E2%80%94%E2%80%94Dockerfile/","content":"\n        <h2 id=\"1-ä»€ä¹ˆæ˜¯Dockerfile\"   >\n          <a href=\"#1-ä»€ä¹ˆæ˜¯Dockerfile\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ä»€ä¹ˆæ˜¯Dockerfile</h2>\n      <p>Dockerfileæ˜¯dockerä¸­ç”¨äºåˆ›å»ºé•œåƒçš„æ„å»ºæ–‡ä»¶ã€‚</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"2-æ„å»ºè¿‡ç¨‹\"   >\n          <a href=\"#2-æ„å»ºè¿‡ç¨‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. æ„å»ºè¿‡ç¨‹</h2>\n      <p>ğŸ”¹ ä½¿ç”¨ <b>docker build [å‚æ•°] è·¯å¾„</b>æ¥åˆ›å»º</p>\n<pre><code>-f : Dockerfileæ–‡ä»¶ (ä¸æŒ‡å®šæ—¶.é»˜è®¤ä¸ºDockerfile)\n-t : tag ç”Ÿæˆçš„é•œåƒæ–‡ä»¶å[:tag]</code></pre><p>ä½¿ç”¨Dockerfileæ¥åˆ›å»ºé•œåƒæ—¶,Dockerfileä¸­çš„å‘½ä»¤é€è¡Œè¿è¡Œ,ä¸”Dockerfileä¸­çš„æ¯ä¸€ä¸ªå‘½ä»¤éƒ½ä½œä¸ºé•œåƒçš„ä¸€å±‚ã€‚</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200618230804.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200618230804\"></p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ä½¿ç”¨Dockerfileåˆ›å»ºé•œåƒ</span></span><br><span class=\"line\">docker build -f /home/docker-demo-volume/Dockerfile -t xi/centos:1.0 .</span><br><span class=\"line\"></span><br><span class=\"line\">--------------è¾“å‡ºå†…å®¹ï¼ˆæ¯ä¸€æ¡å‘½ä»¤ä¸ºé•œåƒä¸­çš„ä¸€å±‚ï¼‰-----------------</span><br><span class=\"line\">Sending build context to Docker daemon  2.048kB</span><br><span class=\"line\">Step 1/4 : FROM centos                          // é•œåƒä¸­çš„ä¸€å±‚</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 470671670cac</span></span><br><span class=\"line\">Step 2/4 : VOLUME [\"volume01\",\"volume02\"]       // é•œåƒä¸­çš„ä¸€å±‚</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> 77c7856b6bd7</span></span><br><span class=\"line\">Removing intermediate container 77c7856b6bd7</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 2de9fb538af5</span></span><br><span class=\"line\">Step 3/4 : CMD \"==END==\"                        // é•œåƒä¸­çš„ä¸€å±‚</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> 78ae62e1984a</span></span><br><span class=\"line\">Removing intermediate container 78ae62e1984a</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 72e2c6602a30</span></span><br><span class=\"line\">Step 4/4 : CMD \"/bin/bash\"                      // é•œåƒä¸­çš„ä¸€å±‚</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> 4a98993afbac</span></span><br><span class=\"line\">Removing intermediate container 4a98993afbac</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> d00e4595f1ae</span></span><br><span class=\"line\">Successfully built d00e4595f1ae</span><br><span class=\"line\">Successfully tagged xi/centos:1.0</span><br><span class=\"line\"></span><br><span class=\"line\">---------------------------End--------------------------------</span><br></pre></td></tr></table></div></figure>\n\n<p>é€šè¿‡Dockerfileæ–‡ä»¶å¯åˆ›å»º1<del>nä¸ªé•œåƒ, 1</del>nä¸ªé•œåƒè¿è¡Œååˆ™ç»„æˆä¸€ä¸ªå®¹å™¨</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200618230850.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200618230850\"></p>\n\n        <h3 id=\"3-æŒ‡ä»¤\"   >\n          <a href=\"#3-æŒ‡ä»¤\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. æŒ‡ä»¤</h3>\n      \n        <h4 id=\"3-1-å¸¸ç”¨æŒ‡ä»¤\"   >\n          <a href=\"#3-1-å¸¸ç”¨æŒ‡ä»¤\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1. å¸¸ç”¨æŒ‡ä»¤</h4>\n      <div class=\"table-container\"><table>\n<thead>\n<tr>\n<th>æŒ‡ä»¤</th>\n<th>ä½œç”¨</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>FROM</td>\n<td>æŒ‡å®šåŸºç¡€é•œåƒ</td>\n<td></td>\n</tr>\n<tr>\n<td>MAINRAINER</td>\n<td>ç»´æŠ¤è€…ã€ä½œè€…ä¿¡æ¯</td>\n<td>å§“å&lt;é‚®ç®±&gt;</td>\n</tr>\n<tr>\n<td>RUN</td>\n<td>æ„å»ºæ—¶,æ‰€æ‰§è¡Œçš„å†…å®¹</td>\n<td></td>\n</tr>\n<tr>\n<td>ADD</td>\n<td>ç”¨äºæ·»åŠ å…¶å®ƒé•œåƒ</td>\n<td>ADD tar.gzå‹ç¼©åŒ… è§£å‹è·¯å¾„</td>\n</tr>\n<tr>\n<td>WORKDIR</td>\n<td>è¯¥é•œåƒçš„å·¥ä½œç›®å½•</td>\n<td></td>\n</tr>\n<tr>\n<td>VOLUME</td>\n<td>æŒ‚è½½çš„ç›®å½•</td>\n<td></td>\n</tr>\n<tr>\n<td>EXPOST</td>\n<td>ç«¯å£é…ç½®</td>\n<td></td>\n</tr>\n<tr>\n<td>CMD</td>\n<td>å¯åŠ¨æ—¶,æ‰§è¡Œçš„å†…å®¹ ( åªæœ‰æœ€åä¸€ä¸ªå‘½ä»¤ç”Ÿæ•ˆ )â€“å‘½ä»¤æ›¿æ¢</td>\n<td></td>\n</tr>\n<tr>\n<td>ENTRYPOINT</td>\n<td>å¯åŠ¨æ—¶,æ‰€æ‰§è¡Œçš„å†…å®¹( å‘½ä»¤éƒ½ç”Ÿæ•ˆ ) â€“ å‘½ä»¤è¿½åŠ </td>\n<td></td>\n</tr>\n<tr>\n<td>ONBUILD</td>\n<td>åœ¨é•œåƒæ„å»ºå,æ‰§è¡Œçš„å‘½ä»¤</td>\n<td></td>\n</tr>\n<tr>\n<td>COPY</td>\n<td>å°†æ–‡ä»¶å¤åˆ¶åˆ°è¯¥é•œåƒä¸­,ç±»ä¼¼ADD</td>\n<td>COPY æ–‡ä»¶ é•œåƒå†…æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>ENV</td>\n<td>è®¾ç½®ç¯å¢ƒå˜é‡</td>\n<td>ENV KEY VALUE</td>\n</tr>\n</tbody></table></div>\n\n        <h4 id=\"3-2-æ¡ˆä¾‹\"   >\n          <a href=\"#3-2-æ¡ˆä¾‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2. æ¡ˆä¾‹</h4>\n      <p>1ï¸âƒ£ ä¿®æ”¹CentOSé•œåƒ</p>\n<p>dockerä¸­CentOSä¸ºé˜‰å‰²ç‰ˆ,å»é™¤äº†è¿è¡Œæ‰€ä¸å¿…è¦çš„å†…å®¹,é»˜è®¤å·¥ä½œç›®å½•ä¸ºæ ¹ç›®å½•.<br>è¯¥æ¡ˆä¾‹åœ¨è¿™åŸºç¡€ä¸Š,ç»™å…¶æ·»åŠ ifconfigã€vimæŒ‡ä»¤å’ŒæŒ‡å®šå·¥ä½œç›®å½•.</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. ç¼–å†™Dockerfile</span></span><br><span class=\"line\">vi Dockerfile_centos</span><br><span class=\"line\">--------------------Dockerfile_centoså†…å®¹-----------------------</span><br><span class=\"line\">FROM centos                         # æŒ‡å®šcentosä¸ºåŸºç¡€é•œåƒ</span><br><span class=\"line\">MAINTAINER Jianxi&lt;123456@qq.com&gt;    # æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯</span><br><span class=\"line\"></span><br><span class=\"line\">ENV MYPATH /usr/local               # æ·»åŠ ç¯å¢ƒå‚æ•°</span><br><span class=\"line\">WORKDIR $MYPATH                     # æŒ‡å®šå·¥ä½œç›®å½• $å‚æ•°å-è·å–ç¯å¢ƒå‚æ•°</span><br><span class=\"line\"></span><br><span class=\"line\">RUN yum -y install vim              # é•œåƒåˆ›å»ºæ—¶,å®‰è£…vim</span><br><span class=\"line\">RUN yum -y install net-tools        # é•œåƒåˆ›å»ºæ—¶,å®‰è£…ç½‘ç»œæ“ä½œå‘½ä»¤,å«ifconfig</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 80                           # æŒ‡å®šè¯¥é•œåƒå¯¹å¤–å¼€æ”¾ç«¯å£80</span><br><span class=\"line\"></span><br><span class=\"line\">CMD echo $MYPATH                    # é•œåƒå¯åŠ¨æ—¶,æ‰§è¡Œè¯¥å‘½ä»¤,è¾“å‡ºMYPATHå‚æ•°çš„å€¼</span><br><span class=\"line\">CMD echo \"----End-----\"</span><br><span class=\"line\">CMD /bin/bash</span><br><span class=\"line\">------------------------------End--------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. åˆ›å»ºé•œåƒ</span></span><br><span class=\"line\">docker build -f Dockerfile_centos -t mycentos:1.0 .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  å¯åŠ¨é•œåƒ</span></span><br><span class=\"line\">docker run -it 3ff53fe7bd05</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  æ£€æŸ¥å·¥ä½œè·¯å¾„</span></span><br><span class=\"line\">pwd                         # è¾“å‡º /usr/local</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  æ£€æŸ¥ifconfigä¸vimæ˜¯å¦å­˜åœ¨ã€å¯ç”¨</span></span><br><span class=\"line\">ifconfig                    # å¯ç”¨</span><br><span class=\"line\">vim -version                # å¯ç”¨</span><br></pre></td></tr></table></div></figure>\n\n<p>2ï¸âƒ£ åˆ›å»ºTomcaté•œåƒ</p>\n<p>ä»¥centosä¸ºåŸºç¡€,é…ç½®tomcatä»¥åŠjdkç¯å¢ƒ.å¹¶ä¸”å°†tomcaté¡¹ç›®éƒ¨ç½²æ–‡ä»¶å¤¹å’Œæ—¥å¿—æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºä¸Š.</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1.ç¼–å†™Dockerfile_tomcatæ–‡ä»¶</span></span><br><span class=\"line\">vi Dockerfile_tomcat</span><br><span class=\"line\">-----------------------------Dockerfile_tomcatå†…å®¹-----------------------------</span><br><span class=\"line\">FROM centos</span><br><span class=\"line\">MAINTAINER xi&lt;123456@qq.com&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">COPY readme.txt /usr/local/readme.txt</span><br><span class=\"line\"></span><br><span class=\"line\">ADD jdk-8u251-linux-x64.tar.gz /usr/local</span><br><span class=\"line\">ADD apache-tomcat-8.5.56.tar.gz /usr/local</span><br><span class=\"line\"></span><br><span class=\"line\">RUN yum -y install vim</span><br><span class=\"line\"></span><br><span class=\"line\">ENV MYPATH /usr/local</span><br><span class=\"line\">WORKDIR $MYPATH</span><br><span class=\"line\"></span><br><span class=\"line\">ENV JAVA_HOME /usr/local/jdk1.8.0_251</span><br><span class=\"line\">ENV CLASSPATH $JAVA_HOME/lib/dt.jar;$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">ENV CATALINA_HOME /usr/local/apache-tomcat-8.5.56</span><br><span class=\"line\">ENV CATALINA_BASH /usr/local/apache-tomcat-8.5.56</span><br><span class=\"line\">ENV PATH $PATH:$JAVA_HOME/bin;$CATALINA_HOME/lib;$CATLINA_HOME/bin</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 8080</span><br><span class=\"line\"></span><br><span class=\"line\">CMD /usr/local/apache-tomcat-8.5.56/bin/startup.sh \\</span><br><span class=\"line\">&amp;&amp; tail -F /usr/local/apache-tomcat-8.5.56/bin/logs/catalina.out </span><br><span class=\"line\"></span><br><span class=\"line\">--------------------------------------End-----------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. åˆ›å»ºé•œåƒ</span></span><br><span class=\"line\">docker build -f Dockerfile_tomcat -t mytomcat:1.0 .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. å¯åŠ¨è¯¥é•œåƒçš„å®¹å™¨å¹¶æŒ‚è½½ç›®å½•</span></span><br><span class=\"line\">docker run -d -p 9090:8080 --name xitomcat \\</span><br><span class=\"line\">-v /home/docker_demo_volume/tomcat/testproject:/usr/local/apache-tomcat-8.5.56/webapps/test \\</span><br><span class=\"line\">-v /home/docker_demo_volume/tomcat/logs:/usr/local/apache-tomcat-8.5.56/logs \\</span><br><span class=\"line\">mytomcat:1.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. æµ‹è¯•,è®¿é—®åœ°å€ip:9090  <span class=\"comment\">#æ˜¾ç¤ºtomcaté¡µé¢</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. åœ¨ä¸»æœºè¢«æŒ‚è½½çš„ç›®å½•ä¸Šæ·»åŠ web.xmlå’Œindex.jsp.</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    æµ‹è¯•æŒ‚è½½ç›®å½•æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class=\"line\">docker exec -it 37c468f8eed9 /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\">cd /home/docker_demo_volume/tomcat/testproject</span><br><span class=\"line\">mkdir MEB-INF &amp;&amp; cd MEB-INF &amp;&amp; vim web.xml</span><br><span class=\"line\">------------------------------web.xml--------------------------------</span><br><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span><br><span class=\"line\">&lt;web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"</span><br><span class=\"line\">   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"</span><br><span class=\"line\">   xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"</span><br><span class=\"line\">   version=\"2.5\"&gt;</span><br><span class=\"line\">   ...</span><br><span class=\"line\">&lt;/web-app&gt;</span><br><span class=\"line\">-------------------------------End-----------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../</span><br><span class=\"line\">vim index.jsp</span><br><span class=\"line\"></span><br><span class=\"line\">------------------------------index.jsp------------------------------</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset=\"UTF-8\" /&gt;</span><br><span class=\"line\">        &lt;title&gt;docker tomcat&lt;/title&gt;</span><br><span class=\"line\">    &lt;/head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;%= new String(\"Hello!\") %&gt;</span><br><span class=\"line\">    &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br><span class=\"line\">-------------------------------End---------------------------</span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 6. æµ‹è¯•,è®¿é—®åœ°å€ip:9090/<span class=\"built_in\">test</span>  <span class=\"comment\">#æ˜¾ç¤ºHello!</span></span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"3-3-docker-historyå‘½ä»¤\"   >\n          <a href=\"#3-3-docker-historyå‘½ä»¤\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3. docker historyå‘½ä»¤</h4>\n      <p>è¯­æ³•: <b>docker history é•œåƒID</b><br>ä½œç”¨: æŸ¥çœ‹è¯¥é•œåƒåˆ›å»ºæ—¶,æŒ‡ä»¤æ‰§è¡Œçš„å†å²è®°å½•.</p>\n","categories":["ä¸ªäººç¬”è®°","Docker"],"tags":["Docker"]},{"title":"dockerâ€”â€”åŸºæœ¬å‘½ä»¤","url":"/2020/06/18/docker%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/","content":"<blockquote>\n<p>è®°å½•dockerçš„åŸºæœ¬å‘½ä»¤ï¼ŒåŒ…æ‹¬é•œåƒã€å®¹å™¨ç›¸å…³å‘½ä»¤ä»¥åŠå…¶å®ƒå¸¸ç”¨å‘½ä»¤ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200613160502.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200613160502\"></p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200618231126.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200618231126\"></p>\n<blockquote>\n<p>è¡¥å……ï¼š<br>å¯åŠ¨docker : systemctl start docker<br>dockerHub : <span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://hub.docker.com/\"  target=\"_blank\" rel=\"noopener\">https://hub.docker.com/</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n</blockquote>\n\n        <h2 id=\"1-ä¿¡æ¯\"   >\n          <a href=\"#1-ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ä¿¡æ¯</h2>\n      <p>ğŸ”¹ <b>æŸ¥çœ‹ç‰ˆæœ¬</b></p>\n<p><b>docker version</b></p>\n<p>ğŸ”¹ <b>æŸ¥çœ‹ä¿¡æ¯</b></p>\n<p><b>docker info</b></p>\n<p>ğŸ”¹ <b>å¸®åŠ©ä¿¡æ¯</b></p>\n<p><b>docker â€“help</b></p>\n<p>ğŸ”¹ <b>çŠ¶æ€ä¿¡æ¯</b></p>\n<p><b>docker stats å®¹å™¨id</b></p>\n<p><img src=\"./imgs/%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4.md/2020-06-13-11-02-32.png\" alt=\"2020-06-13-11-02-32\"></p>\n\n        <h2 id=\"2-é•œåƒ\"   >\n          <a href=\"#2-é•œåƒ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. é•œåƒ</h2>\n      <p>ğŸ”¹ <b>æŸ¥çœ‹æ‰€æœ‰</b></p>\n<p><b>docker images</b></p>\n<pre><code>-a : æ˜¾ç¤ºæ‰€æœ‰\n-q : åªæ˜¾ç¤ºid\n-f : è¿‡æ»¤</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker images -aq</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>æœç´¢</b></p>\n<p><b>docker search å…³é”®å­—</b></p>\n<pre><code>--filter : è¿‡æ»¤</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker search mysql --filter=STARS=3000</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>ä¸‹è½½</b></p>\n<p><b>docker pull é•œåƒåç§°[:tag]</b></p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker pull mysql:5.7</span><br></pre></td></tr></table></div></figure>\n\n<p>æè¿°ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">//åˆ†å±‚ä¸‹è½½ï¼Œå·²å­˜åœ¨åˆ™ä¸é‡å¤ä¸‹è½½</span><br><span class=\"line\">5.7: Pulling from library/mysql</span><br><span class=\"line\">8559a31e96f4: Already exists</span><br><span class=\"line\">d51ce1c2e575: Already exists</span><br><span class=\"line\">....</span><br><span class=\"line\">f7a5433ce20d: Pull complete</span><br><span class=\"line\">3dcd2a278b4a: Pull complete</span><br><span class=\"line\">//ç­¾å</span><br><span class=\"line\">Digest: sha256:32f9d9a069f7a735e28fd44ea....</span><br><span class=\"line\">Status: Downloaded newer image for mysql:5.7</span><br><span class=\"line\">//å®é™…åœ°å€</span><br><span class=\"line\">docker.io/library/mysql:5.7</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>åˆ é™¤</b></p>\n<p><b>docker rmi [é•œåƒåç§°â€¦|IDâ€¦]</b></p>\n<pre><code>-f,--Force : å¼ºåˆ¶åˆ é™¤</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker rmi -f 9cfcce23593a</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> åˆ é™¤æ‰€æœ‰é•œåƒ</span></span><br><span class=\"line\">docker rmi -f $(docker images -aq)</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"3-å®¹å™¨\"   >\n          <a href=\"#3-å®¹å™¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. å®¹å™¨</h2>\n      <p>ğŸ”¹ <b>å¯åŠ¨</b></p>\n<p><b>docker run [å‚æ•°] é•œåƒID|é•œåƒåç§°[:TAG]</b></p>\n<pre><code>--name=&quot;&quot; : å®¹å™¨åç§°\n-d        : ä»¥åå°çš„æ–¹å¼å¯åŠ¨\n-it       : äº¤äº’æ–¹å¼è¿è¡Œï¼ˆå¯åŠ¨å®¹å™¨åè¿›å…¥å®¹å™¨æ“ä½œï¼‰\n-p        : æŒ‡å®šç«¯å£\n    -p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\n    -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\n    -p å®¹å™¨ç«¯å£\n-P        : éšæœºç«¯å£</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -it centos /bin/bash</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> --rm ç”¨äºæµ‹è¯•ï¼Œå…³é—­å³åˆ é™¤ï¼Œdocker ps æ— è®°å½•</span></span><br><span class=\"line\">docker run -it --rm centos /bin/bash</span><br></pre></td></tr></table></div></figure>\n<blockquote>\n<p>æ³¨æ„ï¼š<br>å½“centosé•œåƒæ²¡æœ‰è¿è¡Œå†…å®¹æ—¶ï¼Œå®¹å™¨å³ä½¿æ˜¯åå°å¯åŠ¨ï¼Œä¹Ÿä¼šè¢«åœæ­¢ã€‚<br>nettyä¹Ÿæ˜¯ä¸€æ ·ã€‚</p>\n</blockquote>\n<p>ğŸ”¹ <b>é€€å‡º|åœæ­¢</b></p>\n<p><b>exit</b><br>è¯¥å‘½ä»¤å°†é€€å‡ºå®¹å™¨ç•Œé¢åŒæ—¶åœæ­¢å®¹å™¨</p>\n<p><b>å¿«æ·é”®ï¼šCtrl+p+q </b><br>ä»…é€€å‡ºå®¹å™¨ä¸åœæ­¢å®¹å™¨</p>\n<p>ğŸ”¹ <b>æŸ¥çœ‹</b></p>\n<p><b>docker ps</b></p>\n<pre><code>-a : æŸ¥çœ‹æ‰€æœ‰ï¼ˆåŒ…å«å†å²å¯åŠ¨ï¼‰\n-n=? : æ˜¾ç¤ºæœ€è¿‘çš„å®¹å™¨,eg:-n=1\n-q : åªæ˜¾ç¤ºç¼–å·</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker ps -a</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>åˆ é™¤</b></p>\n<p><b>docker rm</b></p>\n<pre><code>-f : å¼ºåˆ¶åˆ é™¤</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">//åˆ é™¤æŒ‡å®šçš„å®¹å™¨</span><br><span class=\"line\">docker rm å®¹å™¨id</span><br><span class=\"line\">//åˆ é™¤æ‰€æœ‰å®¹å™¨</span><br><span class=\"line\">docker rm -f $(docker ps -aq)</span><br><span class=\"line\">docker ps -aq | xargs docker rm -f</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>å¯åŠ¨ã€é‡å¯ã€åœæ­¢ã€æ€æ­»</b></p>\n<p><b>docker start å®¹å™¨id</b><br><b>docker stop å®¹å™¨id</b><br><b>docker restart å®¹å™¨id</b><br><b>docker kill å®¹å™¨id</b></p>\n\n        <h2 id=\"4-å¸¸ç”¨å‘½ä»¤\"   >\n          <a href=\"#4-å¸¸ç”¨å‘½ä»¤\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. å¸¸ç”¨å‘½ä»¤</h2>\n      <p>ğŸ”¹ <b>æäº¤</b></p>\n<p><b>docker commit å®¹å™¨id ç›®æ ‡é•œåƒå[:TAG]</b></p>\n<pre><code>-m  ï¼šæäº¤è¯´æ˜ä¿¡æ¯\n-a  : ä½œè€…åç§°</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker commit -m \"update tomcat\" -a \"xi\" e4e7c5efc101 my_tomcat:1.0</span><br><span class=\"line\"></span><br><span class=\"line\">//æŸ¥è¯¢æäº¤ç»“æœ</span><br><span class=\"line\">[root@iZuf6505h9bgsfqqmhomj6Z /]# docker images</span><br><span class=\"line\">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class=\"line\">my_tomcat             1.0                 398a9379c1db        54 seconds ago      652MB</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>æŸ¥çœ‹æ—¥å¿—</b></p>\n<p><b>docker logs å®¹å™¨id</b></p>\n<pre><code>-t : æ—¶é—´æˆ³\n-f : \n--tail : æ˜¾ç¤ºçš„æ•°é‡</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker logs -tf --tail 10</span><br></pre></td></tr></table></div></figure>\n\n<p>æµ‹è¯•ï¼š</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run -d centos /bin/sh -c \"while true;do echo demo_docker;sleep 1;done\"</span><br><span class=\"line\"></span><br><span class=\"line\">docker logs -tf --tail 10 99a271fc5dc5</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</b></p>\n<p><b>docker top å®¹å™¨id</b></p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker top 99a271fc5dc5</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>æŸ¥çœ‹å®¹å™¨åŸºæœ¬ä¿¡æ¯â€“å…ƒæ•°æ®</b></p>\n<p><b>docker inspect å®¹å™¨id</b></p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker inspect 99a271fc5dc5</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ <b>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</b></p>\n<p><b>æ–¹å¼ä¸€ï¼šdocker exec å®¹å™¨id</b></p>\n<pre><code>-it äº¤äº’å¼è¿è¡Œ</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker exec -it 99a271fc5dc5 /bin/bash</span><br></pre></td></tr></table></div></figure>\n\n<p><b>æ–¹å¼äºŒï¼šdocker attach å®¹å™¨id</b></p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker attach 99a271fc5dc5</span><br></pre></td></tr></table></div></figure>\n\n<blockquote>\n<p>exec : å¼€å¯æ–°ç»ˆç«¯<br>attach : è¿›å…¥æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯</p>\n</blockquote>\n<p>ğŸ”¹ <b>copyæ–‡ä»¶â€”â€”ä»å®¹å™¨åˆ°ä¸»æœº</b></p>\n<p><b>docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„ ä¸»æœºè·¯å¾„</b></p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">// å°†å®¹å™¨ä¸­/test.c æ–‡ä»¶å¤åˆ¶åˆ° ä¸»æœºçš„/test.c</span><br><span class=\"line\">docker cp 48948a693704:test.c /test.c</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ ç»™é•œåƒæ·»åŠ tag</p>\n<p><b>docker tag é•œåƒid é•œåƒåç§°:tag</b></p>\n","categories":["ä¸ªäººç¬”è®°","Docker"],"tags":["Docker"]},{"title":"dockerâ€”â€”å®¹å™¨æ•°æ®å·","url":"/2020/06/18/docker%E2%80%94%E2%80%94%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7/","content":"\n        <h2 id=\"1-ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·\"   >\n          <a href=\"#1-ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·</h2>\n      <p>dockerä¸­å®ç°æ•°æ®æŒä¹…åŒ–çš„æ–¹æ¡ˆã€‚å°†å®¹å™¨å†…çš„æ–‡ä»¶å…³è”åˆ°ä¸»æœºï¼ˆå®¿ä¸»æœºï¼‰çš„æ–‡ä»¶ï¼Œå¯å®ç°å®¹å™¨æ•°æ®æŒä¹…åŒ–ä¸åŒæ­¥æ“ä½œä»¥åŠå…±äº«æ•°æ®ã€‚</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"2-åŸºæœ¬ä½¿ç”¨ï¼ˆå®ç°æ–‡ä»¶æ˜ å°„â€“æŒ‚è½½ï¼‰\"   >\n          <a href=\"#2-åŸºæœ¬ä½¿ç”¨ï¼ˆå®ç°æ–‡ä»¶æ˜ å°„â€“æŒ‚è½½ï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. åŸºæœ¬ä½¿ç”¨ï¼ˆå®ç°æ–‡ä»¶æ˜ å°„â€“æŒ‚è½½ï¼‰</h2>\n      \n        <h3 id=\"2-1-æ–¹å¼ä¸€ï¼šä½¿ç”¨runå‘½ä»¤-v\"   >\n          <a href=\"#2-1-æ–¹å¼ä¸€ï¼šä½¿ç”¨runå‘½ä»¤-v\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. æ–¹å¼ä¸€ï¼šä½¿ç”¨runå‘½ä»¤ -v</h3>\n      <p><b>docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨ç›®å½• å®¹å™¨å</b></p>\n<p>å°†å®¹å™¨ç›®å½•æ˜ å°„åˆ°ä¸»æœºç›®å½•åï¼Œå®¹å™¨ç›®å½•å°†ä¸ä¸»æœºç›®å½•è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä»¥æ­¤å®ç°æ•°æ®åŒæ­¥ã€‚åŒæ—¶ä¸»æœºç›®å½•å†…å®¹ä¿®æ”¹ï¼Œå®¹å™¨å†…å®¹ä¹Ÿå°†å‘ç”Ÿä¿®æ”¹ï¼Œå®ç°äº†åŒå‘ç»‘å®šã€‚</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">// è®¾ç½®å®¹å™¨çš„æ˜ å°„æ–‡ä»¶</span><br><span class=\"line\">docker run -it -v /home/test:/home centos /bin/bash</span><br><span class=\"line\">// æŸ¥çœ‹æ˜ å°„ä¿¡æ¯</span><br><span class=\"line\">docker inspect 22b642f532bb</span><br><span class=\"line\"></span><br><span class=\"line\">// inspectä¸­çš„æ˜ å°„æ–‡ä»¶é…ç½®</span><br><span class=\"line\"> \"Mounts\": [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                \"Type\": \"bind\",</span><br><span class=\"line\">                \"Source\": \"/home/test\", //ä¸»æœºç›®å½•</span><br><span class=\"line\">                \"Destination\": \"/home\", //dockerå®¹å™¨ç›®å½•</span><br><span class=\"line\">                \"Mode\": \"\",</span><br><span class=\"line\">                \"RW\": true,</span><br><span class=\"line\">                \"Propagation\": \"rprivate\"</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"æ¡ˆä¾‹ï¼ˆéƒ¨ç½²mysqlï¼‰\"   >\n          <a href=\"#æ¡ˆä¾‹ï¼ˆéƒ¨ç½²mysqlï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>æ¡ˆä¾‹ï¼ˆéƒ¨ç½²mysqlï¼‰</h4>\n      <figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1.ä¸‹è½½mysql</span></span><br><span class=\"line\">docker pull mysql:5.7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2.å¯åŠ¨ã€é…ç½®mysql</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">   - æ˜ å°„ç«¯å£</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">   - æ˜ å°„æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">   - è®¾ç½®å¯†ç </span></span><br><span class=\"line\">docker run -d -p 3310:3306 \\</span><br><span class=\"line\">-v /home/mysql/conf:/etc/mysql/conf.d \\</span><br><span class=\"line\">-v /home/mysql/data:/var/lib/mysql \\</span><br><span class=\"line\">-e MYSQL_ROOT_PASSWORD=123456 \\</span><br><span class=\"line\">--name mysql01 mysql:5.7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3.æµ‹è¯•ï¼š</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> è¿œç¨‹è¿æ¥å¹¶åˆ›å»ºæ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ä¸»æœº/homeã€‚mysql/dataä¹Ÿä¼šç”Ÿæˆç°æœ‰çš„æ•°æ®åº“æ–‡ä»¶</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4.åˆ é™¤dockerä¸­çš„æ•°æ®åº“å®¹å™¨ï¼Œä¸»æœºä¸­çš„æ•°æ®åº“æ•°æ®ä»ä¼šå­˜åœ¨</span></span><br><span class=\"line\">docker rm -f fb84a9afc5f3</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-2-æ–¹å¼äºŒï¼šä½¿ç”¨DockerFile\"   >\n          <a href=\"#2-2-æ–¹å¼äºŒï¼šä½¿ç”¨DockerFile\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2. æ–¹å¼äºŒï¼šä½¿ç”¨DockerFile</h3>\n      <p>åœ¨æ–‡ä»¶ä¸­VOLUME å°†æŒ‡å®šè¯¥å®¹å™¨ä¸­å°†æŒ‚è½½çš„è·¯å¾„ï¼Œè‹¥è·¯å¾„ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚è‹¥åªå†™å®¹å™¨æŒ‚è½½çš„è·¯å¾„ï¼Œåˆ™ä¸ºåŒ¿åæŒ‚è½½ã€‚</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1.ç¼–å†™Dockerfile</span></span><br><span class=\"line\">vi Dockerfile</span><br><span class=\"line\">-----------Dockerfileå†…å®¹------------</span><br><span class=\"line\">FROM centos</span><br><span class=\"line\">VOLUME [\"volume01\",\"volume02\"]</span><br><span class=\"line\">CMD echo \"--END--\"</span><br><span class=\"line\">CMD /bin.bash</span><br><span class=\"line\">-----------------End------------------</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2.åˆ›å»ºé•œåƒ</span></span><br><span class=\"line\">docker build -f /home/docker-demo-volume/dockerfile -t xi/centos:1.0 .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3.è¿è¡Œé•œåƒå¹¶è¿›å…¥</span></span><br><span class=\"line\">docker run -it d00e4595f1ae /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4.æŸ¥çœ‹/volume01ä¸/volume02æ˜¯å¦å­˜åœ¨</span></span><br><span class=\"line\">ls</span><br><span class=\"line\">--------------------æ˜¾ç¤ºçš„å†…å®¹-------------------------</span><br><span class=\"line\">bin  dev  ......  tmp  usr  var  volume01 volume02</span><br><span class=\"line\">------------------------End---------------------------</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"3-æ•°æ®å·å‘½ä»¤-volume\"   >\n          <a href=\"#3-æ•°æ®å·å‘½ä»¤-volume\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. æ•°æ®å·å‘½ä»¤ volume</h2>\n      <p><b>docker volume </b></p>\n<pre><code>create      Create a volume\ninspect     Display detailed information on one or more volumes\nls          List volumes\nprune       Remove all unused local volumes\nrm          Remove one or more volumes</code></pre><figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker volume ls</span><br><span class=\"line\">docker volume inspect å·åç§°</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"4-å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½\"   >\n          <a href=\"#4-å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½</h2>\n      <p>å…·åæŒ‚è½½ï¼šæŒ‡å®šæŒ‚è½½çš„å·çš„åç§°<br>åŒ¿åæŒ‚è½½ï¼šä¸æŒ‡å®šåç§°ï¼Œéšæœºç”Ÿæˆå·åç§°</p>\n<p>ğŸ”¹ ä½¿ç”¨<b>docker run -v</b>æ¥å®ç°</p>\n<p>åŒ¿åæŒ‚è½½ï¼š-v å®¹å™¨è·¯å¾„<br>å…·åæŒ‚è½½ï¼š-v å·å:å®¹å™¨è·¯å¾„<br>æŒ‡å®šæŒ‚è½½è·¯å¾„ï¼š -v ä¸»æœºè·¯å¾„:å®¹å™¨è·¯å¾„</p>\n<blockquote>\n<p>è®¾ç½®å®¹å™¨å¯¹å·çš„æƒé™<br>-v ä¸»æœºè·¯å¾„|å·å : å®¹å™¨è·¯å¾„ : ro|rw<br>&emsp;ro : read only<br>&emsp;rw : read and write</p>\n</blockquote>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. åŒ¿åæŒ‚è½½nginxæ–‡ä»¶</span></span><br><span class=\"line\">docker run -d -P --name nginx01 -v /etc/nginx nginx</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> æŸ¥çœ‹å·ä¿¡æ¯</span></span><br><span class=\"line\">docker volume inspect 3780b7c7663441ad015ac22235d7522175c</span><br><span class=\"line\">5ceeb02c05433df42b263f8aa4535</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. å…·åæŒ‚è½½nginxæ–‡ä»¶</span></span><br><span class=\"line\">docker run -d -P --name nginx02 -v nginx-v:/etc/nginx nginx</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> æŸ¥çœ‹å·ä¿¡æ¯</span></span><br><span class=\"line\">docker volume inspect nginx-v</span><br><span class=\"line\"></span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        \"CreatedAt\": \"2020-06-14T00:38:57+08:00\",</span><br><span class=\"line\">        \"Driver\": \"local\",</span><br><span class=\"line\">        \"Labels\": null,</span><br><span class=\"line\">        \"Mountpoint\": \"/var/lib/docker/volumes/nginx-v/_data\",</span><br><span class=\"line\">        \"Name\": \"nginx-v\",</span><br><span class=\"line\">        \"Options\": null,</span><br><span class=\"line\">        \"Scope\": \"local\"</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></div></figure>\n\n<p>ç”±volume inspectå¯çœ‹å‡ºï¼Œå½“ä¸æŒ‡å®šä¸»æœºè·¯å¾„æ—¶ï¼Œé»˜è®¤æŒ‚è½½çš„ç›®å½•ä¸º/var/lib/docker/volumes/ä¸å·ååŒåçš„æ–‡ä»¶å¤¹/_data</p>\n\n        <h2 id=\"5-æ•°æ®å·å®¹å™¨\"   >\n          <a href=\"#5-æ•°æ®å·å®¹å™¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5. æ•°æ®å·å®¹å™¨</h2>\n      <p>å½“æŸä¸ªå®¹å™¨å­˜åœ¨æ–‡ä»¶è¢«å¤šä¸ªå®¹å™¨æŒ‚è½½æ—¶ã€‚è¯¥å®¹å™¨åˆ™ä¸ºçˆ¶å®¹å™¨ï¼Œä¹Ÿå°±ä¸ºæ•°æ®å·å®¹å™¨ã€‚ä»¥æ­¤å®ç°å¤šä¸ªå®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p>\n<p>ğŸ”¹ ä½¿ç”¨ <b>docker run â€“volumes-from </b>æ¥å®ç°</p>\n<p>â€“volume-from æŒ‚è½½çš„å®¹å™¨å</p>\n<p>ğŸ”¹ æ¡ˆä¾‹ï¼š<br>&emsp;å®ç°docker01ä½œä¸ºæ•°æ®å·å®¹å™¨ï¼Œdocker02ã€docker03æŒ‚è½½åˆ°å…¶ä¸­ã€‚</p>\n<figure class=\"highlight shell\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¼€å¯dockers01</span></span><br><span class=\"line\">docker run -it --name docker01 d00e4595f1ae /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¯åŠ¨docker02ï¼Œå¹¶æŒ‚è½½åˆ°dockers01å®¹å™¨</span></span><br><span class=\"line\">docker run -it --name docker02 --volumes-from docker01 /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¯åŠ¨docker03ï¼Œå¹¶æŒ‚è½½åˆ°docker01å®¹å™¨</span></span><br><span class=\"line\">docker run -it --name docker03 --volumes-from docker01 /bin/bash</span><br></pre></td></tr></table></div></figure>\n<blockquote>\n<p>ä»¥ä¸‹å›¾ç‰‡ä¸­çš„volume01_ä¸»æœºã€volume01ã€_volume01ã€__volume01æ–‡ä»¶å¤¹åç§°éƒ½ä¸ºvolume01,è¿™é‡Œä¸ºäº†åŒºåˆ†,è€Œæ˜¾ç¤ºä¸åŒåç§°. volume02ä¹Ÿæ˜¯ä¸€æ ·.</p>\n</blockquote>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200618231324.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200618231324\"></p>\n<p>å½“åˆ é™¤æ•°æ®å·å®¹å™¨åï¼Œå…¶å­å®¹å™¨æŒ‚è½½åœ¨çˆ¶å®¹å™¨çš„å†…å®¹ä»å­˜åœ¨ã€‚<br>å½“æ‰€æœ‰å®¹å™¨éƒ½åˆ é™¤ã€å…³é—­åï¼Œç”±äºdocker01æ•°æ®å·å®¹å™¨åœ¨å¯åŠ¨æ—¶ï¼ŒæŒ‚è½½äº†ä¸»æœºï¼Œæ‰€ä»¥å·å†…å®¹åœ¨ä¸»æœºä»æœ‰ä¿ç•™ã€‚</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200618231344.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200618231344\"></p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200618231414.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"docker/20200618231414\"></p>\n","categories":["ä¸ªäººç¬”è®°","Docker"],"tags":["Docker"]},{"title":"redisâ€”â€”åŸºæœ¬å‘½ä»¤","url":"/2020/06/18/redis%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/","content":"\n        <h2 id=\"1ã€Redisçš„ç›¸å…³linuxå‘½ä»¤\"   >\n          <a href=\"#1ã€Redisçš„ç›¸å…³linuxå‘½ä»¤\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1ã€Redisçš„ç›¸å…³linuxå‘½ä»¤</h2>\n      <ul>\n<li><p>windowï¼šè¿›å…¥Redisç›®å½•ï¼Œå¯åŠ¨Redisï¼Œè¿æ¥Redisã€‚</p>\n</li>\n<li><p>linuxï¼šå¼€å¯RedisæœåŠ¡ï¼šredis-server redis.confæ–‡ä»¶</p>\n</li>\n<li><p>è¿æ¥Rediså‘½ä»¤ï¼šredis-cli -h 127.0.0.1 -p 6379</p>\n<a id=\"more\"></a></li>\n<li><p>é€€å‡ºï¼šshutdown å†exit</p>\n</li>\n<li><p>æŸ¥çœ‹Redisçº¿ç¨‹æ˜¯å¦å¯åŠ¨</p>\n<ul>\n<li>æ–¹æ³•1ï¼šps -ef|grep redis</li>\n<li>æ–¹æ³•2ï¼šlsof -i ï¼š6379</li>\n</ul>\n</li>\n</ul>\n<p>æµ‹è¯•è¿æ¥ï¼šping</p>\n\n        <h2 id=\"2ã€å¸¸ç”¨å‘½ä»¤\"   >\n          <a href=\"#2ã€å¸¸ç”¨å‘½ä»¤\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2ã€å¸¸ç”¨å‘½ä»¤</h2>\n      <ul>\n<li>keys patternï¼ˆï¼Ÿ(1)ã€*(0-~)ã€[èŒƒå›´å§‹-èŒƒå›´æœ«]ã€\\ï¼‰<br>â€”â€”æŸ¥è¯¢key</li>\n<li>Exists key<br>â€”â€”åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</li>\n<li>del key[keyâ€¦]<br>â€”â€”åˆ é™¤keyï¼Œè¿”å›åˆ é™¤æ•°é‡</li>\n<li>move key DB<br>â€”â€”ç§»åŠ¨keyåˆ°æŸå·åº“</li>\n<li>Type key<br>â€”â€”è·å–ç±»å‹</li>\n<li>DBSize<br>â€”â€”æŸ¥çœ‹keyæ•°é‡</li>\n<li>flushDB ã€ flushAll<br>â€”â€”æ¸…é™¤æœ¬ä»“åº“ã€æ¸…é™¤æ‰€æœ‰åº“</li>\n<li>help @æŒ‡ä»¤<br>â€”â€”æŸ¥è¯¢å¸®åŠ©æ–‡æ¡£</li>\n</ul>\n\n        <h2 id=\"3ã€æ•°æ®ç±»å‹\"   >\n          <a href=\"#3ã€æ•°æ®ç±»å‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3ã€æ•°æ®ç±»å‹</h2>\n      <p><b> äº”å¤§æ•°æ®ç±»å‹ï¼šStringã€Hashã€Listã€Setã€Sorted set</b></p>\n\n        <h3 id=\"3-1-string\"   >\n          <a href=\"#3-1-string\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1 string</h3>\n      <ul>\n<li><strong>get</strong> \\ set keyâ€”â€”è·å–\\è®¾ç½®å€¼<br>å·²å­˜åœ¨åˆ™è¦†ç›–</li>\n<li><strong>mset</strong> key value[key valueâ€¦]â€”â€”è®¾ç½®å¤šä¸ªå€¼</li>\n<li><strong>mget</strong> key[keyâ€¦]â€”â€”è·å–å¤šä¸ªå€¼ </li>\n<li><strong>append</strong> key value â€”â€”åè¿½åŠ ï¼Œè¿”å›æ€»é•¿åº¦</li>\n<li><strong>strlen</strong> keyâ€”â€”è·å–é•¿åº¦</li>\n<li><strong>incr</strong> keyâ€”â€”è‡ªå¢è®¾ç½®å€¼ï¼Œä»0å¼€å§‹ï¼Œ1ä¸ºé€’å¢</li>\n<li>incrby key num â€”â€”numä¸ºé€’å¢å€¼</li>\n<li><strong>decr</strong>ã€decrby â€”â€”è‡ªå‡ã€ä¸èƒ½ä¸ºè´Ÿå€¼</li>\n<li><strong>getRange</strong> key start end â€”â€”è·å–èŒƒå›´å†…çš„å€¼ (0åˆ°-1åˆ™æ˜¯å…¨éƒ¨)</li>\n<li><strong>setRange</strong> key start valueâ€¦ â€”â€”è®¾ç½®æŸèŒƒå›´çš„å€¼</li>\n<li><strong>setex</strong> key timeoutç§’ value â€”â€”è®¾ç½®è¿‡æœŸæ—¶é—´ set with expire</li>\n<li><strong>setnx</strong> key value â€”â€”è®¾ç½®å€¼ set if not exist<br>è‹¥å·²å­˜åœ¨åˆ™ä¸ä¿®æ”¹</li>\n<li><strong>msetnx</strong> å¤šä¸ªè®¾å€¼<br>è‹¥æœ‰ä¸€ä¸ªä¸å­˜åœ¨åˆ™æ— æ³•è®¾ç½®</li>\n</ul>\n\n        <h3 id=\"3-2-ï¼ˆé‡ç‚¹ï¼‰-hash\"   >\n          <a href=\"#3-2-ï¼ˆé‡ç‚¹ï¼‰-hash\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2 ï¼ˆé‡ç‚¹ï¼‰ hash</h3>\n      <p>k-vï¼Œvä¸­ä¹Ÿä¸ºk-vï¼Œ<br>ä»¥ä¸‹region_keyè¡¨ç¤ºhashçš„keyï¼Œkeyè¡¨ç¤ºhashçš„valueä¸­çš„key</p>\n<ul>\n<li><p><b>ï¼ˆé‡ç‚¹ï¼‰è®¾ç½®ã€è·å–å€¼:</b></p>\n<ul>\n<li><strong>hset</strong> region_key key value â€”â€”è®¾ç½®åŸŸåŠå…¶å€¼</li>\n<li><strong>hmset</strong> region_key key value[key valueâ€¦]</li>\n<li><strong>hget</strong> region_key key â€”â€”è·å–å¯¹åº”åŸŸçš„å€¼</li>\n<li><strong>hmget</strong> region_key key[keyâ€¦]</li>\n<li><strong>hgetall</strong> region_key â€”â€”è·å–å¯¹åº”åŸŸçš„æ‰€æœ‰çš„keyã€value</li>\n</ul>\n</li>\n<li><p><b>ï¼ˆé‡ç‚¹ï¼‰è·å–æ‰€æœ‰çš„keyæˆ–è€…value</b></p>\n<ul>\n<li><strong>hkeys</strong> region_key â€”â€”è·å–hashä¸­æ‰€æœ‰çš„key</li>\n<li><strong>hvals</strong> region_key â€”â€”è·å–hashä¸­æ‰€æœ‰çš„value</li>\n</ul>\n</li>\n<li><p><strong>hexists</strong> region_key </p>\n</li>\n<li><p><strong>hdel</strong>ã€<strong>hlen</strong> region_key</p>\n</li>\n<li><p><b> å¢é•¿å€¼</b></p>\n<ul>\n<li><strong>hincrby</strong> region_key key å¢å€¼</li>\n<li><strong>hincrbyfloat</strong> region_key key å¢å€¼</li>\n</ul>\n</li>\n<li><p><strong>hsetnx</strong> region_key key value â€”â€”å¦‚æœä¸å­˜åœ¨åˆ™å¯æ·»åŠ ï¼ˆè¿”å›0/1ï¼Œ0å·²å­˜åœ¨ï¼Œ1ä¸å­˜åœ¨ï¼‰</p>\n</li>\n</ul>\n\n        <h3 id=\"3-3-listï¼ˆåŒå‘é“¾è¡¨ï¼‰\"   >\n          <a href=\"#3-3-listï¼ˆåŒå‘é“¾è¡¨ï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3 listï¼ˆåŒå‘é“¾è¡¨ï¼‰</h3>\n      <ul>\n<li><strong>lpush</strong> key value[valueâ€¦] â€”â€”å·¦æ·»åŠ å€¼</li>\n<li><strong>rpush</strong> key value[valueâ€¦]</li>\n<li><strong>lpop</strong> key â€”â€”å·¦åˆ é™¤ä¸€ä¸ªå€¼</li>\n<li><strong>rpop</strong> key</li>\n<li><strong>lindex</strong> key index â€”â€”è·å–æŒ‡å®šå€¼ ï¼ˆå¯ç”¨è´Ÿæ•°ã€‚-0æ•ˆæœåŒ0ï¼‰</li>\n<li><strong>llen</strong> â€”â€”è·å–é•¿åº¦</li>\n<li><strong>lrange</strong> key start end â€”â€”è·å–ç‰‡æ®µï¼ˆstartã€endå¯ä¸å­˜åœ¨ï¼Œåªæ˜¯åˆ’èŒƒå›´ï¼‰</li>\n<li><strong>lrem</strong> key count value â€”â€”åˆ é™¤nä¸ªå€¼ï¼ˆcount = 0/å…¨ã€ &gt; 0/å·¦ã€&lt; 0/å³ ï¼‰</li>\n<li><strong>ltrim</strong> key startIndex endIndex â€”â€”æˆªå–valueä¸­æŸèŒƒå›´çš„å€¼ï¼Œé‡æ–°èµ‹ç»™value<br>ï¼ˆä¸èƒ½ä½¿ç”¨è´Ÿæ•°ï¼‰</li>\n<li><strong>rpoplpush</strong> key1 key2 â€”â€”å°†key1ä¸­çš„å°¾éƒ¨å…ƒç´ æ·»åŠ åˆ°key2å€¼çš„0ä½ç½®ã€‚ </li>\n<li><strong>lset</strong> key index value â€”â€”è®¾ç½®æŸä¸ªä½ç½®çš„å€¼</li>\n<li><strong>linsert</strong> key before/after value newValue â€”â€”åœ¨æŸä¸ªå€¼å‰é¢/åé¢æ’å…¥ä¸€ä¸ªå€¼<br>ï¼ˆåªå¯¹æ·»åŠ ä¸€ä¸ªå€¼ï¼‰</li>\n</ul>\n\n        <h3 id=\"3-4-set\"   >\n          <a href=\"#3-4-set\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.4 set</h3>\n      <ul>\n<li><strong>sadd</strong> key value[valueâ€¦] â€”â€”æ·»åŠ <br>è‹¥æœ‰å·²å­˜åœ¨çš„ï¼Œä¸æŠ¥é”™ï¼ŒåªåŠ ä¸å­˜åœ¨çš„å€¼</li>\n<li><strong>srem</strong> key value[valueâ€¦] â€”â€”åˆ é™¤</li>\n<li><strong>smembers</strong> key â€”â€” è·å–æ‰€æœ‰å€¼</li>\n<li><strong>sismember</strong> key value â€”â€” æ˜¯å¦å­˜åœ¨è¯¥å€¼</li>\n<li><strong>scard</strong> key â€”â€” è·å–å€¼çš„æ•°é‡ï¼Œè·å–é•¿åº¦</li>\n<li><strong>srandmember</strong> key æ•´æ•°æ•°é‡ â€”â€”éšæœºè·å–setä¸­å‡ ä¸ªå€¼<br>  æ•´æ•°:æ— é‡å¤å€¼.è´Ÿæ•°:æœ‰å¯èƒ½å­˜åœ¨é‡å¤å€¼</li>\n<li><strong>spop</strong> key â€”â€”éšæœºå‡ºæ ˆ</li>\n<li><strong>smove</strong> key1 key2 key1ä¸­çš„å€¼ â€”â€”å°†key1ä¸­æŸä¸ªå€¼ç§»åŠ¨åˆ°key2ä¸­</li>\n<li>æ•°å­¦é›†åˆ:</li>\n</ul>\n<p>1.å·®é›† sdiff key1 key2 ï¼ˆåœ¨key1ä¸­ï¼‰<br>2.äº¤é›† sinter<br>3.å¹¶é›† sunion</p>\n\n        <h3 id=\"3-5-zsetâ€”â€”sorted-set-ï¼ˆæ•£åˆ—è¡¨ï¼‰\"   >\n          <a href=\"#3-5-zsetâ€”â€”sorted-set-ï¼ˆæ•£åˆ—è¡¨ï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.5 zsetâ€”â€”sorted set ï¼ˆæ•£åˆ—è¡¨ï¼‰</h3>\n      <p>setçš„åŸºç¡€ä¸Šï¼Œåœ¨valueå€¼ä¸­æ·»åŠ ä¸€ä¸ªscoreå€¼ï¼ˆæµ®ç‚¹å‹æ•°æ®ï¼‰ã€‚<br>setï¼škey v1 v2 v3â€¦<br>zsetï¼š key scoure1 v1 scoure2 v2â€¦</p>\n<ul>\n<li><strong>zadd</strong> key score value[score valueâ€¦] â€”â€” è®¾ç½®å€¼<br>(å€¼å”¯ä¸€ï¼Œè‹¥å€¼å­˜åœ¨åˆ™ä¿®æ”¹scoreï¼Œæœªå­˜åœ¨è¿”å›1ï¼Œå­˜åœ¨è¿”å›0)</li>\n<li><strong>zrem</strong> key value â€”â€”åˆ é™¤å€¼</li>\n<li><strong>zrangeï¼ˆ/zrevrangeï¼‰</strong> key start end ï¼ˆwithscoresï¼‰â€”â€” è·å–(/é€†å‘)ç‰‡æ®µå€¼ï¼ˆå«keyï¼‰</li>\n<li><strong>zrangeByScoreï¼ˆ/zrevâ€¦ï¼‰</strong> key startï¼ˆ/endï¼‰ endï¼ˆ/startï¼‰â€”â€” è·å–ä»¥Scoureï¼ˆ/é€†å‘ï¼‰æ’åºç‰‡æ®µå€¼</li>\n<li><strong>zRemrangeByRank</strong> key startNum endNum â€”â€”åˆ é™¤ç‰‡æ®µï¼ˆä»¥rankæ’åï¼‰</li>\n<li><strong>zRemrangeByScore</strong> key startScore endScoreâ€”â€”åˆ é™¤ç‰‡æ®µï¼ˆä»¥Scoreæ’åï¼‰<br>(Score è¡¨ç¤ºä¸åŒ…å«è¯¥score<br>limit start num<br>withscores</li>\n<li><strong>zcard</strong> key â€”â€”è·å–æ•°é‡ï¼Œscoureä¸valueä¸ºä¸€ä¸ªæ•´ä½“</li>\n<li><strong>zcount</strong> key scoureStart scoureEnd â€”â€”è·å–æŸScoureåŒºé—´çš„æ•°é‡</li>\n<li><strong>zrankï¼ˆ/zrevrankï¼‰</strong> key value â€”â€”è·å–ï¼ˆ/é€†å‘ï¼‰ä¸‹æ ‡å€¼</li>\n<li><strong>zscore</strong> key value â€”â€”è·å–å¯¹åº”çš„scoureå€¼</li>\n</ul>\n\n        <h2 id=\"4ã€ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰\"   >\n          <a href=\"#4ã€ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4ã€ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰</h2>\n      <ul>\n<li><p><strong>expire</strong> key num â€”â€”è®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰</p>\n</li>\n<li><p><strong>pexpire</strong> key num â€”â€”è®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</p>\n</li>\n<li><p><strong>TTL</strong> key â€”â€” æŸ¥çœ‹ç”Ÿæˆæ—¶é—´<br>-1ï¼šè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ</p>\n</li>\n<li><p>2ï¼šè¡¨ç¤ºå·²è¿‡æœŸï¼ˆå³å·²åˆ é™¤ï¼‰</p>\n</li>\n<li><p><strong>persist</strong> key â€”â€” åˆ é™¤ç”Ÿå­˜æ—¶é—´</p>\n</li>\n</ul>\n","categories":["ä¸ªäººç¬”è®°","æ•°æ®åº“","NoSQL","Redis"],"tags":["Redis","NoSQL"]},{"title":"redisâ€”â€”æ•°æ®ç»“æ„ï¼ˆæœªå®Œæˆï¼‰","url":"/2020/06/18/redis%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E6%9C%AA%E5%AE%8C%E6%88%90%EF%BC%89/","content":"\n        <h2 id=\"1-String\"   >\n          <a href=\"#1-String\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. String</h2>\n      \n        <h3 id=\"1-1-åº•å±‚ç»“æ„\"   >\n          <a href=\"#1-1-åº•å±‚ç»“æ„\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.1. åº•å±‚ç»“æ„</h3>\n      <p><b>SDSï¼ˆsimpled dynamic stringï¼‰ç®€å•åŠ¨æ€å­—ç¬¦ä¸²ã€‚</b></p>\n<a id=\"more\"></a>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/redis/20200618150734.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"redis/20200618150734\"></p>\n<p>bufï¼šä¸ºå­—ç¬¦æ•°ç»„ï¼Œè®°å½•stringå†…å®¹<br>freeï¼šè®°å½•å¯ç”¨çš„ç©ºé—´å¤§å°<br>lenï¼šè®°å½•å·²ç”¨çš„ç©ºé—´å¤§å°ï¼ˆä¸åŒ…å«â€™\\0â€™ï¼‰</p>\n\n        <h3 id=\"1-2-SDSç‰¹ç‚¹\"   >\n          <a href=\"#1-2-SDSç‰¹ç‚¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.2. SDSç‰¹ç‚¹</h3>\n      \n        <h4 id=\"1ï¸âƒ£-è·å–å­—ç¬¦é•¿åº¦æ–¹æ³•çš„å¤æ‚åº¦ä¸ºO-1\"   >\n          <a href=\"#1ï¸âƒ£-è·å–å­—ç¬¦é•¿åº¦æ–¹æ³•çš„å¤æ‚åº¦ä¸ºO-1\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1ï¸âƒ£ è·å–å­—ç¬¦é•¿åº¦æ–¹æ³•çš„å¤æ‚åº¦ä¸ºO(1)</h4>\n      <p>&emsp;ç”±äºSDSä¸­è®°å½•äº†å­—ç¬¦ä¸²å·²ä½¿ç”¨çš„é•¿åº¦ï¼Œä¸éœ€è¦é€šè¿‡â€™\\0â€™æ¥è®¡ç®—é•¿åº¦ï¼Œæ‰€ä»¥å¯å¿«é€Ÿè·å–ï¼Œä¸”è¯¥é•¿åº¦å¹¶ä¸è®°å½•ä¸Šâ€™\\0â€™ã€‚ä½†æ˜¯å­—ç¬¦æ•°ç»„ä¸­ä»ä¿ç•™äº†â€™\\0â€™,å…¶ç›®çš„æ˜¯ä¸ºäº†å¯é‡ç”¨Cè¯­è¨€ä¸­çš„ç›¸å…³å‡½æ•°ã€‚</p>\n\n        <h4 id=\"2ï¸âƒ£-æœç»ç¼“å†²åŒºæº¢å‡º\"   >\n          <a href=\"#2ï¸âƒ£-æœç»ç¼“å†²åŒºæº¢å‡º\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2ï¸âƒ£ æœç»ç¼“å†²åŒºæº¢å‡º</h4>\n      <p>&emsp;Cè¯­è¨€åœ¨ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥å†…å®¹æ—¶ï¼Œéœ€æ‰‹åŠ¨ä¸ºå­—ç¬¦ä¸²åˆ†é…ç›¸åº”çš„ç©ºé—´ï¼Œæ‰èƒ½ä¿è¯æ‹¼æ¥åçš„å†…å®¹ä¸æº¢å‡ºï¼Œè¿™å°±å¯¼è‡´äº†å­˜åœ¨ç¼“å†²åŒºæº¢å‡ºçš„é£é™©ã€‚<br>&emsp;SDSåœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œä¼šå…ˆé€šè¿‡freeæ¥åˆ¤æ–­ç©ºé—²çš„ç©ºé—´æ˜¯å¦è¶³å¤Ÿå­˜æ”¾æ–°å¢çš„å†…å®¹ï¼Œè‹¥ä¸å¤Ÿåˆ™ç›´æ¥è‡ªåŠ¨æ‰©å¼ ï¼Œå†ç»§ç»­æ‹¼æ¥ã€‚</p>\n\n        <h5 id=\"ğŸ’¬-SDSå†…å­˜ç©ºé—´æ‰©å±•ç­–ç•¥\"   >\n          <a href=\"#ğŸ’¬-SDSå†…å­˜ç©ºé—´æ‰©å±•ç­–ç•¥\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>ğŸ’¬ SDSå†…å­˜ç©ºé—´æ‰©å±•ç­–ç•¥</h5>\n      <p>ğŸ”¹ <b>ç©ºé—´é¢„åˆ†é…</b></p>\n<p><b>å†…å®¹æ‰©å±•æ¬¡æ•°ä¸ºnæ—¶ï¼Œç©ºé—´é‡åˆ†é…æ¬¡æ•°æœ€å¤§ä¸ºnã€‚</b></p>\n<p>&emsp;å½“å·²ä½¿ç”¨çš„å†…å®¹ <b>&lt;1MB</b>,åˆ™é¢„å…ˆæ‰©å±•lenä¸ªå†…å­˜ç©ºé—´ï¼Œå³free = lenï¼Œ<br>å…¶æ€»ç©ºé—´free+len+1<br>&emsp;å½“å·²ä½¿ç”¨çš„å†…å®¹ <b>&gt;= 1MB</b>,åˆ†é…1MBç©ºé—´,å…¶æ€»ç©ºé—´ä¸ºlen+1MB+1byte</p>\n<p>ğŸ”¹ <b>ç©ºé—´æ‡’æ€§é‡Šæ”¾</b></p>\n<p>&emsp;å½“å­—ç¬¦ä¸²å†…å®¹åˆ å‡åï¼Œç©ºé—²çš„ç©ºé—´å¹¶ä¸ä¼šé‡Šæ”¾ã€‚å¯å‡å°‘ç©ºé—´å› å­—ç¬¦ä¸²å†…å®¹æ·»åŠ è€Œè¿›è¡Œç©ºé—´é‡åˆ†é…çš„æ¬¡æ•°ã€‚<br>&emsp;åŒæ—¶ï¼Œä¸ºäº†é˜²æ­¢ç©ºé—²ç©ºé—´è¿‡å¤šå¯¼è‡´å†…å­˜ç©ºé—´æµªè´¹ã€‚redisä¸­æä¾›ç›¸åº”çš„æ–¹æ³•ç”¨äºé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚</p>\n<ul>\n<li>sdsfree é‡Šæ”¾ç©ºé—´</li>\n<li>sdsclear æ¸…é™¤ç©ºé—´å†…å®¹ï¼Œä¸é‡Šæ”¾ç©ºé—´ã€‚å¤æ‚åº¦ä¸ºO(1)</li>\n</ul>\n\n        <h4 id=\"3ï¸âƒ£-äºŒè¿›åˆ¶å®‰å…¨\"   >\n          <a href=\"#3ï¸âƒ£-äºŒè¿›åˆ¶å®‰å…¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3ï¸âƒ£ äºŒè¿›åˆ¶å®‰å…¨</h4>\n      <p>&emsp;åœ¨cè¯­è¨€ä¸­ï¼Œç”±äºä»¥â€™\\0â€™ä½œä¸ºå­—ç¬¦ä¸²ç»“æŸçš„æ ‡å¿—ï¼Œæ‰€ä»¥ä¸èƒ½å­˜å‚¨ç©ºå­—ç¬¦ï¼Œé™¤äº†å­—ç¬¦ä¸²æœ«å°¾ã€‚ä¸ºæ­¤ï¼Œcè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²å†™å…¥æ—¶éœ€è¿›è¡Œç›¸åº”çš„ç¼–ç ï¼Œè¯»å–æ—¶ä¹Ÿå°±éœ€è¦ä¸å…¶ç¼–ç ä¸€è‡´ã€‚<br>&emsp;è€Œåœ¨sdsä¸­ï¼Œç”±äºæ˜¯ä»¥lençš„å€¼æ¥é‰´å®šå­—ç¬¦ä¸²çš„ç»“æŸï¼Œæ‰€ä»¥sdsåœ¨å†™å…¥æ—¶ï¼Œå°†ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼æ¥å†™å…¥ï¼Œä¸è¿›è¡Œç›¸åº”çš„å¤„ç†æ“ä½œã€‚å†™å…¥ä»€ä¹ˆï¼Œè¯»å–åˆ°çš„å°±æ˜¯ä»€ä¹ˆã€‚</p>\n\n        <h2 id=\"2-list\"   >\n          <a href=\"#2-list\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. list</h2>\n      <p><b>éç¯çŠ¶çš„åŒå‘é“¾è¡¨</b></p>\n\n        <h3 id=\"2-1-ç‰¹ç‚¹\"   >\n          <a href=\"#2-1-ç‰¹ç‚¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. ç‰¹ç‚¹</h3>\n      <p>ğŸ”¹ åŒå‘é“¾è¡¨<br>ğŸ”¹ éç¯çŠ¶ï¼Œå¤´ç»“ç‚¹çš„headå’Œå°¾ç»“ç‚¹çš„nextæŒ‡å‘null<br>ğŸ”¹ è®°å½•é“¾è¡¨é•¿åº¦<br>ğŸ”¹ å­˜å‚¨ç±»å‹ä¸ºvoid*ï¼Œå¯å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®</p>\n\n        <h2 id=\"3-hashmap\"   >\n          <a href=\"#3-hashmap\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. hashmap</h2>\n      <p><b>å“ˆå¸Œå‡½æ•°+é“¾è¡¨</b></p>\n\n        <h3 id=\"3-1-å­—å…¸ç»“æ„\"   >\n          <a href=\"#3-1-å­—å…¸ç»“æ„\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1. å­—å…¸ç»“æ„</h3>\n      <p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/redis/20200618220747.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"redis/20200618220747\"></p>\n<p>typeç”¨äºå®ç°å­—å…¸çš„å¤šæ€åŒ–ï¼Œå¯æŒ‡å®šä¸åŒç±»å‹å­—å…¸ç›¸åº”çš„ç‰¹å®šå‡½æ•°ã€‚</p>\n<p>void* privdataä¸ºtypeæŒ‡å®šå‡½æ•°çš„å‚æ•°</p>\n<p>ht[2]:å­˜å‚¨äº†ä¸¤ä¸ªå“ˆå¸Œè¡¨çš„åœ°å€ã€‚</p>\n<p>rehashï¼šç”¨äºè¾…åŠ©rehashæ“ä½œã€‚é»˜è®¤ä¸º-1</p>\n\n        <h3 id=\"3-2-ç‰¹ç‚¹\"   >\n          <a href=\"#3-2-ç‰¹ç‚¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2. ç‰¹ç‚¹</h3>\n      \n        <h4 id=\"1ï¸âƒ£-ä»¥é“¾è¡¨æ–¹å¼å¤„ç†å“ˆå¸Œå†²çª\"   >\n          <a href=\"#1ï¸âƒ£-ä»¥é“¾è¡¨æ–¹å¼å¤„ç†å“ˆå¸Œå†²çª\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1ï¸âƒ£ ä»¥é“¾è¡¨æ–¹å¼å¤„ç†å“ˆå¸Œå†²çª</h4>\n      <p>redisä¸­çš„å­—å…¸åœ¨å¤„ç†å“ˆå¸Œå€¼å†²çªæ—¶ï¼Œæ˜¯å°†hashå€¼å†²çªçš„å†…å®¹ä»¥é“¾è¡¨çš„å½¢å¼è¿æ¥åˆ°ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“æ¥è¿›è¡Œå­˜å‚¨ã€‚</p>\n\n        <h4 id=\"2ï¸âƒ£-æ¸è¿›å¼çš„rehash\"   >\n          <a href=\"#2ï¸âƒ£-æ¸è¿›å¼çš„rehash\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2ï¸âƒ£ æ¸è¿›å¼çš„rehash</h4>\n      <p>&emsp;ç”±äºredisä¸­çš„å­—å…¸ä»¥é“¾è¡¨æ¥å­˜å‚¨hashå†²çªçš„å€¼ï¼Œæ‰€ä»¥åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå­—å…¸çš„å…ƒç´ æŸ¥æ‰¾å¤æ‚åº¦å°†ä»Oï¼ˆ1ï¼‰é€€åŒ–ä¸ºOï¼ˆnï¼‰.<br>&emsp;ä¸ºæ­¤ï¼Œå­—å…¸éœ€è¦è¿›è¡Œrehashæ“ä½œã€‚åœ¨å­—å…¸ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªåŒå€çš„hashlistç©ºé—´æ¥å®ç°rehashï¼Œåˆ†åˆ«ä¸ºht0å’Œht1ã€‚h1å……å½“ç±»ä¼¼ä¸­é—´è€…çš„è§’è‰²ï¼Œh0çš„å€¼rehashåï¼Œå­˜å‚¨åˆ°h1ä¸­ã€‚å½“h0çš„å†…å®¹ä¸ºç©ºæ—¶ï¼Œåˆ™ä½¿ç”¨ht1æ¥å–ä»£ht0ã€‚<br>&emsp;ä½†ç”±äºåŒæ—¶å¯¹ht0çš„å…¨éƒ¨å†…å®¹è¿›è¡Œrehashï¼Œéœ€æ¶ˆè€—è¾ƒé•¿çš„æ—¶é—´ï¼Œä¸”æœŸé—´å°†æ— æ³•è¿›è¡Œå­—å…¸çš„å…¶å®ƒæ“ä½œã€‚æ•…æ¼”å˜ä¸ºæ¸è¿›å¼çš„rehashã€‚<br>&emsp;æ¸è¿›å¼rehashå³åœ¨æ¯æ¬¡å­—å…¸æ“ä½œï¼Œå¯¹ht[0]å…¶ä¸­ä¸€è¡Œè¿›è¡Œrehashã€‚å¯¹äºéœ€è¦è¿›è¡Œrehashçš„è¡Œæ•°åˆ™ç”±rehashå€¼å†³å®šã€‚</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/redis/20200618222243.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"redis/20200618222243\"></p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/redis/20200618222302.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"redis/20200618222302\"></p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/redis/20200618222320.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"redis/20200618222320\"></p>\n\n        <h2 id=\"4-zset\"   >\n          <a href=\"#4-zset\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. zset</h2>\n      \n        <h3 id=\"4-1-åº•å±‚ç»“æ„\"   >\n          <a href=\"#4-1-åº•å±‚ç»“æ„\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.1. åº•å±‚ç»“æ„</h3>\n      <p>è·³è¡¨</p>\n\n        <h3 id=\"ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹-å¾…è¡¥å……\"   >\n          <a href=\"#ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹-å¾…è¡¥å……\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ å¾…è¡¥å……</h3>\n      ","categories":["ä¸ªäººç¬”è®°","æ•°æ®åº“","NoSQL","Redis"],"tags":["Redis","NoSQL"]},{"title":"validationçš„åŸºæœ¬ä½¿ç”¨","url":"/2020/05/27/validation%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","content":"\n        <h2 id=\"1ã€jaråŒ…å¼•å…¥\"   >\n          <a href=\"#1ã€jaråŒ…å¼•å…¥\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1ã€jaråŒ…å¼•å…¥</h2>\n      <figure class=\"highlight\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span><br><span class=\"line\">      &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;</span><br><span class=\"line\">      &lt;version&gt;6.0.9.Final&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></div></figure>\n<a id=\"more\"></a>\n\n        <h2 id=\"2ã€æ ¡éªŒæ³¨è§£\"   >\n          <a href=\"#2ã€æ ¡éªŒæ³¨è§£\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2ã€æ ¡éªŒæ³¨è§£</h2>\n      <p>ä¸ä»…ä»…åªæ˜¯å¯ç”¨åœ¨å®ä½“ç±»ä¸­ï¼Œä¹Ÿå¯ç”¨åœ¨ï¼ˆä½¿ç”¨äº†@Validated ï¼‰controllerã€<br>serviceçš„æ–¹æ³•å‚æ•°ï¼Œserviceæ–¹æ³•è¿”å›å€¼ã€‚<br>æ³¨è§£ä¸€èˆ¬ä¸ä¼šå¤„ç†nullæƒ…å†µã€‚</p>\n<p><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://blog.csdn.net/java_collect/article/details/85534054\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰åŸæ–‡é“¾æ¥</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<div class=\"table-container\"><table>\n<thead>\n<tr>\n<th>æ³¨è§£</th>\n<th>ä½¿ç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>@NotNull</td>\n<td>è¢«æ³¨é‡Šçš„å…ƒç´ ï¼ˆä»»ä½•å…ƒç´ ï¼‰å¿…é¡»ä¸ä¸º null, é›†åˆä¸ºç©ºä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æ²¡å•¥å®é™…æ„ä¹‰</td>\n</tr>\n<tr>\n<td>@NotEmpty</td>\n<td>ç”¨æ¥æ ¡éªŒå­—ç¬¦ä¸²ã€é›†åˆã€mapã€æ•°ç»„ä¸èƒ½ä¸ºnullæˆ–ç©º ï¼ˆå­—ç¬¦ä¸²ä¼ å…¥ç©ºæ ¼ä¹Ÿä¸å¯ä»¥ï¼‰ï¼ˆé›†åˆéœ€è‡³å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰</td>\n</tr>\n<tr>\n<td>@NotBlank</td>\n<td>åªç”¨æ¥æ ¡éªŒå­—ç¬¦ä¸²ä¸èƒ½ä¸ºnullï¼Œç©ºæ ¼ä¹Ÿæ˜¯è¢«å…è®¸çš„ ã€‚æ ¡éªŒå­—ç¬¦ä¸²æ¨èä½¿ç”¨@NotEmpty</td>\n</tr>\n<tr>\n<td>@Size(max=, min=)</td>\n<td>æŒ‡å®šçš„å­—ç¬¦ä¸²ã€é›†åˆã€mapã€æ•°ç»„é•¿åº¦å¿…é¡»åœ¨æŒ‡å®šçš„maxå’Œminå†… å…è®¸å…ƒç´ ä¸ºnullï¼Œå­—ç¬¦ä¸²å…è®¸ä¸ºç©ºæ ¼ï¼Œ==ä¸ºnullæ—¶ï¼Œä¸ç”Ÿæ•ˆã€‚==</td>\n</tr>\n<tr>\n<td>@Length(min=,max=)</td>\n<td>åªç”¨æ¥æ ¡éªŒå­—ç¬¦ä¸²ï¼Œé•¿åº¦å¿…é¡»åœ¨æŒ‡å®šçš„maxå’Œminå†… å…è®¸å…ƒç´ ä¸ºnull</td>\n</tr>\n<tr>\n<td>@Range(min=,max=)</td>\n<td>ç”¨æ¥æ ¡éªŒæ•°å­—æˆ–å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„minå’Œmaxå†…ï¼Œå­—ç¬¦ä¸²ä¼šè½¬æˆæ•°å­—è¿›è¡Œæ¯”ï¼Œå¦‚æœä¸æ˜¯æ•°å­—æ ¡éªŒä¸é€šè¿‡ï¼Œå…è®¸å…ƒç´ ä¸ºnull</td>\n</tr>\n<tr>\n<td>@Min()</td>\n<td>æ ¡éªŒæ•°å­—ï¼ˆåŒ…æ‹¬integer short long int ç­‰ï¼‰çš„æœ€å°å€¼ï¼Œä¸æ”¯æŒå°æ•°å³doubleå’Œfloatï¼Œå…è®¸å…ƒç´ ä¸ºnull</td>\n</tr>\n<tr>\n<td>@Max()</td>\n<td>æ ¡éªŒæ•°å­—ï¼ˆåŒ…æ‹¬integer short long int ç­‰ï¼‰çš„æœ€å°å€¼ï¼Œä¸æ”¯æŒå°æ•°å³doubleå’Œfloatï¼Œå…è®¸å…ƒç´ ä¸ºnull</td>\n</tr>\n<tr>\n<td>@Pattern()</td>\n<td>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå¯ç”¨æ¥æ ¡éªŒå¹´æœˆæ—¥æ ¼å¼ï¼Œæ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆregexp = â€œ^[a-zA-Z0-9\\u4e00-\\u9fa5</td>\n</tr>\n</tbody></table></div>\n<p>ğŸ”¹ ä¸å¸¸ç”¨</p>\n<figure class=\"highlight plain\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">@Null è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</span><br><span class=\"line\">@AssertTrue è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</span><br><span class=\"line\">@AssertFalse è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false</span><br><span class=\"line\">@DecimalMin(value) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</span><br><span class=\"line\">@DecimalMax(value) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</span><br><span class=\"line\">@Digits (integer, fraction) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</span><br><span class=\"line\">@Past è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</span><br><span class=\"line\">@Future è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</span><br><span class=\"line\">@Email è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"3ã€æ³¨è§£\"   >\n          <a href=\"#3ã€æ³¨è§£\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3ã€æ³¨è§£</h2>\n      \n        <h3 id=\"3-1ã€-Validated\"   >\n          <a href=\"#3-1ã€-Validated\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1ã€@Validated</h3>\n      \n        <h3 id=\"3-2ã€-RestController\"   >\n          <a href=\"#3-2ã€-RestController\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2ã€@RestController</h3>\n      \n        <h3 id=\"3-3ã€-Valid\"   >\n          <a href=\"#3-3ã€-Valid\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3ã€@Valid</h3>\n      <pre><code>æ ‡è®°éœ€éªŒè¯çš„å‚æ•°ï¼Œå¯ç”¨äºcontrollerä¸­æ–¹æ³•çš„å‚æ•°ï¼Œä¹Ÿå¯åœ¨springä¸­ï¼Œ\nå¯ç”¨äºè”çº§éªŒè¯ä¸­çš„ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€‚\nAã€ä¸€å¯¹ä¸€: ä¸€ä¸ªå¯¹è±¡ä¸­åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå±æ€§ã€‚\n    å¯¹è¿™ä¸ªå¯¹è±¡å±æ€§æ·»åŠ è¯¥æ³¨è§£ï¼Œè¿™è¯¥å¯¹è±¡ä¸­çš„éªŒè¯ä¹Ÿå¯ä½¿ç”¨ã€‚\nBã€ä¸€å¯¹å¤šï¼šä¸€ä¸ªå¯¹è±¡ä¸­åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡å®¹å™¨ä½œä¸ºå±æ€§ã€‚\n    æ³¨è§£å¯åŠ åœ¨å±æ€§ä¸Šï¼Œä¹Ÿå¯åŠ è½½listæ³›å‹å‰ã€‚</code></pre><p><img src=\"https://i.loli.net/2019/12/25/D2lnKajL7B3FWZX.png\" alt=\"title\"></p>\n\n        <h3 id=\"3-4-ExceptionHandler\"   >\n          <a href=\"#3-4-ExceptionHandler\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.4 @ExceptionHandler</h3>\n      <pre><code>åœ¨springä¸­ï¼Œæ·»åŠ è¯¥æ³¨è§£çš„æ–¹æ³•å¯å¯¹æŸå¼‚å¸¸è¿›è¡Œæ•è·ã€‚\nä¾‹å¦‚ï¼šMethodArgumentNotValidException e</code></pre><p><img src=\"https://i.loli.net/2019/12/25/DkXS72z8ymVHs9g.png\" alt=\"title\"></p>\n\n        <h2 id=\"4ã€åœ¨serviceä¸­æ·»åŠ å‚æ•°éªŒæ”¶\"   >\n          <a href=\"#4ã€åœ¨serviceä¸­æ·»åŠ å‚æ•°éªŒæ”¶\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4ã€åœ¨serviceä¸­æ·»åŠ å‚æ•°éªŒæ”¶</h2>\n      \n        <h3 id=\"4-1ã€å®ç°æ–¹æ³•\"   >\n          <a href=\"#4-1ã€å®ç°æ–¹æ³•\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.1ã€å®ç°æ–¹æ³•</h3>\n      <pre><code>åŒcontrollerã€‚åœ¨ç±»ä¸Šæ·»åŠ @Validatedï¼Œä¹‹ååœ¨éœ€è¦è¿›è¡Œå‚æ•°éªŒæ”¶\nçš„å‚æ•°å‰æ·»åŠ @Vaildã€‚</code></pre>\n        <h3 id=\"4-2ã€æ³¨æ„äº‹é¡¹\"   >\n          <a href=\"#4-2ã€æ³¨æ„äº‹é¡¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4.2ã€æ³¨æ„äº‹é¡¹</h3>\n      <pre><code>Aã€æ³¨è§£æ·»åŠ çš„ä½ç½®ã€‚\n   @Vaild     ï¼šä¸èƒ½æ·»åŠ åœ¨æ¥å£å®ç°ç±»ä¸­ï¼Œéœ€æ”¾ç½®åœ¨serviceçš„æ¥å£ç±»ä¸­ã€‚\n   @Vaildated ï¼šå¯æ·»åŠ åœ¨å®ç°ç±»æˆ–æ¥å£ç±»ä¸­ã€‚\n        æ·»åŠ åœ¨æ¥å£ç±»æ—¶ï¼Œå…¶å¯¹åº”çš„å®ç°ç±»ä¹Ÿä¼šè¿›è¡Œå‚æ•°éªŒæ”¶ã€‚\nBã€éœ€æ•è·çš„å¼‚å¸¸ä¸åŒäºcontrollerã€‚\n   å¹¶ä¸æ˜¯MethodArgumentNotValidExceptionï¼Œ\n   è€Œæ˜¯ConstraintViolationException(åŸç”Ÿæ€çš„å¼‚å¸¸)</code></pre><p><img src=\"https://i.loli.net/2019/12/25/LfBN1nYHap4oICl.png\" alt=\"title\"></p>\n\n        <h2 id=\"5ã€åˆ†ç»„éªŒæ”¶\"   >\n          <a href=\"#5ã€åˆ†ç»„éªŒæ”¶\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5ã€åˆ†ç»„éªŒæ”¶</h2>\n      <p>æ— æ³•ä½¿ç”¨äºServiceä¸­</p>\n\n        <h3 id=\"5-1ã€ä½¿ç”¨åœºæ™¯\"   >\n          <a href=\"#5-1ã€ä½¿ç”¨åœºæ™¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5.1ã€ä½¿ç”¨åœºæ™¯</h3>\n      <pre><code>å¯¹äºä¸åŒåŠŸèƒ½ï¼Œå…¶å¯¹åŒä¸€ä¸ªå®ä½“çš„éªŒè¯éœ€æ±‚ä¸åŒï¼Œåˆ™éœ€è¦ä½¿ç”¨åˆ†ç»„éªŒæ”¶ã€‚\nä¾‹å¦‚ï¼šæ·»åŠ æ–°ç”¨æˆ·æ—¶ï¼Œç”¨æˆ·idéœ€è¦ä¸ºç©ºå€¼ã€‚è€Œä¿®æ”¹ç”¨æˆ·æ—¶ï¼Œç”¨æˆ·idåˆ™ä¸èƒ½ä¸ºç©ºå€¼ã€‚</code></pre>\n        <h3 id=\"5-2ã€å®ç°\"   >\n          <a href=\"#5-2ã€å®ç°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5.2ã€å®ç°</h3>\n      <p>1ï¸âƒ£ è®¾ç½®åˆ†ç»„</p>\n<pre><code>åˆ©ç”¨å‚æ•°éªŒè¯æ³¨è§£ä¸­çš„groupså‚æ•°ã€‚\næœªè®¾ç½®åˆ†ç»„çš„å‚æ•°å±äºé»˜è®¤åˆ†ç»„</code></pre><p><img src=\"https://i.loli.net/2019/12/25/N4YIeB2XiAG7zOM.png\" alt=\"title\"></p>\n<p>2ï¸âƒ£ æŒ‡å®šåˆ†ç»„</p>\n<pre><code>ç”±äº@Validæ— æ³•å®ç°è¯¥åŠŸèƒ½ï¼Œæ•…éœ€ä½¿ç”¨@Validatedæ¥æ ‡è®°éœ€å‚æ•°éªŒæ”¶çš„å‚æ•°ã€‚\nåˆ©ç”¨@Validatedçš„valueæ¥æŒ‡å®šåˆ†ç»„ã€‚</code></pre><p><img src=\"https://i.loli.net/2019/12/25/xBirm8CySeluRdO.png\" alt=\"title\"></p>\n\n        <h2 id=\"6ã€è‡ªå®šä¹‰æ³¨è§£\"   >\n          <a href=\"#6ã€è‡ªå®šä¹‰æ³¨è§£\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>6ã€è‡ªå®šä¹‰æ³¨è§£</h2>\n      \n        <h3 id=\"6-1-å®ç°\"   >\n          <a href=\"#6-1-å®ç°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>6.1 å®ç°</h3>\n      <p><img src=\"https://i.loli.net/2019/12/25/to8ImMyNliRhbLk.png\" alt=\"title\"></p>\n<p>1ï¸âƒ£ å®ç°æ³¨è§£ï¼ˆegï¼šMultipleOfThreeï¼‰</p>\n<p><img src=\"https://i.loli.net/2019/12/25/MhaCUDuZzye8drA.png\" alt=\"title\"></p>\n<p>2ï¸âƒ£ å®ç°ä¸šåŠ¡å¤„ç†ç±»ï¼ˆå®ç° ConstrainValidatoræ¥å£ï¼‰</p>\n<p><img src=\"https://i.loli.net/2019/12/25/3ZmneUurxVYgT7t.png\" alt=\"title\"><br><img src=\"https://i.loli.net/2019/12/25/gEj84YzF1u6NJWp.png\" alt=\"title\"></p>\n\n        <h2 id=\"7ã€æ ¡éªŒListä¸­çš„å‚æ•°\"   >\n          <a href=\"#7ã€æ ¡éªŒListä¸­çš„å‚æ•°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7ã€æ ¡éªŒListä¸­çš„å‚æ•°</h2>\n      \n        <h3 id=\"7-1ã€è·å–validtor\"   >\n          <a href=\"#7-1ã€è·å–validtor\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7.1ã€è·å–validtor</h3>\n      <p>1ï¸âƒ£ è·å–validtor</p>\n<p><img src=\"https://i.loli.net/2019/12/26/nBJNFeyPDsrhQgZ.png\" alt=\"title\"></p>\n<p>2ï¸âƒ£ ä»SpringBootä¸­è·å–(åˆ›å»ºå·¥å…·ç±»è·å–ï¼Œä¸ç›´æ¥æ³¨å…¥åˆ°ä½¿ç”¨ç±»ä¸­ï¼Œå› ä¸ºValidtoréå•ä¾‹)</p>\n<p><img src=\"https://i.loli.net/2019/12/26/nISaLUHBzZmWRot.png\" alt=\"title\"></p>\n\n        <h3 id=\"7-2ã€åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£\"   >\n          <a href=\"#7-2ã€åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7.2ã€åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£</h3>\n      <p><img src=\"https://i.loli.net/2019/12/26/q58ZYX9MDJyTAiU.png\" alt=\"title\"></p>\n\n        <h3 id=\"7-3ã€åˆ›å»ºæ³¨è§£å¤„ç†ç±»\"   >\n          <a href=\"#7-3ã€åˆ›å»ºæ³¨è§£å¤„ç†ç±»\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7.3ã€åˆ›å»ºæ³¨è§£å¤„ç†ç±»</h3>\n      <p>1ï¸âƒ£ æ³¨è§£å¤„ç†ç±»</p>\n<p><img src=\"https://i.loli.net/2019/12/26/3Di65jMOXscZThI.png\" alt=\"title\"></p>\n<p>2ï¸âƒ£ è‡ªå®šä¹‰å¼‚å¸¸ç±»(ç”±äºå¤„ç†ç±»é»˜è®¤è¿”å›boolean,éœ€æ”¹æˆæŠ›å‡ºå¼‚å¸¸)</p>\n<p><img src=\"https://i.loli.net/2019/12/26/CHNldPUWcu3Mf7r.png\" alt=\"title\"></p>\n<p>3ï¸âƒ£ æ•è·è¯¥å¼‚å¸¸ç±»</p>\n<p><img src=\"https://i.loli.net/2019/12/26/nlPAOJpXVyEtmML.png\" alt=\"title\"></p>\n<p>4ï¸âƒ£ ä½¿ç”¨æ³¨è§£</p>\n<p><img src=\"https://i.loli.net/2019/12/26/PGpiIoOXDsMfxlz.png\" alt=\"title\"></p>\n\n        <h2 id=\"8ã€å‚æ•°é—´çš„é€»è¾‘æ ¡éªŒ\"   >\n          <a href=\"#8ã€å‚æ•°é—´çš„é€»è¾‘æ ¡éªŒ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>8ã€å‚æ•°é—´çš„é€»è¾‘æ ¡éªŒ</h2>\n      \n        <h3 id=\"8-1ã€å®ç°æ€è·¯ï¼ˆåˆ†ç»„åŠ¨æ€åŒ–ï¼‰\"   >\n          <a href=\"#8-1ã€å®ç°æ€è·¯ï¼ˆåˆ†ç»„åŠ¨æ€åŒ–ï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>8.1ã€å®ç°æ€è·¯ï¼ˆåˆ†ç»„åŠ¨æ€åŒ–ï¼‰</h3>\n      <p>ğŸ”¹ åˆ©ç”¨hibernate.validator ä¸­æä¾›çš„SequenceProviderâ€”â€”å¯è¿›è¡Œåˆ†ç»„çš„æ·»åŠ <br> &emsp;&emsp;é€šè¿‡SequenceProvider æ¥æ ¹æ®è¢«æ ¡éªŒçš„å¯¹è±¡çš„å±æ€§å˜åŒ–ï¼Œå¯¹æ·»åŠ åˆ†ç»„ã€‚<br><img src=\"https://i.loli.net/2019/12/26/8cwdxmS9b7NZzHo.png\" alt=\"title\"></p>\n\n        <h3 id=\"8-2ã€å®ç°æ–¹æ³•\"   >\n          <a href=\"#8-2ã€å®ç°æ–¹æ³•\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>8.2ã€å®ç°æ–¹æ³•</h3>\n      <p>1ï¸âƒ£ åˆ›å»ºSequenceProviderï¼Œåœ¨æ·»åŠ é»˜è®¤åˆ†ç»„åï¼Œè¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œä»¥æ·»åŠ ä¸åŒåˆ†ç»„ã€‚<br><img src=\"https://i.loli.net/2019/12/26/a1W9O8dNApFCqiY.png\" alt=\"title\"></p>\n<p>2ï¸âƒ£ ä½¿ç”¨SequenceProviderï¼Œåœ¨å®ä½“ç±»ä¸­ä½¿ç”¨@GroupSequenceProvider<br><img src=\"https://i.loli.net/2019/12/26/DvpoSIg1M7WtqU8.png\" alt=\"title\"></p>\n","categories":["ä¸ªäººç¬”è®°","Java","validation"],"tags":["Java","vaildation","æ•°æ®æ ¡éªŒ"]},{"title":"ä¸ªäººåšå®¢[1]â€”â€”æ­å»º","url":"/2020/05/10/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-1-%E2%80%94%E2%80%94%E6%90%AD%E5%BB%BA/","content":"<blockquote>\n<p>ç¯å¢ƒè¦æ±‚ï¼šnode.js å’Œ npm<br>åŸºäº Hexoåšå®¢æ¡†æ¶</p>\n</blockquote>\n<p><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://hexo.io/zh-cn/index.html\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰Hexoå®˜æ–¹åœ°å€</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<a id=\"more\"></a>\n\n        <h2 id=\"1-é…ç½®ç¯å¢ƒ\"   >\n          <a href=\"#1-é…ç½®ç¯å¢ƒ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. é…ç½®ç¯å¢ƒ</h2>\n      <p>å®‰è£…node.jså’Œnpm<br>ä¿®æ”¹npmçš„é•œåƒä¸ºé˜¿é‡Œé•œåƒï¼Œå³æŒ‰ç…§cnpm</p>\n<ul>\n<li><p><b>å®‰è£…cnpm</b><br>  cmdå‘½ä»¤ï¼š<br>  &emsp;&emsp;npm install -g cnpm â€“registry=<span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://registry.npm.taobao.org\"  target=\"_blank\" rel=\"noopener\">https://registry.npm.taobao.org</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span><br>  å®‰è£…æµ‹è¯•ï¼š<br>  &emsp;&emsp;cnpm -v</p>\n<p>  <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200509224340.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"20200509224340\"></p>\n</li>\n</ul>\n\n        <h2 id=\"2-å®‰è£…Hexoæ¡†æ¶\"   >\n          <a href=\"#2-å®‰è£…Hexoæ¡†æ¶\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. å®‰è£…Hexoæ¡†æ¶</h2>\n      <p>2.1. å®‰è£…ï¼šcnpm install -g hero-cli<br>   <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200509230904.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"åšå®¢/20200509230904\"></p>\n<p>2.2. éªŒè¯å®‰è£…ï¼šhexo -v<br>    <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200509230612.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"åšå®¢/20200509230612\"></p>\n\n        <h2 id=\"3-åˆå§‹åŒ–Hexoåšå®¢\"   >\n          <a href=\"#3-åˆå§‹åŒ–Hexoåšå®¢\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. åˆå§‹åŒ–Hexoåšå®¢</h2>\n      <p>3.1. åˆå§‹åŒ–hexoé¡¹ç›®ï¼šhexo init<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200509234848.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"åšå®¢/20200509234848\"></p>\n<p>3.2. å¯åŠ¨é¡¹ç›®ï¼šhexo s<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200510005009.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"åšå®¢/20200510005009\"></p>\n\n        <h2 id=\"4-æ·»åŠ ç¬¬ä¸€ç¯‡æ–‡ç« \"   >\n          <a href=\"#4-æ·»åŠ ç¬¬ä¸€ç¯‡æ–‡ç« \" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. æ·»åŠ ç¬¬ä¸€ç¯‡æ–‡ç« </h2>\n      <p><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://hexo.io/zh-cn/docs/writing\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰Hexoå®˜æ–¹:å†™ä½œ</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<ol>\n<li>åˆ›å»ºæ–°æ–‡ç« ï¼šhexo n æ–‡ä»¶å</li>\n<li>æ¸…ç†ï¼šhexo clean</li>\n<li>ç”Ÿæˆæ–‡ç« ï¼šhexo g</li>\n<li>é‡å¯ï¼šhexo s</li>\n</ol>\n\n        <h2 id=\"5-éƒ¨ç½²åˆ°GitHubä¸Š\"   >\n          <a href=\"#5-éƒ¨ç½²åˆ°GitHubä¸Š\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5. éƒ¨ç½²åˆ°GitHubä¸Š</h2>\n      <p>5.1. åˆ›å»ºgitä»“åº“,åç§°ä¸º â€œgitè´¦å·å.github.ioâ€<br>5.2. å®‰è£…githubéƒ¨ç½²æ’ä»¶ã€‚<br>    åœ¨æœ¬åœ°åšå®¢è·¯å¾„ä¸‹ï¼Œè¿è¡Œ cnpm install â€“save hexo-deployer-git<br>    <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200510010947.png?x-oss-process=image/resize,p_90/sharpen,100\" style=\"width: image/resize,p_90/sharpen,100px;\"  alt=\"åšå®¢/20200510010947\"><br>5.3. æ·»åŠ ä»“åº“ä¿¡æ¯<br>    ä¿®æ”¹_config.ymlã€‚<br>    åœ¨#deploymentèŠ‚ç‚¹ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br>    ==å†’å·åéœ€ + ç©ºæ ¼==</p>\n<pre><code><figure class=\"highlight yml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#deployment</span></span><br><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">    <span class=\"attr\">repo:</span> <span class=\"string\">ä»“åº“åœ°å€</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></div></figure></code></pre><p>5.4. éƒ¨ç½²åˆ°è¿œç«¯<br>    hexo d<br>    <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200510010628.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"åšå®¢/20200510010628\"></p>\n","categories":["ä¸ªäººåšå®¢"],"tags":["ä¸ªäººåšå®¢"]},{"title":"ä¸ªäººåšå®¢[2]â€”â€”ç¾åŒ–","url":"/2020/05/11/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-2-%E2%80%94%E2%80%94%E7%BE%8E%E5%8C%96/","content":"<blockquote>\n<p>ç¯å¢ƒè¦æ±‚ï¼šnode.js å’Œ npm<br>åŸºäº Hexoåšå®¢æ¡†æ¶<br>åŸºäº Hexoä¸»é¢˜stun</p>\n</blockquote>\n<p>ç¾åŒ–å†…å®¹ä»¥ä¸‹ï¼š<br>ğŸ”¹ ä¸»é¢˜è®¾ç½®<br>ğŸ”¹ åšå®¢ä¸»é¢˜æ ·å¼è‡ªå®šä¹‰<br>ğŸ”¹ åšå®¢æ–‡ç« æ ·å¼è‡ªå®šä¹‰</p>\n<a id=\"more\"></a>\n\n<p>æ•ˆæœå›¾ï¼š<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200510162900.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"åšå®¢/20200510162900\"></p>\n<p><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://hexo.io/zh-cn/index.html\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰Hexoå®˜æ–¹åœ°å€</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span>  <span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://liuyib.github.io/hexo-theme-stun/zh-CN/\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰Hexo-theme-stunå®˜æ–¹åœ°å€</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n\n        <h2 id=\"1-ä¿®æ”¹ä¸»é¢˜\"   >\n          <a href=\"#1-ä¿®æ”¹ä¸»é¢˜\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. ä¿®æ”¹ä¸»é¢˜</h2>\n      \n        <h3 id=\"1-1-ä¸‹è½½ä¸»é¢˜-stun\"   >\n          <a href=\"#1-1-ä¸‹è½½ä¸»é¢˜-stun\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.1. ä¸‹è½½ä¸»é¢˜(stun)</h3>\n      <p>git clone <span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://github.com/liuyib/hexo-theme-stun.git\"  target=\"_blank\" rel=\"noopener\">https://github.com/liuyib/hexo-theme-stun.git</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span> themes/stun</p>\n\n        <h3 id=\"1-2-é…ç½®ä¸»é¢˜\"   >\n          <a href=\"#1-2-é…ç½®ä¸»é¢˜\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.2. é…ç½®ä¸»é¢˜</h3>\n      <p>ä¿®æ”¹_config.yml</p>\n<pre><code><figure class=\"highlight yml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Extensions</span></span><br><span class=\"line\"><span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">yilia</span></span><br></pre></td></tr></table></div></figure></code></pre>\n        <h3 id=\"1-3-Hexoé‡è®¾ä¸å‘å¸ƒ\"   >\n          <a href=\"#1-3-Hexoé‡è®¾ä¸å‘å¸ƒ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.3. Hexoé‡è®¾ä¸å‘å¸ƒ</h3>\n      <pre><code>æ¸…é™¤ hexo clean\nåˆ›å»º hexo g\nå¯åŠ¨ hexo s\næ¨åˆ°è¿œç«¯ hexo d</code></pre>\n        <h2 id=\"2-åŸºæœ¬æ ·å¼ä¿®æ”¹\"   >\n          <a href=\"#2-åŸºæœ¬æ ·å¼ä¿®æ”¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. åŸºæœ¬æ ·å¼ä¿®æ”¹</h2>\n      <p>ä¸»é¢˜çš„ç›¸å…³è®¾ç½®è¯¦è§<span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://liuyib.github.io/hexo-theme-stun/zh-CN/guide/primary.html#%E7%BD%91%E7%AB%99%E9%A1%B6%E9%83%A8%E8%AE%BE%E7%BD%AE\"  target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£ğŸ“—</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<p>å¯ä¿®æ”¹Hexoä¸»è·¯å¾„ä¸‹çš„_config.yml,å°†ç”Ÿæ•ˆäºæ‰€æœ‰ä¸»é¢˜ã€‚<br>ä¹Ÿå¯ä¿®æ”¹hexo/theme/stunä¸‹çš„_config.xml,å°†åªç”Ÿæ•ˆäºstunä¸»é¢˜ã€‚</p>\n\n        <h3 id=\"2-1-ä¿®æ”¹åšå®¢å›¾æ ‡ç­‰å›¾ç‰‡\"   >\n          <a href=\"#2-1-ä¿®æ”¹åšå®¢å›¾æ ‡ç­‰å›¾ç‰‡\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. ä¿®æ”¹åšå®¢å›¾æ ‡ç­‰å›¾ç‰‡</h3>\n      <p>ğŸ”¹ æ–¹å¼ä¸€ï¼šè¦†ç›–åŸå›¾åƒ</p>\n<p>åœ¨Hexoä¸»è·¯å¾„ä¸‹çš„\\themes\\stun\\source\\images\\iconsä¸­ï¼Œä½¿ç”¨ç›¸åŒå¤§å°çš„å›¾ç‰‡è¦†ç›–ã€‚ä¹‹åæŸ¥çœ‹stunä¸‹çš„_config.xmlæ˜¯å¦å¼€å¯å¯¹åº”çš„åŠŸèƒ½ã€‚</p>\n<p>ğŸ”¹ æ–¹å¼äºŒï¼šè‡ªå®šä¹‰è·¯å¾„</p>\n<p>åœ¨_config.xmlç›¸åº”çš„é…ç½®ä¸‹ï¼Œè®¾ç½®å›¾ç‰‡è·¯å¾„ä¸ºè‡ªå®šä¹‰å›¾ç‰‡è·¯å¾„ï¼ˆHexoä¸‹çš„è·¯å¾„ã€å›¾åºŠä¸Šçš„è·¯å¾„ï¼‰</p>\n\n        <h3 id=\"2-2-ä¿®æ”¹ç½‘é¡µæ ·å¼\"   >\n          <a href=\"#2-2-ä¿®æ”¹ç½‘é¡µæ ·å¼\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2. ä¿®æ”¹ç½‘é¡µæ ·å¼</h3>\n      <p>ğŸ”¹ ä¿®æ”¹æ–‡ç« æ ·å¼</p>\n<p>å°†CSSæ ·å¼æ·»åŠ åˆ°stunä¸»é¢˜çš„è·¯å¾„ä¸‹çš„\\source\\css_custom\\index.stylæ–‡ä»¶å†…å³å¯ã€‚<br>å†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight css\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">// Custom styles by yourself.</span><br><span class=\"line\">// You should always modify the style here,</span><br><span class=\"line\">    <span class=\"selector-tag\">not</span> <span class=\"selector-tag\">in</span> <span class=\"selector-tag\">the</span> <span class=\"selector-tag\">source</span> <span class=\"selector-tag\">code</span>.</span><br><span class=\"line\">// Otherwise, when the theme is updated,</span><br><span class=\"line\">    <span class=\"selector-tag\">the</span> <span class=\"selector-tag\">code</span> <span class=\"selector-tag\">you</span> <span class=\"selector-tag\">modified</span> <span class=\"selector-tag\">will</span> <span class=\"selector-tag\">be</span> <span class=\"selector-tag\">overwritten</span>.</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  // modify your style here</span><br><span class=\"line\">  // eg: background-color: blue;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-tag\">h1</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">h1</span>, <span class=\"selector-tag\">h2</span>&#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"number\">#4CAF50</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ ä¿®æ”¹åšå®¢æ ·å¼</p>\n<p>ï¼ˆ1ï¼‰åœ¨stunä¸»é¢˜çš„è·¯å¾„ä¸‹çš„\\source\\cssåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œè‡ªå®šä¹‰åç§°ï¼Œåç§°å‰éœ€å¸¦â€_â€ï¼Œä¾‹å¦‚ï¼š_myCssã€‚åœ¨è¯¥åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®ä¸ªäººçš„CSSæ–‡ä»¶ã€‚<br>ï¼ˆ2ï¼‰é…ç½®CSSæ–‡ä»¶ã€‚<br>åœ¨stun\\source\\css\\index.stylæ–‡ä»¶å†…æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š<br>@import â€˜ä¸ªäººçš„CSSæ–‡ä»¶å…¨è·¯å¾„â€™<br>å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight css\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">// Variables Layer</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./_variables/index.styl'</span>;</span><br><span class=\"line\">// Mixins Layer</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./_mixins/index.styl'</span>;</span><br><span class=\"line\">// Common Layer</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./_common/index.styl'</span>;</span><br><span class=\"line\">// Custom Layer</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./_custom/index.styl'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">// MyCSS</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./_myCss/myCss.css'</span>;</span><br></pre></td></tr></table></div></figure>\n","categories":["ä¸ªäººåšå®¢"],"tags":["ä¸ªäººåšå®¢"]},{"title":"ä¸ªäººåšå®¢[3]â€”â€”å†™ä½œ","url":"/2020/05/11/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-3-%E2%80%94%E2%80%94%E5%86%99%E4%BD%9C/","content":"<blockquote>\n<p>ç¯å¢ƒè¦æ±‚ï¼šnode.js å’Œ npm<br>åŸºäº Hexoåšå®¢æ¡†æ¶<br>åŸºäº Hexoä¸»é¢˜stun</p>\n</blockquote>\n<p>æœ¬æ–‡å†…å®¹åŒ…å«ï¼š<br>ğŸ”¹ åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ–‡ç« <br>ğŸ”¹ åˆ›å»ºåˆ†ç±»ã€æ ‡ç­¾é¡µé¢<br>ğŸ”¹ åœ¨stunä¸»é¢˜å†…å¼€å¯åˆ†é¡µå’Œæ ‡ç­¾é¡µé¢</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"1-åˆ›å»º\"   >\n          <a href=\"#1-åˆ›å»º\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. åˆ›å»º</h2>\n      <p>å…·ä½“æ“ä½œè§<span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://hexo.io/zh-cn/docs/writing\"  target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£ğŸ“—</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n\n        <h3 id=\"1-1-åˆ›å»ºæ–‡ç« \"   >\n          <a href=\"#1-1-åˆ›å»ºæ–‡ç« \" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.1. åˆ›å»ºæ–‡ç« </h3>\n      <figure class=\"highlight cmd\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo n \"æ–‡ç« åç§°\"</span><br><span class=\"line\">hexo c &amp; hexo g</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"1-2-åˆ›å»ºåˆ†ç±»ã€æ ‡ç­¾é¡µé¢ï¼ˆå³åˆ›å»ºé¡µé¢ï¼‰\"   >\n          <a href=\"#1-2-åˆ›å»ºåˆ†ç±»ã€æ ‡ç­¾é¡µé¢ï¼ˆå³åˆ›å»ºé¡µé¢ï¼‰\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1.2. åˆ›å»ºåˆ†ç±»ã€æ ‡ç­¾é¡µé¢ï¼ˆå³åˆ›å»ºé¡µé¢ï¼‰</h3>\n      <p>ğŸ”¹ åˆ›å»ºåˆ†ç±»é¡µé¢</p>\n<p>åœ¨Hexoä¸»è·¯å¾„ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>\n<figure class=\"highlight cmd\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo new page categories</span><br></pre></td></tr></table></div></figure>\n\n<p>åœ¨æ–‡ç« ç¼–å†™æ—¶ï¼Œåœ¨æ–‡ç« é¡¶éƒ¨çš„Front-matteræ·»åŠ åˆ†ç±»ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight yml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">categoriesï¼š</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">åˆ†ç±»åç§°</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">ä¸‹ä¸€çº§åˆ†ç±»åç§°</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">[åŒçº§åˆ†ç±»åç§°...]</span></span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ åˆ›å»ºæ ‡ç­¾é¡µé¢</p>\n<p>ä¸åˆ›å»ºåˆ†é¡µé¡µé¢ç›¸åŒï¼Œå°†categoriesæ”¹ä¸ºtagså³å¯ã€‚<br>ä¸åŒçš„æ˜¯ï¼ŒFront-matterä¸­çš„tagsæ²¡æœ‰åˆ†çº§ã€‚</p>\n<p>ä¾‹å­ï¼š</p>\n<figure class=\"highlight yml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">'ä¸ªäººåšå®¢[1]â€”â€”æ­å»º'</span></span><br><span class=\"line\"><span class=\"attr\">date:</span> <span class=\"number\">2020</span><span class=\"number\">-05</span><span class=\"number\">-10</span> <span class=\"number\">17</span><span class=\"string\">:39:21</span></span><br><span class=\"line\"><span class=\"attr\">tags:</span></span><br><span class=\"line\">    <span class=\"string\">ä¸ªäººåšå®¢</span></span><br><span class=\"line\"><span class=\"attr\">categories:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">ä¸ªäººåšå®¢</span></span><br><span class=\"line\"><span class=\"attr\">photos:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">url</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ åœ¨stunä¸»é¢˜å†…å¼€å¯åˆ†é¡µå’Œæ ‡ç­¾é¡µé¢</p>\n<p>åœ¨stunä¸»è·¯å¾„ä¸‹çš„_config.ymlé…ç½®æ–‡ä»¶çš„menuèŠ‚ç‚¹ä¸‹æ·»åŠ é¡µé¢é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹</p>\n<figure class=\"highlight yml\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span> <span class=\"string\">||</span> <span class=\"string\">fas</span> <span class=\"string\">fa-home</span></span><br><span class=\"line\">  <span class=\"attr\">archives:</span> <span class=\"string\">/archives/</span> <span class=\"string\">||</span> <span class=\"string\">fas</span> <span class=\"string\">fa-folder-open</span></span><br><span class=\"line\">  <span class=\"attr\">categories:</span> <span class=\"string\">/categories/</span> <span class=\"string\">||</span> <span class=\"string\">fas</span> <span class=\"string\">fa-layer-group</span></span><br><span class=\"line\">  <span class=\"attr\">tags:</span> <span class=\"string\">/tags/</span> <span class=\"string\">||</span> <span class=\"string\">fas</span> <span class=\"string\">fa-tags</span></span><br><span class=\"line\">  <span class=\"comment\"># You can add a secondary menu like follow.</span></span><br><span class=\"line\">  <span class=\"comment\"># xxx1: javascript:; || fa(s|r|l|d|b) fa-xxx</span></span><br></pre></td></tr></table></div></figure>\n\n<p>æ•ˆæœå›¾ï¼š<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/%E5%8D%9A%E5%AE%A2/20200511143752.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"åšå®¢/20200511143752\"></p>\n\n        <h2 id=\"2-ä¿®æ”¹\"   >\n          <a href=\"#2-ä¿®æ”¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.ä¿®æ”¹</h2>\n      \n        <h3 id=\"2-1-ä¿®æ”¹æ–‡ç« åç§°\"   >\n          <a href=\"#2-1-ä¿®æ”¹æ–‡ç« åç§°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. ä¿®æ”¹æ–‡ç« åç§°</h3>\n      <p>&emsp;&emsp;Hexoæœªæä¾›ä¿®æ”¹æ–‡ä»¶åç§°çš„å‘½ä»¤ã€‚</p>\n<p>ğŸ”¹ è§£å†³æ–¹æ³•ï¼š</p>\n<p>&emsp;&emsp;æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯é‡æ–°åˆ›å»ºè¯¥æ–‡ç« ï¼Œå°†è¦ä¿®æ”¹æ–‡ç« è¿ç§»è¿‡å»ã€‚å•ç‹¬ä¿®æ”¹æ–‡ç« åç§°å’Œä¿®æ”¹æ–‡ç« å†…çš„Titleæ ‡ç­¾æ˜¯æ— æ•ˆçš„ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä½¿ç”¨hexo-console-renameræ’ä»¶ï¼Œåç»­ä½¿ç”¨åå†æ¥è¡¥å……ã€‚</p>\n\n        <h3 id=\"2-2-åˆ é™¤æ–‡ç« \"   >\n          <a href=\"#2-2-åˆ é™¤æ–‡ç« \" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2 åˆ é™¤æ–‡ç« </h3>\n      <p>&emsp;&emsp;åŒæ ·çš„ï¼ŒHexoæœªæä¾›åˆ é™¤æ–‡ç« çš„å‘½ä»¤ã€‚</p>\n<p>ğŸ”¹ è§£å†³æ–¹æ³•ï¼š</p>\n<p>&emsp;&emsp;åœ¨Hexoä¸»è·¯å¾„ä¸‹çš„\\source_postsæ–‡ä»¶å¤¹å†…ï¼Œæ‰‹åŠ¨åˆ é™¤æ–‡ç« æ–‡ä»¶ï¼Œä¹‹åå†é‡æ–°åˆ›å»ºåšå®¢å†…å®¹ï¼Œå³è¿è¡Œä»¥ä¸‹å‘½ä»¤</p>\n<figure class=\"highlight cmd\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo c &amp; hexo g</span><br></pre></td></tr></table></div></figure>","categories":["ä¸ªäººåšå®¢"],"tags":["ä¸ªäººåšå®¢"]},{"title":"[æ€»ç»“]CSSæ ·å¼å¤±æ•ˆçš„åŸå› ","url":"/2020/05/11/%E6%80%BB%E7%BB%93-CSS%E6%A0%B7%E5%BC%8F%E5%A4%B1%E6%95%88%E7%9A%84%E5%8E%9F%E5%9B%A0/","content":"<p>CSSæ ·å¼ç”Ÿæ•ˆï¼Œéœ€è¦æ­£ç¡®çš„è¯­æ³•ï¼Œå¹¶ä¸”å…¶æ ·å¼å†…å®¹ä¸è¢«è¦†ç›–ã€‚<br>ä»¥ä¸‹å…ˆæ€»ç»“ä¸‰ç‚¹åŸå› ï¼ˆåç»­å†è¡¥å……ï¼‰ï¼š<br>ğŸ”¹ é”™è¯¯ä½¿ç”¨å•è¡Œæ³¨é‡Š<br>ğŸ”¹ CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§è¾ƒä½<br>ğŸ”¹ Chromeæµè§ˆå™¨å­˜åœ¨CSSæ–‡ä»¶ç¼“å­˜</p>\n<a id=\"more\"></a>\n\n        <h2 id=\"1-åœ¨å¤–éƒ¨CSSä¸­ä¸èƒ½ä½¿ç”¨å•è¡Œæ³¨é‡Š\"   >\n          <a href=\"#1-åœ¨å¤–éƒ¨CSSä¸­ä¸èƒ½ä½¿ç”¨å•è¡Œæ³¨é‡Š\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. åœ¨å¤–éƒ¨CSSä¸­ä¸èƒ½ä½¿ç”¨å•è¡Œæ³¨é‡Š</h2>\n      <p>åœ¨CSSé€‰æ‹©å™¨ä¸Šä½¿ç”¨å•è¡Œæ³¨é‡Šï¼Œå°†å¯¼è‡´è¯¥æ³¨é‡Šä¸‹çš„è¿™ä¸ªCSSé€‰æ‹©å™¨é‡Œé¢çš„å†…å®¹å¤±æ•ˆã€‚<br>å¦‚ä¸‹ä»£ç æ‰€ç¤º,â€œ.post-readmore__link{}â€å°†å¤±æ•ˆ,â€œ.post-readmore__link:hover{}â€æœ‰æ•ˆï¼Œä¸ä¼šå—åˆ°å½±å“ã€‚</p>\n<figure class=\"highlight css\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">//readmore button ï¼ˆç¬¬ä¸€ä¸ªCSSé€‰æ‹©å™¨æ— æ•ˆï¼‰</span><br><span class=\"line\"><span class=\"selector-class\">.post-readmore__link</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#27ae60</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-readmore__link</span><span class=\"selector-pseudo\">:hover</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#1f7f47</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>è€Œå•è¡Œæ³¨é‡Šæ·»åŠ åœ¨CSSæ ·å¼å†…ï¼Œè¯¥CSSä»æœ‰æ•ˆ</p>\n<figure class=\"highlight css\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post-readmore__link</span>&#123;</span><br><span class=\"line\">    background-color: #27ae60; //green ï¼ˆæœ‰æ•ˆï¼‰</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>è‹¥éœ€è¦ä½¿ç”¨æ³¨é‡Šï¼Œå¯ä½¿ç”¨å¤šè¡Œæ³¨é‡Šã€‚å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight css\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* readmore button */</span></span><br><span class=\"line\"><span class=\"selector-class\">.post-readmore__link</span>&#123;</span><br><span class=\"line\">    background-color: #27ae60; //green ï¼ˆæœ‰æ•ˆï¼‰</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"2-CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§ä½äºåŸæœ‰çš„CSSé€‰æ‹©å™¨\"   >\n          <a href=\"#2-CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§ä½äºåŸæœ‰çš„CSSé€‰æ‹©å™¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§ä½äºåŸæœ‰çš„CSSé€‰æ‹©å™¨</h2>\n      \n        <h3 id=\"2-1-å½“å¤šä¸ªCSSé€‰æ‹©å™¨é€‰æ‹©ç›®æ ‡ç›¸åŒæ—¶\"   >\n          <a href=\"#2-1-å½“å¤šä¸ªCSSé€‰æ‹©å™¨é€‰æ‹©ç›®æ ‡ç›¸åŒæ—¶\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1. å½“å¤šä¸ªCSSé€‰æ‹©å™¨é€‰æ‹©ç›®æ ‡ç›¸åŒæ—¶</h3>\n      <p>ğŸ”¹ çº§åˆ«ç›¸åŒï¼ŒååŠ è½½çš„CSSé€‰æ‹©å™¨è¦†ç›–å‰CSSé€‰æ‹©å™¨ä¸­ç›¸åŒçš„æ ·å¼ã€‚<br>ğŸ”¹ çº§åˆ«ä¸åŒï¼Œé«˜çº§åˆ«CSSé€‰æ‹©å™¨è¦†ç›–ä½çº§åˆ«CSSé€‰æ‹©å™¨ä¸­ç›¸åŒçš„æ ·å¼ã€‚</p>\n\n        <h3 id=\"2-2-çº§åˆ«åˆ¤æ–­\"   >\n          <a href=\"#2-2-çº§åˆ«åˆ¤æ–­\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2. çº§åˆ«åˆ¤æ–­</h3>\n      <p>ğŸ”¹ å†…åµŒå¼CSSçº§åˆ«é«˜äºå¤–éƒ¨CSSï¼Œå¯è§†ä¸ºæœ€é«˜çº§åˆ«ã€‚</p>\n<p>ğŸ”¹ <b>#ID</b> &gt; <b>.Class</b>ã€å±æ€§é€‰æ‹©å™¨([type=â€buttonâ€])å’Œä¼ªç±»(:hover)  &gt;  <b>æ ‡ç­¾</b>ç±»å‹å’Œä¼ªå…ƒç´ (::after)<br>çº§åˆ«è®¡ç®—æ¡ˆä¾‹ï¼š<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/keng/CSS/20200511114245.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"keng/CSS/20200511114245\"><br>å›¾ç‰‡å†…å®¹æ¥æºï¼š<span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance#Specificity_2\"  target=\"_blank\" rel=\"noopener\">MDN Web Docs</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<p>ğŸ”¹ ä½¿ç”¨!importantè¦†ç›–ä»»ä½•æ ·å¼å£°æ˜</p>\n<figure class=\"highlight css\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post-readmore__link</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#27ae60</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>å¯¹äºéƒ½æ·»åŠ ï¼importantçš„æ ·å¼ï¼Œåˆ™å†ç”±å…¶é€‰æ‹©å™¨ä¼˜å…ˆçº§æ¥åˆ¤æ–­ã€‚</p>\n\n        <h2 id=\"3-chromeæµè§ˆå™¨å­˜åœ¨ç¼“å­˜\"   >\n          <a href=\"#3-chromeæµè§ˆå™¨å­˜åœ¨ç¼“å­˜\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.chromeæµè§ˆå™¨å­˜åœ¨ç¼“å­˜</h2>\n      <p>ğŸ”¹ åŸå› :<br>&emsp;&emsp;chromeæµè§ˆå™¨ä¸ºäº†æé«˜åŠ è½½æ•ˆç‡ï¼Œç¼“å­˜äº†JSã€CSSæ–‡ä»¶ï¼Œæ•…ä¿®æ”¹åçš„æ–‡ä»¶æ— æ³•ç«‹å³ç”Ÿæ•ˆã€‚</p>\n<p>ğŸ”¹ è§£å†³æ–¹æ³•ï¼š<br>æ–¹å¼ä¸€ï¼šæ¥å›åˆ‡æ¢å¼€å¯ç¼“å­˜æ¥é‡ç½®ç¼“å­˜å†…å®¹ï¼ˆä¸ä¸€å®šæœ‰æ•ˆï¼‰ã€‚<br>&emsp;&emsp;F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œè¿›å…¥Networkï¼Œåœ¨Disable cacheå‰æ‰“å‹¾âœ”ï¼Œåˆ·æ–°é¡µé¢ã€‚å†æŠŠDisable cacheå…³é—­ï¼Œå–æ¶ˆâœ”ï¼Œå†æ¬¡åˆ·æ–°é¡µé¢ã€‚</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/keng/CSS/20200511130923.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"keng/CSS/20200511130923\"></p>\n<p>æ–¹å¼äºŒï¼šæ¥å›åˆ‡æ¢å¼€å¯ç¼“å­˜æ¥é‡ç½®ç¼“å­˜å†…å®¹<br>&emsp;&emsp;F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œç„¶ååœ¨æµè§ˆå™¨çš„åˆ·æ–°æŒ‰é’®å³å‡»ï¼Œé€‰æ‹©â€œæ¸…ç©ºç¼“å­˜å¹¶ç¡¬æ€§é‡æ–°åŠ è½½â€</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/keng/CSS/20200511154213.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"keng/CSS/20200511154213\"></p>\n","categories":["è¸©å‘è®°å½•","å‰ç«¯","CSS"],"tags":["å‰ç«¯","CSS"]},{"title":"[æ€»ç»“]Gitçš„åŸºæœ¬ä½¿ç”¨","url":"/2020/05/13/%E6%80%BB%E7%BB%93-Git%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","content":"<blockquote>\n<p>Gitä½œä¸ºä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶çš„å·¥å…·,åœ¨æˆ‘ä»¬å­¦ä¹ è¿‡ç¨‹ä¸­æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä¸ä»…æ˜¯Gitä»“åº“GitHubã€Giteeï¼Œè¿˜æ˜¯åœ¨ç¼–è¾‘å™¨VSCodeï¼ŒGitåœ¨ç®¡ç†æ–‡ä»¶ã€æ§åˆ¶æ–‡ä»¶ç‰ˆæœ¬ã€å›é€€æ–‡ä»¶ã€å¤šäººåä½œã€å¹¶å‘å¼€å‘ç­‰æœ‰ç€é‡è¦çš„åœ°ä½ã€‚<br>ä»¥ä¸‹å°†å¯¹Gitçš„åŸºæœ¬ä½¿ç”¨ç»§ç»­æ€»ç»“ã€è®°å½•ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n\n        <h2 id=\"1-Gitä¸SVNçš„ç®€å•åŒºåˆ†\"   >\n          <a href=\"#1-Gitä¸SVNçš„ç®€å•åŒºåˆ†\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. Gitä¸SVNçš„ç®€å•åŒºåˆ†</h2>\n      <p>ğŸ”¹ å®ç°æ–¹å¼ä¸Š<br>&emsp;SVN : é›†ä¸­ç‰ˆæœ¬æ§åˆ¶ã€‚SVNæ‰€æ§åˆ¶çš„æ‰€æœ‰ç‰ˆæœ¬å†…å®¹å­˜å‚¨åœ¨å•ä¸€æœåŠ¡å™¨ä¸Šï¼Œæœ¬åœ°ç”¨æˆ·åœ¨æœªè”ç½‘çš„æƒ…å†µä¸‹ï¼Œåªèƒ½çœ‹åˆ°æ‰€åŒæ­¥çš„ç‰ˆæœ¬å†…å®¹ã€‚<br>&emsp;Git : åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ã€‚ä¸åŒäºSVNï¼Œæœ¬åœ°çš„æ¯ä¸ªæœ¬åœ°ç”¨æˆ·éƒ½èƒ½è·å–åˆ°æ‰€æœ‰ç‰ˆæœ¬å†…å®¹ï¼Œä¸”Commitæ“ä½œæ˜¯åœ¨ç”¨æˆ·æœ¬åœ°è¿›ï¼Œä¹‹åå†pushåˆ°è¿œç«¯ä»“åº“ã€‚<br>&emsp;Gitç›¸æ¯”SVNï¼Œç©ºé—´æˆæœ¬å¢åŠ äº†ï¼Œä¸”å®‰å…¨æ€§ä¹Ÿæœ‰æ‰€ä¸‹é™ï¼Œä½†ä¹Ÿå‡å°‘äº†æ•°æ®æŸå¤±è€Œæ— æ³•æ¢å¤çš„é£é™©ã€‚</p>\n<p>ğŸ”¹ å…‹éš†å¤šåˆ†æ”¯é¡¹ç›®<br>&emsp;SVNå…‹éš†æ‰€æœ‰åˆ†æ”¯çš„å†…å®¹<br>&emsp;Gitå…‹éš†masteråˆ†æ”¯,å…¶å®ƒåˆ†æ”¯åªè·å–ç›¸å…³å…ƒç´ ï¼ŒèŠ‚çœäº†æ—¶é—´ã€‚</p>\n\n        <h2 id=\"2-Gitçš„åŸºæœ¬ä½¿ç”¨\"   >\n          <a href=\"#2-Gitçš„åŸºæœ¬ä½¿ç”¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. Gitçš„åŸºæœ¬ä½¿ç”¨</h2>\n      \n        <h3 id=\"2-1-é…ç½®ä¿¡æ¯\"   >\n          <a href=\"#2-1-é…ç½®ä¿¡æ¯\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1 é…ç½®ä¿¡æ¯</h3>\n      <p>ğŸ”¹ è·å–é…ç½®ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–å…¨éƒ¨é…ç½®ä¿¡æ¯</span></span><br><span class=\"line\">git config -l</span><br><span class=\"line\"><span class=\"comment\">// è·å–ç³»ç»Ÿçº§åˆ«é…ç½®ä¿¡æ¯ï¼Œå¯¹åº” \\gitä¸»ç›®å½•\\etc\\gitconfig</span></span><br><span class=\"line\">git config --system -l</span><br><span class=\"line\"><span class=\"comment\">// è·å–ç”¨æˆ·(å…¨å±€)çº§åˆ«çš„é…ç½®ä¿¡æ¯ï¼Œå¯¹åº” \\user\\Administrator\\.gitconfig</span></span><br><span class=\"line\">git config --<span class=\"keyword\">global</span> -l</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ é…ç½®å…¨å±€çš„ç”¨æˆ·ä¿¡æ¯</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --<span class=\"keyword\">global</span> user.name <span class=\"string\">\"ç”¨æˆ·å\"</span></span><br><span class=\"line\">git config --<span class=\"keyword\">global</span> user.email é‚®ç®±</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"2-2-æ“ä½œä»“åº“å†…å®¹\"   >\n          <a href=\"#2-2-æ“ä½œä»“åº“å†…å®¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2 æ“ä½œä»“åº“å†…å®¹</h3>\n      <p>ğŸ”¹ åˆå§‹åŒ–æœ¬åœ°ä»“åº“</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æ·»åŠ åˆ°ç¼“å­˜å¹¶æäº¤åˆ°æœ¬åœ°ä»“åº“</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"keyword\">add</span> .  </span><br><span class=\"line\">git commit -m <span class=\"string\">\"æ³¨é‡Š\\æäº¤çš„è¯´æ˜ä¿¡æ¯\"</span></span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æäº¤åˆ°è¿œç¨‹ä»“åº“</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git push åœ°å€ master</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ å…‹éš†è¿œç¨‹ä»“åº“ \\ è·å–è¿œç¨‹ä»£ç </p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git clone åœ°å€ åˆ†æ”¯(eg:master)</span><br><span class=\"line\">git pull åœ°å€ åˆ†æ”¯(eg:master)</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶çŠ¶æ€</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git status</span><br></pre></td></tr></table></div></figure>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/git/20200513120026.png?x-oss-process=image/resize,p_80/sharpen,100\" style=\"width: image/resize,p_80/sharpen,100px;\"  alt=\"git/20200513120026\"></p>\n\n        <h2 id=\"3-HEAD\"   >\n          <a href=\"#3-HEAD\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.HEAD</h2>\n      <p>HEAD æŒ‡å½“å‰åˆ†æ”¯çš„æœ€è¿‘ä¸€æ¬¡æäº¤<br>head æŒ‡commitå¯¹è±¡</p>\n<p>head åŒ…å« HEAD</p>\n<p>ğŸ”¹ å ä½ç¬¦ ~ ä¸ ^</p>\n<p>~ ï¼š è¡¨ç¤ºç¥–å…ˆcommit<br>&emsp;&emsp;eg : HEAD~ = HEAD~1 = å‰ä¸€ä»£commitï¼ˆçˆ¶è¾ˆï¼‰<br>&emsp;&emsp;&emsp;HEAD~~ = HEAD~2 = å‰ä¸¤ä»£commitï¼ˆçˆ·çˆ·è¾ˆï¼‰<br>^ :  å•ä¸ªçˆ¶è¾ˆæ—¶ï¼Œä¸ ~ åŸºæœ¬ä¸€è‡´ã€‚<br>&emsp;&emsp;å¤šä¸ªçˆ¶è¾ˆæ—¶ï¼Œ^ = ^1 = ç¬¬ä¸€ä¸ªçˆ¶è¾ˆ</p>\n<p>ğŸ”¹ æ¡ˆä¾‹</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/git/20200512233813.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"git/20200512233813\"></p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">G   H   I   J</span><br><span class=\"line\"> \\ /     \\ /</span><br><span class=\"line\">  D   E   F</span><br><span class=\"line\">   \\  |  / \\</span><br><span class=\"line\">    \\ | /   |</span><br><span class=\"line\">     \\|/    |</span><br><span class=\"line\">      B     C</span><br><span class=\"line\">       \\   /</span><br><span class=\"line\">        \\ /</span><br><span class=\"line\">         A</span><br><span class=\"line\">A =      = A^<span class=\"number\">0</span></span><br><span class=\"line\">B = A^   = A^<span class=\"number\">1</span>     = A~<span class=\"number\">1</span></span><br><span class=\"line\">C = A^<span class=\"number\">2</span>  = A^<span class=\"number\">2</span></span><br><span class=\"line\">D = A^^  = A^<span class=\"number\">1</span>^<span class=\"number\">1</span>   = A~<span class=\"number\">2</span></span><br><span class=\"line\">E = B^<span class=\"number\">2</span>  = A^^<span class=\"number\">2</span></span><br><span class=\"line\">F = B^<span class=\"number\">3</span>  = A^^<span class=\"number\">3</span></span><br><span class=\"line\">G = A^^^ = A^<span class=\"number\">1</span>^<span class=\"number\">1</span>^<span class=\"number\">1</span> = A~<span class=\"number\">3</span></span><br><span class=\"line\">H = D^<span class=\"number\">2</span>  = B^^<span class=\"number\">2</span>    = A^^^<span class=\"number\">2</span>  = A~<span class=\"number\">2</span>^<span class=\"number\">2</span></span><br><span class=\"line\">I = F^   = B^<span class=\"number\">3</span>^    = A^^<span class=\"number\">3</span>^</span><br><span class=\"line\">J = F^<span class=\"number\">2</span>  = B^<span class=\"number\">3</span>^<span class=\"number\">2</span>   = A^^<span class=\"number\">3</span>^<span class=\"number\">2</span></span><br></pre></td></tr></table></div></figure>\n\n<p><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://scarletsky.github.io/2016/12/29/tilde-and-caret-in-git/\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰æ­¤å†…å®¹å‚è€ƒæ¥æº</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n\n        <h2 id=\"4-ä¿¡æ¯æŸ¥çœ‹\"   >\n          <a href=\"#4-ä¿¡æ¯æŸ¥çœ‹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>4. ä¿¡æ¯æŸ¥çœ‹</h2>\n      <p>ğŸ”¹ è·å–æœ¬åœ°æ–‡ä»¶çŠ¶æ€</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git status</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ è·å–commitå†å²ä¿¡æ¯</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git log</span><br><span class=\"line\">git log --oneline</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æŸ¥çœ‹å½“å‰ç´¢å¼•(æš‚å­˜åŒº)</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git ls-files -s</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æ˜¾ç¤ºäº† HEAD å¿«ç…§å®é™…çš„ç›®å½•åˆ—è¡¨</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git cat-file -p HEAD</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æŸ¥çœ‹HEADçš„å½“å‰æŒ‡å‘</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat .git/HEAD</span><br></pre></td></tr></table></div></figure>\n\n<p>ğŸ”¹ æŸ¥çœ‹HEADå„ä¸ªç¥–å…ˆ</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git rev-parse HEAD~ <span class=\"comment\">//å‰ä¸€ä¸ªç¥–å…ˆ(çˆ¶è¾ˆ)</span></span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"5-æ’¤é”€æ“ä½œ\"   >\n          <a href=\"#5-æ’¤é”€æ“ä½œ\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>5. æ’¤é”€æ“ä½œ</h2>\n      <p>ğŸ”¹ git checkout [ä¸å†™|HEAD] &lt;file&gt; //æ—§ç‰ˆ</p>\n<p>ğŸ”¹ git  restore [ä¸å†™|â€“staged] &lt;file&gt; //æ–°ç‰ˆ</p>\n<p>ğŸ”¹ git reset [â€“hard|soft|mixed(é»˜è®¤)|merge|keep] [commit|HEAD]<br>(1) â€“soft : å›é€€åˆ°æš‚å­˜åŒºçŠ¶æ€<br>(2) â€“mixed : å›é€€åˆ°æœ¬åœ°çŠ¶æ€ï¼ˆæœ¬åœ°ä¿®æ”¹çš„å†…å®¹å­˜åœ¨ï¼‰<br>(3) â€“hard : å›é€€åˆ°æŸæ¬¡æäº¤ï¼Œæ¸…é™¤æ‰€æœ‰å†å²çŠ¶æ€ï¼ŒåŒ…æ‹¬æœ¬åœ°æ–‡ä»¶å†…å®¹ã€‚</p>\n<p>ğŸ”¹ git revert HEAD^<br>    é‡æ–°æäº¤ï¼Œä¿ç•™å†å²è®°å½•<br>    git resetä¸ä¿ç•™å†å²è®°å½•<br>    <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/git/20200513010450.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"git/20200513010450\"><br>    <img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/git/20200513120122.png?x-oss-process=image/resize,p_90/sharpen,100\" style=\"width: image/resize,p_90/sharpen,100px;\"  alt=\"git/20200513120122\"></p>\n<p>ğŸ”¹ é‡å†™æœ€åä¸€æ¬¡commit</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\">git commit --amend -m</span><br></pre></td></tr></table></div></figure>\n\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/git/20200513143620_.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"git/20200513143620_\"></p>\n\n        <h2 id=\"6-å†²çªè§£å†³\"   >\n          <a href=\"#6-å†²çªè§£å†³\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>6. å†²çªè§£å†³</h2>\n      <p>ğŸ”¹ æäº¤æ—¶ï¼Œå‘ç”Ÿå†²çª</p>\n<p>æ‰§è¡Œgit pullï¼Œå‘ç”Ÿå†²çªåï¼Œgitä¼šå°†ä¸¤ä¸ªç‰ˆæœ¬çš„å†…å®¹åˆå¹¶åœ¨ä¸€èµ·ã€‚<br>è§£å†³ï¼šå…ˆgit statusï¼ŒæŸ¥æ‰¾å‘ç”Ÿå†²çªçš„æ–‡ä»¶ï¼Œè‡ªè¡Œä¿®æ”¹å†²çªå†…å®¹åå†æäº¤ï¼Œpull</p>\n<p>ğŸ”¹ å›é€€commitï¼Œå‘ç”Ÿå†²çª</p>\n<p>æ‰§è¡Œrevert HEAD^ï¼Œå‘ç”Ÿå†²çªã€‚<br>è§£å†³ï¼šåŒæ ·æŸ¥çœ‹å†²çªã€ä¿®æ”¹å†²çªåï¼Œæ‰§è¡Œgit revert â€“continueã€‚</p>\n\n        <h2 id=\"7-Gitçš„åˆ†æ”¯å¤„ç†\"   >\n          <a href=\"#7-Gitçš„åˆ†æ”¯å¤„ç†\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>7. Gitçš„åˆ†æ”¯å¤„ç†</h2>\n      <p>ğŸ”¹ å¸¸ç”¨å‘½ä»¤</p>\n<figure class=\"highlight cs\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span></span><br><span class=\"line\">git branch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span></span><br><span class=\"line\">git branch -r</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></span><br><span class=\"line\">git branch [branch-name]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span></span><br><span class=\"line\">git checkout -b [branch]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># å°†åˆ†æ”¯æ¨åˆ°è¿œç«¯</span></span><br><span class=\"line\">git push åœ°å€ dev(åˆ†æ”¯å):dev(åˆ†æ”¯å)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class=\"line\">git checkout [branch]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class=\"line\">$ git merge [branch]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># åˆ é™¤åˆ†æ”¯</span></span><br><span class=\"line\">$ git branch -d [branch-name]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class=\"line\">$ git push origin --delete [branch-name]</span><br><span class=\"line\">$ git branch -dr [remote/branch]</span><br></pre></td></tr></table></div></figure>\n\n<p><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://mp.weixin.qq.com/s/Bf7uVhGiu47uOELjmC5uXQ\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰æ­¤å†…å®¹æ¥æº</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<blockquote>\n<p>å‚è€ƒæ–‡ç« ï¼š<br><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://mp.weixin.qq.com/s/Bf7uVhGiu47uOELjmC5uXQ\"  target=\"_blank\" rel=\"noopener\">ç‹‚ç¥è¯´ èŠGitğŸ“˜</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span><br><span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://blog.csdn.net/ligang2585116/article/details/51816372#t7\"  target=\"_blank\" rel=\"noopener\">CSDN å¥‹é£› Git Proæ·±å…¥æµ…å‡ºï¼ˆäºŒï¼‰ğŸ“˜</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n</blockquote>\n","categories":["ä¸ªäººç¬”è®°","å·¥å…·","ç‰ˆæœ¬æ§åˆ¶","Git"],"tags":["ç‰ˆæœ¬æ§åˆ¶","Git"]},{"title":"[æ€»ç»“]Javaå®¹å™¨","url":"/2020/05/21/%E6%80%BB%E7%BB%93-Java%E5%AE%B9%E5%99%A8/","content":"\n        <h2 id=\"1-Listã€Mapã€Set\"   >\n          <a href=\"#1-Listã€Mapã€Set\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>1. Listã€Mapã€Set</h2>\n      <p>ğŸ”¹ List: ç”¨äºæ’åºã€‚å…ƒç´ æœ‰åºã€å¯é‡å¤ã€‚<br>&emsp;&emsp;&emsp;&emsp;å®ç°ï¼šObjectæ•°ç»„ | åŒå‘é“¾è¡¨<br>ğŸ”¹ Mapï¼šç”¨äºæœç´¢ã€‚å­˜å‚¨é”®å€¼å¯¹ã€‚keyä¸å¯é‡å¤ã€‚<br>&emsp;&emsp;&emsp;&emsp;å®ç°ï¼šæ•°ç»„+é“¾è¡¨ï¼ˆJDK1.8å‰ï¼‰ï¼Œæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ˆJDK1.8~ï¼‰<br>ğŸ”¹ Setï¼šæ— é‡å¤ï¼ˆå»é‡ï¼‰ã€‚ä¸å¯é‡å¤ã€‚<br>&emsp;&emsp;&emsp;&emsp;å®ç°ï¼šä½¿ç”¨Mapä¸­çš„Key</p>\n<a id=\"more\"></a>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521153005.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"collections/20200521153005\"><br>RandomAccessï¼šæ ‡è®°å‹æ¥å£ã€‚è¡¨ç¤ºå¯éšæœºè®¿é—®å…ƒç´ ï¼ˆå¯å¿«é€Ÿè®¿é—®ï¼‰ã€‚</p>\n\n        <h2 id=\"2-List\"   >\n          <a href=\"#2-List\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2. List</h2>\n      \n        <h3 id=\"2-1-ArrayListã€LinkedList-åŒºåˆ«\"   >\n          <a href=\"#2-1-ArrayListã€LinkedList-åŒºåˆ«\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1 ArrayListã€LinkedList åŒºåˆ«</h3>\n      \n        <h4 id=\"2-1-1-åº•å±‚å®ç°\"   >\n          <a href=\"#2-1-1-åº•å±‚å®ç°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.1 åº•å±‚å®ç°</h4>\n      <p>ğŸ”¹ ArrayListï¼š<b>æ•°ç»„</b><br>ğŸ”¹ LinkedListï¼š<b>åŒå‘é“¾è¡¨ï¼ˆ1.7~ï¼‰</b>ï¼Œ1.7ä¹‹å‰æ˜¯å¾ªç¯é“¾è¡¨ã€‚</p>\n<p>å¾ªç¯é“¾è¡¨ç›¸æ¯”åŒå‘é“¾è¡¨çš„ç¼ºç‚¹ï¼š<br>&emsp;1ï¸âƒ£ åˆå§‹åŒ–æ—¶ï¼Œéœ€å…ˆåˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ä½œä¸ºå¤´èŠ‚ç‚¹ï¼Œä»¥é¿å…éœ€è¦å¤šæ¬¡æ ¡éªŒå¤´èŠ‚ç‚¹æ˜¯å¦ä¸ºnullã€‚<br>&emsp;2ï¸âƒ£ å¤´å°¾éƒ¨èŠ‚ç‚¹ä¸å¤Ÿæ¸…æ™°ï¼Œä¸”åœ¨å¤´å°¾éƒ¨åˆ†è¿›è¡Œå¢åˆ æ—¶ï¼Œéœ€å¤„ç†å¤´å°¾éƒ¨ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>\n\n        <h4 id=\"2-1-2-å¢åˆ å…ƒç´ \"   >\n          <a href=\"#2-1-2-å¢åˆ å…ƒç´ \" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.2 å¢åˆ å…ƒç´ </h4>\n      <p>ğŸ”¹ ArrayListï¼šé»˜è®¤æ—¶ï¼Œå¤æ‚åº¦O(1)ã€‚æŒ‡å®šä½ç½®æ—¶ï¼Œå¤æ‚åº¦O(n-i)ã€‚</p>\n<pre><code>å¢åˆ æŸå…ƒç´ å°†å¯¹åç»­å…ƒç´ ä½ç½®äº§ç”Ÿå½±å“ã€‚ä¸æŒ‡å®šä½ç½®åˆ™é»˜è®¤å¢åŠ åˆ°å°¾éƒ¨ã€‚</code></pre><p>ğŸ”¹ LinkedList: å¤æ‚åº¦O(1)ã€‚</p>\n\n        <h4 id=\"2-1-3-æŸ¥æ‰¾å…ƒç´ \"   >\n          <a href=\"#2-1-3-æŸ¥æ‰¾å…ƒç´ \" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.3 æŸ¥æ‰¾å…ƒç´ </h4>\n      <p>ğŸ”¹ ArrayListï¼šå¯å¿«é€ŸæŸ¥è¯¢<br>ğŸ”¹ LinkedListï¼šéœ€éå†æŸ¥è¯¢</p>\n\n        <h4 id=\"2-1-4-çº¿ç¨‹å®‰å…¨æ€§\"   >\n          <a href=\"#2-1-4-çº¿ç¨‹å®‰å…¨æ€§\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.4 çº¿ç¨‹å®‰å…¨æ€§</h4>\n      <p>ğŸ”¹ ä¸¤è€…éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨çš„</p>\n\n        <h4 id=\"2-1-5-ç©ºé—´å ç”¨\"   >\n          <a href=\"#2-1-5-ç©ºé—´å ç”¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.5 ç©ºé—´å ç”¨</h4>\n      <p>ğŸ”¹ ArrayListï¼šéœ€è¦é¢„ç•™å®¹é‡ç©ºé—´<br>ğŸ”¹ LinkedListï¼šæ¯ä¸ªèŠ‚ç‚¹éœ€å­˜å‚¨å‰ç»§å’Œåç»­èŠ‚ç‚¹çš„æŒ‡é’ˆ</p>\n\n        <h4 id=\"2-1-6-æ‰©å®¹\"   >\n          <a href=\"#2-1-6-æ‰©å®¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.1.6 æ‰©å®¹</h4>\n      <p>ğŸ”¹ ArrayListï¼š<b>+50%</b>,åˆå§‹å€¼10<br>ğŸ”¹ LinkedListï¼šä¸”æ— éœ€æ‰©å®¹,æ— åˆå§‹å€¼</p>\n\n        <h3 id=\"2-2-ArrayListã€Vector-åŒºåˆ«\"   >\n          <a href=\"#2-2-ArrayListã€Vector-åŒºåˆ«\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2 ArrayListã€Vector åŒºåˆ«</h3>\n      \n        <h4 id=\"2-2-1-çº¿ç¨‹å®‰å…¨æ€§\"   >\n          <a href=\"#2-2-1-çº¿ç¨‹å®‰å…¨æ€§\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2.1 çº¿ç¨‹å®‰å…¨æ€§</h4>\n      <p>ğŸ”¹ ArrayListï¼šéçº¿ç¨‹å®‰å…¨<br>ğŸ”¹ Vectorï¼šçº¿ç¨‹å®‰å…¨</p>\n\n        <h4 id=\"2-2-2-æ•ˆç‡\"   >\n          <a href=\"#2-2-2-æ•ˆç‡\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2.2 æ•ˆç‡</h4>\n      <p>ğŸ”¹ ArrayListï¼šæ•ˆç‡æ›´é«˜<br>ğŸ”¹ Vectorï¼šæ•ˆç‡ä½</p>\n<pre><code>Vectoræ¯ä¸ªæ–¹æ³•éƒ½æ·»åŠ äº†åŒæ­¥ï¼Œå³Synchronizedã€‚å¯¼è‡´æ•ˆç‡ä½ã€‚</code></pre>\n        <h4 id=\"2-2-3-æ‰©å®¹\"   >\n          <a href=\"#2-2-3-æ‰©å®¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>2.2.3 æ‰©å®¹</h4>\n      <p>ğŸ”¹ ArrayListï¼š<b>å¢åŠ  50%</b>ï¼Œåˆå§‹å®¹é‡10<br>ğŸ”¹ Vectorï¼š<b>å¢åŠ  100%</b>ï¼Œåˆå§‹å®¹é‡10</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ArrayListçš„growä¸­çš„å¢åŠ çš„å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class=\"number\">1</span>);</span><br></pre></td></tr></table></div></figure>\n\n\n        <h2 id=\"3-Map-and-Set\"   >\n          <a href=\"#3-Map-and-Set\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3. Map and Set</h2>\n      \n        <h3 id=\"3-1-HashMap-ä¸-HashTable-ä¸ä½¿ç”¨\"   >\n          <a href=\"#3-1-HashMap-ä¸-HashTable-ä¸ä½¿ç”¨\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1 HashMap ä¸ HashTable(ä¸ä½¿ç”¨)</h3>\n      \n        <h4 id=\"3-1-1-åº•å±‚å®ç°\"   >\n          <a href=\"#3-1-1-åº•å±‚å®ç°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1.1 åº•å±‚å®ç°</h4>\n      <p>ğŸ”¹ HashMap: <b>æ•°ç»„+çº¢é»‘æ ‘+é“¾è¡¨(1.8~)</b>,1.8å‰æ˜¯æ•°ç»„+é“¾è¡¨<br>&emsp; jdk1.8ï¼Œä¸ºäº†è§£å†³å“ˆå¸Œå†²çªæ‰€å¸¦æ¥çš„é—®é¢˜ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼(é»˜è®¤ä¸º8)ï¼Œä¸”å½“å‰é•¿åº¦ä¸å°äº64ï¼Œåˆ™å°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ã€‚è‹¥é•¿åº¦å°äº64ï¼Œåˆ™æ˜¯è¿›è¡Œæ‰©å®¹ã€‚<br>ğŸ”¹ HashTable: <b>æ•°ç»„+é“¾è¡¨</b></p>\n\n        <h4 id=\"3-1-2-çº¿ç¨‹å®‰å…¨æ€§\"   >\n          <a href=\"#3-1-2-çº¿ç¨‹å®‰å…¨æ€§\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1.2 çº¿ç¨‹å®‰å…¨æ€§</h4>\n      <p>ğŸ”¹ HashMapï¼š<b>çº¿ç¨‹ä¸å®‰å…¨</b>ã€‚è‹¥éœ€çº¿ç¨‹å®‰å…¨å¯ä½¿ç”¨ConcurrentHashMap<br>ğŸ”¹ HashTableï¼š<b>çº¿ç¨‹å®‰å…¨</b>ã€‚å‡ ä¹å¤§éƒ¨åˆ†æ–¹æ³•éƒ½åŠ äº†åŒæ­¥</p>\n\n        <h4 id=\"3-1-3-æ•ˆç‡\"   >\n          <a href=\"#3-1-3-æ•ˆç‡\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1.3 æ•ˆç‡</h4>\n      <p>ğŸ”¹ HashMapï¼šæ•ˆç‡é«˜<br>ğŸ”¹ HashTableï¼šæ•ˆç‡ä½</p>\n\n        <h4 id=\"3-1-4-æ‰©å®¹\"   >\n          <a href=\"#3-1-4-æ‰©å®¹\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1.4 æ‰©å®¹</h4>\n      <p>ğŸ”¹ HashMap:å¢åŠ ä¸€å€ã€‚åˆå§‹å€¼ä¸º16ã€‚æ‰©å®¹å› å­é»˜è®¤ä¸º0.75<br>&emsp;è‹¥æŒ‡å®šå¤§å°æ—¶ï¼Œé•¿åº¦å°†ä¸ºæ¯”è¯¥å€¼ç¨å¤§æˆ–ç­‰äºçš„2çš„å¹‚æ¬¡æ–¹ã€‚è¿™æ˜¯ç”±äºhash%length==hash&amp;(2^n-1)ï¼Œä¸”&amp;çš„æ•ˆç‡é«˜äº%ã€‚<br>&emsp;eg: æŒ‡å®šå€¼ä¸º50, 50 &lt; 2^6. æ•…å®¹é‡ä¸º2^6=16</p>\n<p>ğŸ”¹ HashTable:å¢åŠ ä¸€å€,å†+1.åˆå§‹å€¼ä¸º11</p>\n\n        <h4 id=\"3-1-5-nullå€¼çš„å¤„ç†\"   >\n          <a href=\"#3-1-5-nullå€¼çš„å¤„ç†\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.1.5 nullå€¼çš„å¤„ç†</h4>\n      <p>ğŸ”¹ HashMap:keyå’Œvalueéƒ½æ”¯æŒnullå€¼ï¼Œkeyä»ä¸å¯é‡å¤<br>ğŸ”¹ HashTable:æŠ›NullPointerException</p>\n\n        <h3 id=\"3-2-HashMap-ä¸-HashSet\"   >\n          <a href=\"#3-2-HashMap-ä¸-HashSet\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2 HashMap ä¸ HashSet</h3>\n      \n        <h4 id=\"3-2-1-åº•å±‚å®ç°\"   >\n          <a href=\"#3-2-1-åº•å±‚å®ç°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2.1 åº•å±‚å®ç°</h4>\n      <p>HashSetåº•å±‚ä¸HashMapä¸€è‡´ï¼Œå…¶å†…éƒ¨è°ƒç”¨äº†HashMapçš„æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//HashSet ä¸­çš„ä»£ç ï¼šå…¶ä¸­çš„æ–¹æ³•å®ç°æ˜¯é€šè¿‡HashMapä»£ç†æ¥å®ç°</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object PRESENT = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> map.size();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> map.put(e, PRESENT)==<span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h4 id=\"3-2-2-å¯¹Hashcodeçš„è®¡ç®—\"   >\n          <a href=\"#3-2-2-å¯¹Hashcodeçš„è®¡ç®—\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.2.2 å¯¹Hashcodeçš„è®¡ç®—</h4>\n      <p>ğŸ”¹ HashMapï¼šæ ¹æ®keyå’Œvalueè¿›è¡Œè¿ç®—<br>ğŸ”¹ HashSetï¼šæ²¡æœ‰é‡å†™HashCodeæ–¹æ³•ï¼Œvalueå€¼ä»¥ç©ºå¯¹è±¡ä»£æ›¿ã€‚</p>\n<figure class=\"highlight java\"><div class=\"table-container\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//è¯¥èŠ‚ç‚¹ç±»ä¸ºHashMapä¸­å†…éƒ¨ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>, <span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">//keyå’Œvalueçš„åœ°å€è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼ˆä¸åŒåˆ™1ï¼Œç›¸åŒåˆ™0ï¼‰</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Objects.hashCode(<span class=\"keyword\">this</span>.key) ^ Objects.hashCode(<span class=\"keyword\">this</span>.value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object var1)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (var1 == <span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (var1 <span class=\"keyword\">instanceof</span> Entry) &#123;</span><br><span class=\"line\">                Entry var2 = (Entry)var1;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (Objects.equals(<span class=\"keyword\">this</span>.key, var2.getKey()) &amp;&amp; Objects.equals(<span class=\"keyword\">this</span>.value, var2.getValue())) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n        <h3 id=\"ğŸ“å†…å®¹è¡¥å……ï¼šhashcode-ä¸-equals\"   >\n          <a href=\"#ğŸ“å†…å®¹è¡¥å……ï¼šhashcode-ä¸-equals\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>ğŸ“å†…å®¹è¡¥å……ï¼šhashcode() ä¸ equals()</h3>\n      <p>ğŸ”¹ Objectä¸­çš„hashcode()ï¼Œæ˜¯å…³äºå…¶è¯¥å¯¹è±¡å®ä¾‹çš„å†…å­˜åœ°å€ã€‚<br>ğŸ”¹ Mapä¸­ï¼Œhashcode ç›¸åŒï¼Œequalsä¸ä¸€å®šç›¸ç­‰ï¼Œè¡¨ç¤ºåœ¨åŒä¸€ä¸ªæ•£åˆ—æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ï¼‰ã€‚equalç›¸ç­‰ï¼Œhashcodeä¸€å®šç›¸ç­‰ã€‚<br>ğŸ”¹ ç”±äºhashcodeå­˜åœ¨å†²çªï¼Œæ•…éœ€è¦ä½¿ç”¨equalsè¿›è¡Œåˆ¤æ–­ã€‚</p>\n\n        <h3 id=\"3-3-ConcurrentHashMap-ä¸-HashTable\"   >\n          <a href=\"#3-3-ConcurrentHashMap-ä¸-HashTable\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3 ConcurrentHashMap ä¸ HashTable</h3>\n      <p>ä¸¤è€…éƒ½æ˜¯çº¿ç¨‹å®‰å…¨ã€‚HashTableå‡ ä¹æ‰€æœ‰æ–¹æ³•éƒ½æ·»åŠ äº†åŒæ­¥ï¼Œæ•ˆç‡ä½ã€‚<br>JDK1.7çš„ConcurrentHashMapåˆ™æ˜¯æ¥å–ä»£HashTableã€‚</p>\n<p><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521144928.png?x-oss-process=image/resize,p_100/sharpen,50\" style=\"width: image/resize,p_100/sharpen,50px;\"  alt=\"collections/20200521144928\"></p>\n\n        <h4 id=\"3-3-1-åº•å±‚å®ç°\"   >\n          <a href=\"#3-3-1-åº•å±‚å®ç°\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3.1 åº•å±‚å®ç°</h4>\n      <p>ğŸ”¹ ConcurrentHashMapï¼šåŒHashMap<br>ğŸ”¹ HashTableï¼šæ•°ç»„+é“¾è¡¨</p>\n\n        <h4 id=\"3-3-2-çº¿ç¨‹å®‰å…¨çš„ç­–ç•¥\"   >\n          <a href=\"#3-3-2-çº¿ç¨‹å®‰å…¨çš„ç­–ç•¥\" class=\"heading-link\"><i class=\"fas fa-link\"></i></a>3.3.2 çº¿ç¨‹å®‰å…¨çš„ç­–ç•¥</h4>\n      <p>ğŸ”¹ ConcurrentHashMapï¼š<b>ä½¿ç”¨â€œåˆ†æ®µå¼é”â€</b>ã€‚<br>&emsp;æ¯ä¸€æ®µæ•°æ®åˆ†åˆ«åŠ é”ã€‚è€Œä¸”åŠ çš„é”æ˜¯ReentrantLockå¯é‡å…¥é”ã€‚<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521150144.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"collections/20200521150144\"><br>&emsp;<span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://www.cnblogs.com/chengxiao/p/6842045.html\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰å›¾ç‰‡æ¥æº</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n<p>ğŸ”¹ HashTableï¼š<b>å¤§éƒ¨åˆ†æ–¹æ³•æ·»åŠ äº†åŒæ­¥</b>ã€‚å¦‚put/getæ–¹æ³•æ·»åŠ äº†Synchronzedã€‚<br>&emsp;æ•ˆç‡å¾ˆä½ï¼Œè¿‘ä¼¼æ•´ä¸ªå®¹å™¨å¯¹è±¡æ·»åŠ äº†é”ã€‚<br><img   src=\"https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521145945.png?x-oss-process=image/resize,p_70/sharpen,100\" style=\"width: image/resize,p_70/sharpen,100px;\"  alt=\"collections/20200521145945\"><br>&emsp;<span class=\"exturl\"><a class=\"exturl__link\"   href=\"https://www.cnblogs.com/chengxiao/p/6842045.html\"  target=\"_blank\" rel=\"noopener\">ğŸ‘‰å›¾ç‰‡æ¥æº</a><span class=\"exturl__icon\"><i class=\"fas fa-external-link-alt\"></i></span></span></p>\n","categories":["ä¸ªäººç¬”è®°","Java","åŸºç¡€","å®¹å™¨"],"tags":["Java","Javaå®¹å™¨"]}]